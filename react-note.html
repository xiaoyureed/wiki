<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>react-note - Xiaoyu Wiki</title>
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "light" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="pre.html">pre page</a></li><li class="chapter-item expanded "><a href="SpringBoot-note.html"><strong aria-hidden="true">1.</strong> Spring boot note</a></li><li class="chapter-item expanded "><a href="springcloud-note.html"><strong aria-hidden="true">2.</strong> springcloud-note</a></li><li class="chapter-item expanded "><a href="java-concurrent.html"><strong aria-hidden="true">3.</strong> java-concurrent</a></li><li class="chapter-item expanded "><a href="java-memory-model-jmm-jvm.html"><strong aria-hidden="true">4.</strong> java-memory-model-jmm-jvm</a></li><li class="chapter-item expanded "><a href="java-note.html"><strong aria-hidden="true">5.</strong> java-note</a></li><li class="chapter-item expanded "><a href="rust-note.html"><strong aria-hidden="true">6.</strong> rust-note</a></li><li class="chapter-item expanded "><a href="git-note.html"><strong aria-hidden="true">7.</strong> git note</a></li><li class="chapter-item expanded "><a href="linux-note.html"><strong aria-hidden="true">8.</strong> linux-note</a></li><li class="chapter-item expanded "><a href="cross-gfw.html"><strong aria-hidden="true">9.</strong> cross gfw</a></li><li class="chapter-item expanded "><a href="react-note.html" class="active"><strong aria-hidden="true">10.</strong> react-note</a></li><li class="chapter-item expanded "><a href="cs-note.html"><strong aria-hidden="true">11.</strong> cs note</a></li><li class="chapter-item expanded "><a href="distributed-system.html"><strong aria-hidden="true">12.</strong> distributed system</a></li><li class="chapter-item expanded "><a href="message-queue.html"><strong aria-hidden="true">13.</strong> message-queue</a></li><li class="chapter-item expanded "><a href="data-structure-and-algorithm.html"><strong aria-hidden="true">14.</strong> data structure and algorithm</a></li><li class="chapter-item expanded "><a href="effective-java-reading-note.html"><strong aria-hidden="true">15.</strong> effective java reading note</a></li><li class="chapter-item expanded "><a href="docker-note.html"><strong aria-hidden="true">16.</strong> docker note</a></li><li class="chapter-item expanded "><a href="how-to-test-java-app.html"><strong aria-hidden="true">17.</strong> how-to-test-java-app</a></li><li class="chapter-item expanded "><a href="maven-note.html"><strong aria-hidden="true">18.</strong> maven-note</a></li><li class="chapter-item expanded "><a href="mac.html"><strong aria-hidden="true">19.</strong> mac</a></li><li class="chapter-item expanded "><a href="autohotkey.html"><strong aria-hidden="true">20.</strong> AHK collection</a></li><li class="chapter-item expanded "><a href="class-conflict-check.html"><strong aria-hidden="true">21.</strong> class conflict check</a></li><li class="chapter-item expanded "><a href="cpp.html"><strong aria-hidden="true">22.</strong> cpp</a></li><li class="chapter-item expanded "><a href="create-blog-by-react.html"><strong aria-hidden="true">23.</strong> create blog by react</a></li><li class="chapter-item expanded "><a href="css-note.html"><strong aria-hidden="true">24.</strong> css-note</a></li><li class="chapter-item expanded "><a href="css-pre-processor.html"><strong aria-hidden="true">25.</strong> css pre processor</a></li><li class="chapter-item expanded "><a href="defect-about-java-programmer-from-programming-thinking.html"><strong aria-hidden="true">26.</strong> from programming thinking</a></li><li class="chapter-item expanded "><a href="design-pattern-note.html"><strong aria-hidden="true">27.</strong> design pattern note</a></li><li class="chapter-item expanded "><a href="dev-resources.html"><strong aria-hidden="true">28.</strong> dev resources</a></li><li class="chapter-item expanded "><a href="eclipse.html"><strong aria-hidden="true">29.</strong> eclipse</a></li><li class="chapter-item expanded "><a href="extjs-note.html"><strong aria-hidden="true">30.</strong> extjs-note</a></li><li class="chapter-item expanded "><a href="FreeMarker-note.html"><strong aria-hidden="true">31.</strong> FreeMarker-note</a></li><li class="chapter-item expanded "><a href="go-note.html"><strong aria-hidden="true">32.</strong> golang</a></li><li class="chapter-item expanded "><a href="hello-world.html"><strong aria-hidden="true">33.</strong> hexo</a></li><li class="chapter-item expanded "><a href="html-note.html"><strong aria-hidden="true">34.</strong> html-note</a></li><li class="chapter-item expanded "><a href="idea-note.html"><strong aria-hidden="true">35.</strong> idea-note</a></li><li class="chapter-item expanded "><a href="interview-system-design.html"><strong aria-hidden="true">36.</strong> interview-system-design</a></li><li class="chapter-item expanded "><a href="java-code-clean.html"><strong aria-hidden="true">37.</strong> java-code-clean</a></li><li class="chapter-item expanded "><a href="job-interview-cv.html"><strong aria-hidden="true">38.</strong> job-interview-cv</a></li><li class="chapter-item expanded "><a href="joke-collecting.html"><strong aria-hidden="true">39.</strong> joke-collecting</a></li><li class="chapter-item expanded "><a href="jquery-note.html"><strong aria-hidden="true">40.</strong> jquery-note</a></li><li class="chapter-item expanded "><a href="js-tutorial.html"><strong aria-hidden="true">41.</strong> js-tutorial</a></li><li class="chapter-item expanded "><a href="money.html"><strong aria-hidden="true">42.</strong> money</a></li><li class="chapter-item expanded "><a href="mongodb-note.html"><strong aria-hidden="true">43.</strong> mongodb-note</a></li><li class="chapter-item expanded "><a href="mvc-mvvm.html"><strong aria-hidden="true">44.</strong> mvc-mvvm</a></li><li class="chapter-item expanded "><a href="my-ioc.html"><strong aria-hidden="true">45.</strong> my-ioc</a></li><li class="chapter-item expanded "><a href="mybatis-note.html"><strong aria-hidden="true">46.</strong> mybatis-note</a></li><li class="chapter-item expanded "><a href="mysql-note.html"><strong aria-hidden="true">47.</strong> mysql-note</a></li><li class="chapter-item expanded "><a href="nodejs.html"><strong aria-hidden="true">48.</strong> nodejs</a></li><li class="chapter-item expanded "><a href="outline-about-cache.html"><strong aria-hidden="true">49.</strong> outline-about-cache</a></li><li class="chapter-item expanded "><a href="outline-about-db-design-note.html"><strong aria-hidden="true">50.</strong> outline-about-db-design-note</a></li><li class="chapter-item expanded "><a href="outline-about-http.html"><strong aria-hidden="true">51.</strong> outline-about-http</a></li><li class="chapter-item expanded "><a href="outline-about-rest-api.html"><strong aria-hidden="true">52.</strong> outline-about-rest-api</a></li><li class="chapter-item expanded "><a href="php-note.html"><strong aria-hidden="true">53.</strong> php-note</a></li><li class="chapter-item expanded "><a href="postgres-note.html"><strong aria-hidden="true">54.</strong> postgres-note</a></li><li class="chapter-item expanded "><a href="python-note.html"><strong aria-hidden="true">55.</strong> python-note</a></li><li class="chapter-item expanded "><a href="redis-login-limitation.html"><strong aria-hidden="true">56.</strong> redis-login-limitation</a></li><li class="chapter-item expanded "><a href="redis-note.html"><strong aria-hidden="true">57.</strong> redis-note</a></li><li class="chapter-item expanded "><a href="regex-js.html"><strong aria-hidden="true">58.</strong> regex-js</a></li><li class="chapter-item expanded "><a href="servlet.html"><strong aria-hidden="true">59.</strong> servlet</a></li><li class="chapter-item expanded "><a href="spring-note.html"><strong aria-hidden="true">60.</strong> spring-note</a></li><li class="chapter-item expanded "><a href="springboot-doc.html"><strong aria-hidden="true">61.</strong> springboot-doc</a></li><li class="chapter-item expanded "><a href="springmvc-note.html"><strong aria-hidden="true">62.</strong> springmvc-note</a></li><li class="chapter-item expanded "><a href="task-schedule-note.html"><strong aria-hidden="true">63.</strong> task-schedule-note</a></li><li class="chapter-item expanded "><a href="tcp-ip-note.html"><strong aria-hidden="true">64.</strong> tcp-ip-note</a></li><li class="chapter-item expanded "><a href="tomcat-jetty-nginx.html"><strong aria-hidden="true">65.</strong> tomcat-jetty-nginx</a></li><li class="chapter-item expanded "><a href="webpack-note.html"><strong aria-hidden="true">66.</strong> webpack-note</a></li><li class="chapter-item expanded "><a href="windows-sub-system-on-linux.html"><strong aria-hidden="true">67.</strong> windows-sub-system-on-linux</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Xiaoyu Wiki</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <hr />
<h2>title: React
tags:
- react
- module
date: 2018-06-28 20:26:11
categories: frontend</h2>
<div align="center">
<p>https://github.com/react-hook-form/react-hook-form</p>
<p>https://github.com/brick-design/react-visual-editor è¡¨å•è®¾è®¡ https://brick-design.github.io/react-visual-editor/
https://react-hook-form.com/zh/form-builder/</p>
<p>react-dnd, react-draggable, react-resizable, react-drag-select, react-rnd, react-grid-layout, react-resizable-box å¼€æºæ‹–æ‹½ç»„ä»¶</p>
<p>https://github.com/react-icons/react-icons å›¾æ ‡åº“ (ç»¼åˆå„ç§æ¡†æ¶çš„å›¾æ ‡)</p>
<p>https://zhuanlan.zhihu.com/p/78051039 èµ„æº</p>
<p>https://github.com/alibaba/hooks è‡ªå®šä¹‰ hooks åº“</p>
<p>https://www.zhihu.com/question/59073695/answer/1071631250 ç±»åº“æ¨è</p>
<p>https://reactjs.org/
è‹¥ä»¥ MVC æ¡†æ¶æ¥çœ‹ï¼ŒReact å±äºview</p>
<p>https://github.com/dypsilon/frontend-dev-bookmarks å‰ç«¯é›†åˆ</p>
<p>https://www.zhihu.com/question/39943474/answer/156412178,</p>
<p>https://www.zhihu.com/question/29848048/answer/45793588,</p>
<p>https://github.com/petehunt/react-howto/blob/master/README-zh.md,</p>
<p>https://github.com/bailicangdu/react-pxq</p>
<p><a href="https://zhuanlan.zhihu.com/p/37148975">æ•ˆç‡ä¼˜åŒ–</a></p>
<p><a href="https://reacttraining.com/">react tutorial</a></p>
<p>https://www.zhihu.com/question/59073695/answer/1071631250 æ¨èçš„ react åº“</p>
<p>https://www.npmjs.com/
https://ant.design/components/overview-cn/</p>
<p>https://www.zhihu.com/question/336664883/answer/790855896 ä¸ºä»€ä¹ˆè¦æ‹†åˆ†åŒ…? ReactDomåªåšå’Œæµè§ˆå™¨æˆ–DOMç›¸å…³çš„æ“ä½œï¼Œä¾‹å¦‚ReactDOM.render()å’ŒReactDOM.findDOMNode()ã€‚å¦‚æœæ˜¯æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼Œå¯ä»¥ReactDOM.renderToString()</p>
<p>http://huziketang.mangojuice.top/books/react/ å®æˆ˜</p>
<p>https://github.com/helloqingfeng/Awsome-Front-End-learning-resource å¤§å‰ç«¯
https://github.com/qiu-deqing/FE-interview , https://github.com/markyun/My-blog/tree/master/Front-end-Developer-Questions é¢è¯•é¢˜</p>
</div>
<!--more-->
<!-- TOC -->
<ul>
<li><a href="#%E9%9D%A2%E8%AF%95%E9%A2%98">é¢è¯•é¢˜</a></li>
<li><a href="#why-react">why react</a></li>
<li><a href="#jsx">jsx</a>
<ul>
<li><a href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95">åŸºæœ¬è¯­æ³•</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8-jsx-%E9%9C%80%E8%A6%81%E7%9A%84%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE">ä½¿ç”¨ jsx éœ€è¦çš„ç¯å¢ƒé…ç½®</a></li>
</ul>
</li>
<li><a href="#%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA">å¼€å‘ç¯å¢ƒæ­å»º</a>
<ul>
<li><a href="#%E8%80%81%E9%A1%B9%E7%9B%AE%E6%8E%A5%E5%85%A5">è€é¡¹ç›®æ¥å…¥</a></li>
<li><a href="#create-react-app-%E4%BD%BF%E7%94%A8">create-react-app ä½¿ç”¨</a></li>
<li><a href="#vscode-%E7%8E%AF%E5%A2%83">vscode ç¯å¢ƒ</a></li>
<li><a href="#webpack-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA">webpack ç¯å¢ƒæ­å»º</a></li>
</ul>
</li>
<li><a href="#%E7%BB%84%E4%BB%B6%E5%8C%96">ç»„ä»¶åŒ–</a>
<ul>
<li><a href="#%E7%A4%BE%E5%8C%BA%E5%BC%80%E6%BA%90%E7%BB%84%E4%BB%B6">ç¤¾åŒºå¼€æºç»„ä»¶</a></li>
<li><a href="#web-components">Web Components</a></li>
<li><a href="#%E7%BB%84%E4%BB%B6%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99">ç»„ä»¶è®¾è®¡åŸåˆ™</a></li>
<li><a href="#%E5%B8%A6%E7%8A%B6%E6%80%81%E7%BB%84%E4%BB%B6-%E7%BA%AF%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6">å¸¦çŠ¶æ€ç»„ä»¶ çº¯å‡½æ•°ç»„ä»¶</a></li>
<li><a href="#%E5%87%BD%E6%95%B0%E7%BB%91%E5%AE%9A%E6%96%B9%E5%BC%8F">å‡½æ•°ç»‘å®šæ–¹å¼</a></li>
<li><a href="#hooks">hooks</a>
<ul>
<li><a href="#create-react-app-%E9%85%8D%E5%90%88-eslint-plugin-react-hooks">create react app é…åˆ eslint-plugin-react-hooks</a></li>
<li><a href="#hooks-%E5%8E%9F%E7%90%86">hooks åŸç†</a></li>
<li><a href="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5">æœ€ä½³å®è·µ</a></li>
<li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81-hooks">ä¸ºä»€ä¹ˆéœ€è¦ hooks</a></li>
<li><a href="#useref">useRef</a></li>
<li><a href="#usememo-and-memo-and-usecallback">useMemo and memo and useCallback</a></li>
<li><a href="#usestate">useState</a>
<ul>
<li><a href="#state-%E7%89%B9%E6%80%A7">state ç‰¹æ€§</a></li>
<li><a href="#%E4%BC%A0%E7%BB%9F%E5%86%99%E6%B3%95">ä¼ ç»Ÿå†™æ³•</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8-functional-%E7%BB%84%E4%BB%B6%E7%9A%84%E5%86%99%E6%B3%95">ä½¿ç”¨ functional ç»„ä»¶çš„å†™æ³•</a></li>
<li><a href="#%E5%BB%B6%E8%BF%9F%E5%88%9D%E5%A7%8B%E5%8C%96">å»¶è¿Ÿåˆå§‹åŒ–</a></li>
<li><a href="#%E6%96%B0%E6%97%A7-state-%E6%9C%89%E5%85%B3%E8%81%94">æ–°æ—§ state æœ‰å…³è”</a></li>
</ul>
</li>
<li><a href="#usecontext">useContext</a></li>
<li><a href="#usereducer">useReducer</a></li>
<li><a href="#useeffect">useEffect</a>
<ul>
<li><a href="#effect-%E7%90%86%E8%A7%A3">effect ç†è§£</a></li>
<li><a href="#effect-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8">effect åŸºæœ¬ä½¿ç”¨</a></li>
<li><a href="#%E7%BC%93%E5%AD%98%E4%B8%8A%E6%AC%A1%E5%80%BC">ç¼“å­˜ä¸Šæ¬¡å€¼</a></li>
<li><a href="#%E8%AE%BE%E7%BD%AE%E9%94%80%E6%AF%81%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%E4%BE%8B%E5%AD%90">è®¾ç½®é”€æ¯å›è°ƒå‡½æ•°ä¾‹å­</a></li>
<li><a href="#%E5%8F%91%E9%80%81%E5%BC%82%E6%AD%A5%E8%AF%B7%E6%B1%82">å‘é€å¼‚æ­¥è¯·æ±‚</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8-fetch-api">ä½¿ç”¨ fetch api</a></li>
</ul>
</li>
<li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89-hook">è‡ªå®šä¹‰ hook</a>
<ul>
<li><a href="#%E5%B8%A6%E6%9C%89%E8%87%AA%E5%A2%9E%E6%95%88%E6%9E%9C%E7%9A%84-state-hook">å¸¦æœ‰è‡ªå¢æ•ˆæœçš„ state hook</a></li>
<li><a href="#%E4%BB%8E-usehooks-%E6%94%B9%E9%80%A0-responsecomponent">ä» usehooks æ”¹é€  responseComponent</a></li>
<li><a href="#%E5%AE%9A%E6%97%B6%E5%99%A8-and-%E8%87%AA%E5%8A%A8%E9%94%80%E6%AF%81">å®šæ—¶å™¨ and è‡ªåŠ¨é”€æ¯</a></li>
</ul>
</li>
<li><a href="#%E7%BB%BC%E5%90%88%E4%BE%8B%E5%AD%90">ç»¼åˆä¾‹å­</a>
<ul>
<li><a href="#%E7%82%B9%E8%B5%9E%E6%8C%89%E9%92%AE">ç‚¹èµæŒ‰é’®</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6-and-%E5%87%BD%E6%95%B0%E4%BD%9C%E4%B8%BA%E5%AD%90%E7%BB%84%E4%BB%B6">é«˜é˜¶ç»„ä»¶ and å‡½æ•°ä½œä¸ºå­ç»„ä»¶</a></li>
<li><a href="#fragment">Fragment</a></li>
<li><a href="#strictmode">StrictMode</a></li>
<li><a href="#%E7%A4%BA%E4%BE%8B">ç¤ºä¾‹</a>
<ul>
<li><a href="#%E4%BD%BF%E7%94%A8-props">ä½¿ç”¨ props</a></li>
<li><a href="#%E9%81%8D%E5%8E%86%E5%AD%90%E5%85%83%E7%B4%A0">éå†å­å…ƒç´ </a></li>
<li><a href="#%E6%89%BE%E5%88%B0%E7%9C%9F%E5%AE%9E%E7%9A%84-domthisrefxxx">æ‰¾åˆ°çœŸå®çš„ dom(this.ref.xxx)</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8-statethisstate">ä½¿ç”¨ state(this.state)</a></li>
<li><a href="#%E4%B8%80%E4%B8%AA%E8%A1%A8%E5%8D%95%E7%A4%BA%E4%BE%8B">ä¸€ä¸ªè¡¨å•ç¤ºä¾‹</a></li>
<li><a href="#%E7%99%BB%E5%BD%95%E7%95%8C%E9%9D%A2">ç™»å½•ç•Œé¢</a></li>
<li><a href="#todo-list-app">todo list app</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E7%BB%84%E4%BB%B6%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</a>
<ul>
<li><a href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%BB%8B%E7%BB%8D">ç”Ÿå‘½å‘¨æœŸä»‹ç»</a></li>
<li><a href="#%E7%BB%84%E4%BB%B6%E8%A2%AB%E6%8C%82%E8%BD%BD">ç»„ä»¶è¢«æŒ‚è½½</a></li>
<li><a href="#%E7%BB%84%E4%BB%B6%E8%A2%AB%E5%8D%B8%E8%BD%BD">ç»„ä»¶è¢«å¸è½½</a></li>
<li><a href="#%E7%BB%84%E4%BB%B6%E8%A2%AB%E6%9B%B4%E6%96%B0">ç»„ä»¶è¢«æ›´æ–°</a></li>
<li><a href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0-demo">ç”Ÿå‘½å‘¨æœŸå‡½æ•° demo</a></li>
</ul>
</li>
<li><a href="#virtual-dom-%E5%92%8C-diff-%E7%AE%97%E6%B3%95">virtual dom å’Œ diff ç®—æ³•</a>
<ul>
<li><a href="#virtual-dom">virtual dom</a></li>
<li><a href="#key-%E5%B1%9E%E6%80%A7%E6%9C%89%E4%BB%80%E4%B9%88%E4%BD%9C%E7%94%A8">key å±æ€§æœ‰ä»€ä¹ˆä½œç”¨</a></li>
<li><a href="#%E8%AE%BE%E7%BD%AE%E7%BB%84%E4%BB%B6%E6%97%B6%E6%80%8E%E4%B9%88%E6%8F%90%E9%AB%98%E6%80%A7%E8%83%BD">è®¾ç½®ç»„ä»¶æ—¶æ€ä¹ˆæé«˜æ€§èƒ½</a></li>
</ul>
</li>
<li><a href="#context-api-%E4%BD%BF%E7%94%A8">context-api ä½¿ç”¨</a></li>
<li><a href="#state-%E7%8A%B6%E6%80%81">state çŠ¶æ€</a>
<ul>
<li><a href="#state-%E4%BB%8B%E7%BB%8D">state ä»‹ç»</a></li>
<li><a href="#state-%E5%92%8C%E7%BB%84%E4%BB%B6%E7%9A%84%E6%99%AE%E9%80%9A%E5%B1%9E%E6%80%A7%E5%8C%BA%E5%88%AB">state å’Œç»„ä»¶çš„æ™®é€šå±æ€§åŒºåˆ«</a></li>
<li><a href="#%E5%A6%82%E4%BD%95%E6%9B%B4%E6%96%B0-state">å¦‚ä½•æ›´æ–° state</a></li>
<li><a href="#setstate-%E6%98%AF%E4%B8%8D%E6%98%AF%E5%BC%82%E6%AD%A5%E7%9A%84">setState æ˜¯ä¸æ˜¯å¼‚æ­¥çš„</a></li>
<li><a href="#setstate-%E6%9B%B4%E6%96%B0%E6%98%AF%E4%B8%80%E4%B8%AA%E5%90%88%E5%B9%B6%E8%BF%87%E7%A8%8B">setState æ›´æ–°æ˜¯ä¸€ä¸ªåˆå¹¶è¿‡ç¨‹</a></li>
<li><a href="#replacestate-%E6%9B%B4%E6%96%B0%E6%98%AF%E4%B8%80%E4%B8%AA%E6%9B%BF%E6%8D%A2%E8%BF%87%E7%A8%8B">replaceState æ›´æ–°æ˜¯ä¸€ä¸ªæ›¿æ¢è¿‡ç¨‹</a></li>
</ul>
</li>
<li><a href="#props-%E5%B1%9E%E6%80%A7">props å±æ€§</a>
<ul>
<li><a href="#%E5%9C%A8-jsx-%E4%B8%AD%E9%81%8D%E5%8E%86-props">åœ¨ jsx ä¸­éå† props</a></li>
<li><a href="#proptypes-%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%9F%A5">PropTypes ç±»å‹æ£€æŸ¥</a></li>
<li><a href="#%E5%BC%95%E5%85%A5%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%9F%A5%E7%9A%84%E5%85%B6%E4%BB%96%E6%96%B9%E6%B3%95">å¼•å…¥ç±»å‹æ£€æŸ¥çš„å…¶ä»–æ–¹æ³•</a>
<ul>
<li><a href="#%E5%BC%95%E5%85%A5-typescript">å¼•å…¥ TypeScript</a></li>
<li><a href="#flow-%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%9F%A5">flow ç±»å‹æ£€æŸ¥</a></li>
</ul>
</li>
<li><a href="#%E8%AE%BE%E5%AE%9A-props-%E7%9A%84%E9%BB%98%E8%AE%A4%E5%80%BC">è®¾å®š props çš„é»˜è®¤å€¼</a></li>
<li><a href="#%E6%9C%89%E5%93%AA%E4%BA%9B%E5%B1%9E%E6%80%A7">æœ‰å“ªäº›å±æ€§</a></li>
</ul>
</li>
<li><a href="#refs">refs</a></li>
<li><a href="#%E5%90%88%E6%88%90%E4%BA%8B%E4%BB%B6">åˆæˆäº‹ä»¶</a></li>
<li><a href="#%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86">çŠ¶æ€ç®¡ç†</a>
<ul>
<li><a href="#flux-%E6%9E%B6%E6%9E%84%E7%9A%84%E6%80%9D%E6%83%B3">flux æ¶æ„çš„æ€æƒ³</a></li>
<li><a href="#flux-%E5%AE%98%E6%96%B9%E5%AE%9E%E7%8E%B0">Flux å®˜æ–¹å®ç°</a></li>
<li><a href="#redux">Redux</a>
<ul>
<li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8-redux">ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ redux</a></li>
<li><a href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5">åŸºæœ¬æ¦‚å¿µ</a></li>
<li><a href="#%E5%9F%BA%E6%9C%AC-api">åŸºæœ¬ api</a>
<ul>
<li><a href="#store">store</a></li>
<li><a href="#reducer">reducer</a></li>
<li><a href="#applymiddleware">applyMiddleware</a></li>
<li><a href="#bindactioncreators">bindActionCreators</a></li>
</ul>
</li>
<li><a href="#%E7%BA%AF-redux-%E7%9A%84-api-%E7%A4%BA%E4%BE%8B%E5%90%8C%E6%AD%A5%E7%89%88%E6%9C%AC%E7%9A%84-api">çº¯ redux çš„ api ç¤ºä¾‹(åŒæ­¥ç‰ˆæœ¬çš„ api)</a></li>
<li><a href="#react-redux">react-redux</a></li>
<li><a href="#%E5%BC%82%E6%AD%A5-action">å¼‚æ­¥ Action</a></li>
<li><a href="#thunk-saga">thunk, saga</a></li>
<li><a href="#%E8%B0%83%E8%AF%95%E5%B7%A5%E5%85%B7">è°ƒè¯•å·¥å…·</a></li>
<li><a href="#demo%E4%B8%80%E4%B8%AA-todo-app">demo(ä¸€ä¸ª todo-app)</a></li>
</ul>
</li>
<li><a href="#redux-%E5%92%8C-flux-%E7%9A%84%E4%B8%80%E4%BA%9B%E5%B7%AE%E5%BC%82">Redux å’Œ Flux çš„ä¸€äº›å·®å¼‚</a></li>
<li><a href="#immutablejs">ImmutableJS</a></li>
</ul>
</li>
<li><a href="#%E8%B7%AF%E7%94%B1-react-router">è·¯ç”± react-router</a>
<ul>
<li><a href="#%E8%B7%AF%E7%94%B1%E6%A0%87%E7%AD%BE%E7%9A%84%E4%BD%BF%E7%94%A8">è·¯ç”±æ ‡ç­¾çš„ä½¿ç”¨</a>
<ul>
<li><a href="#router-%E8%B7%AF%E7%94%B1%E5%AE%B9%E5%99%A8">Router-è·¯ç”±å®¹å™¨</a></li>
<li><a href="#route-%E8%B7%AF%E7%94%B1%E7%BB%84%E4%BB%B6%E6%98%A0%E5%B0%84">Route-è·¯ç”±ç»„ä»¶æ˜ å°„</a>
<ul>
<li><a href="#%E5%B1%9E%E6%80%A7">å±æ€§</a></li>
<li><a href="#%E9%80%9A%E8%BF%87-url-%E4%BC%A0%E9%80%92%E5%8F%82%E6%95%B0%E7%BB%99-route">é€šè¿‡ url ä¼ é€’å‚æ•°ç»™ Route</a></li>
<li><a href="#%E5%B5%8C%E5%A5%97%E8%B7%AF%E7%94%B1">åµŒå¥—è·¯ç”±</a></li>
<li><a href="#route-%E4%B8%89%E7%A7%8D%E6%B8%B2%E6%9F%93%E6%96%B9%E5%BC%8F">Route ä¸‰ç§æ¸²æŸ“æ–¹å¼</a></li>
</ul>
</li>
<li><a href="#switch-%E8%A7%A3%E5%86%B3%E5%A4%9A%E5%8C%B9%E9%85%8D%E9%97%AE%E9%A2%98">Switch-è§£å†³å¤šåŒ¹é…é—®é¢˜</a></li>
<li><a href="#redirect-%E9%87%8D%E5%AE%9A%E5%90%91%E5%BD%93%E5%89%8D%E9%A1%B5%E9%9D%A2">Redirect-é‡å®šå‘å½“å‰é¡µé¢</a></li>
<li><a href="#link-%E8%B6%85%E9%93%BE%E6%8E%A5">Link-è¶…é“¾æ¥</a></li>
<li><a href="#navlink-%E5%B8%A6%E6%A0%B7%E5%BC%8F%E7%9A%84-link">NavLink: å¸¦æ ·å¼çš„ Link</a></li>
<li><a href="#prompt-%E6%8F%90%E7%A4%BA">Prompt-æç¤º</a></li>
</ul>
</li>
<li><a href="#history">history</a></li>
<li><a href="#location">location</a></li>
<li><a href="#match">match</a></li>
</ul>
</li>
<li><a href="#%E8%B0%83%E8%AF%95%E5%92%8C%E6%B5%8B%E8%AF%95">è°ƒè¯•å’Œæµ‹è¯•</a></li>
<li><a href="#graphql-%E5%92%8C-relay">GraphQL å’Œ Relay</a></li>
<li><a href="#css-module-%E6%A8%A1%E5%9D%97%E5%8C%96">CSS-Module æ¨¡å—åŒ–</a></li>
<li><a href="#css-in-js">css-in-js</a></li>
<li><a href="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5-best-practice">æœ€ä½³å®è·µ best practice</a></li>
<li><a href="#%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%B8%B2%E6%9F%93">æœåŠ¡ç«¯æ¸²æŸ“</a>
<ul>
<li><a href="#%E4%BB%80%E4%B9%88%E6%98%AF-ssr">ä»€ä¹ˆæ˜¯ ssr</a></li>
<li><a href="#ssr-%E7%9A%84%E5%A5%BD%E5%A4%84">ssr çš„å¥½å¤„</a></li>
<li><a href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">è§£å†³æ–¹æ¡ˆ</a>
<ul>
<li><a href="#%E9%85%8D%E5%90%88-koa2-%E5%AE%9E%E7%8E%B0-ssr">é…åˆ koa2 å®ç° ssr</a></li>
<li><a href="#egg-%E5%AE%9E%E7%8E%B0-ssr">egg å®ç° ssr</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96">æ€§èƒ½ä¼˜åŒ–</a>
<ul>
<li><a href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98%E5%9C%BA%E6%99%AF">å¸¸è§çš„æ€§èƒ½é—®é¢˜åœºæ™¯</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E5%B7%A5%E5%85%B7%E5%AE%9A%E4%BD%8D%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98">ä½¿ç”¨å·¥å…·å®šä½æ€§èƒ½é—®é¢˜</a></li>
<li><a href="#%E7%BD%91%E7%BB%9C%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96-%E8%87%AA%E5%8A%A8%E6%8C%89%E9%9C%80%E5%8A%A0%E8%BD%BD">ç½‘ç»œæ€§èƒ½ä¼˜åŒ–-è‡ªåŠ¨æŒ‰éœ€åŠ è½½</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8-reselect-%E9%81%BF%E5%85%8D%E9%87%8D%E5%A4%8D%E8%AE%A1%E7%AE%97">ä½¿ç”¨ Reselect é¿å…é‡å¤è®¡ç®—</a></li>
</ul>
</li>
<li><a href="#react-%E5%8A%A8%E7%94%BB">react åŠ¨ç”»</a></li>
<li><a href="#react-native">react native</a></li>
<li><a href="#%E5%BC%80%E5%8F%91%E5%B0%8F%E7%A8%8B%E5%BA%8F">å¼€å‘å°ç¨‹åº</a></li>
<li><a href="#%E5%B0%8F%E9%A1%B9%E7%9B%AE">å°é¡¹ç›®</a>
<ul>
<li><a href="#%E5%AE%9E%E7%8E%B0-route">å®ç° route</a></li>
<li><a href="#%E8%A1%A8%E5%8D%95%E8%AE%BE%E8%AE%A1%E5%99%A8">è¡¨å•è®¾è®¡å™¨</a></li>
<li><a href="#cms-%E7%B3%BB%E7%BB%9F">cms ç³»ç»Ÿ</a></li>
</ul>
</li>
<li><a href="#%E9%83%A8%E7%BD%B2%E5%88%B0-github-%E4%B8%8A">éƒ¨ç½²åˆ° github ä¸Š</a></li>
<li><a href="#%E5%92%8C-springboot-%E6%89%93%E5%8C%85%E5%8D%95%E4%BD%93%E5%BA%94%E7%94%A8">å’Œ springboot æ‰“åŒ…å•ä½“åº”ç”¨</a></li>
<li><a href="#%E5%92%8C-typescript-%E4%B8%80%E8%B5%B7%E4%BD%BF%E7%94%A8">å’Œ typescript ä¸€èµ·ä½¿ç”¨</a>
<ul>
<li><a href="#%E9%9B%86%E6%88%90-ts-%E7%8E%AF%E5%A2%83">é›†æˆ ts ç¯å¢ƒ</a></li>
<li><a href="#ts-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8">ts åŸºæœ¬ä½¿ç”¨</a>
<ul>
<li><a href="#%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">åŸºæœ¬æ•°æ®ç±»å‹</a></li>
<li><a href="#interface">interface</a>
<ul>
<li><a href="#%E4%BD%BF%E7%94%A8-interface-%E5%AE%9A%E4%B9%89%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B">ä½¿ç”¨ interface å®šä¹‰å¯¹è±¡ç±»å‹</a></li>
<li><a href="#interface-%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0%E7%B1%BB%E5%9E%8B">interface å®šä¹‰å‡½æ•°ç±»å‹</a></li>
<li><a href="#interface-%E5%AE%9A%E4%B9%89%E5%8F%AF%E7%B4%A2%E5%BC%95%E7%B1%BB%E5%9E%8B">interface å®šä¹‰å¯ç´¢å¼•ç±»å‹</a></li>
<li><a href="#interface-%E5%AE%9A%E4%B9%89-class-%E7%B1%BB">interface å®šä¹‰ class ç±»</a></li>
<li><a href="#interface-%E7%BB%A7%E6%89%BF">interface ç»§æ‰¿</a></li>
</ul>
</li>
<li><a href="#interface-%E5%92%8C-type-%E5%8C%BA%E5%88%AB">interface å’Œ type åŒºåˆ«</a></li>
<li><a href="#class-%E4%BD%BF%E7%94%A8">class ä½¿ç”¨</a></li>
<li><a href="#%E6%B3%9B%E5%9E%8B%E4%BD%BF%E7%94%A8">æ³›å‹ä½¿ç”¨</a></li>
<li><a href="#%E4%BA%A4%E5%8F%89%E7%B1%BB%E5%9E%8B">äº¤å‰ç±»å‹</a></li>
<li><a href="#%E8%81%94%E5%90%88%E7%B1%BB%E5%9E%8B">è”åˆç±»å‹</a></li>
<li><a href="#%E7%B1%BB%E5%9E%8B%E4%BF%9D%E6%8A%A4">ç±»å‹ä¿æŠ¤</a></li>
<li><a href="#%E7%B1%BB%E5%9E%8B%E5%88%AB%E5%90%8D">ç±»å‹åˆ«å</a></li>
<li><a href="#%E7%A9%BA%E7%B1%BB%E5%9E%8B">ç©ºç±»å‹</a></li>
</ul>
</li>
<li><a href="#%E4%B8%BA%E6%A0%B7%E5%BC%8F%E6%96%87%E4%BB%B6%E7%BC%96%E5%86%99-types">ä¸ºæ ·å¼æ–‡ä»¶ç¼–å†™ types</a></li>
<li><a href="#%E9%85%8D%E7%BD%AE-css-%E8%B7%B3%E8%BD%AC">é…ç½® css è·³è½¬</a></li>
</ul>
</li>
</ul>
<!-- /TOC -->
<h1><a class="header" href="#é¢è¯•é¢˜" id="é¢è¯•é¢˜">é¢è¯•é¢˜</a></h1>
<pre><code>
- Reactè§£å†³äº†ä»€ä¹ˆé—®é¢˜ - å‡å°‘äº†é¡µé¢æ¸²æŸ“èŒƒå›´, ç¼“è§£æµè§ˆå™¨ç»˜åˆ¶å‹åŠ›
- ç»„ä»¶çš„Renderå‡½æ•°åœ¨ä½•æ—¶è¢«è°ƒç”¨ï¼Ÿ -  state å‘ç”Ÿæ”¹å˜çš„æ—¶å€™
  - è°ƒç”¨æ—¶DOMå°±ä¸€å®šä¼šè¢«æ›´æ–°å—, -  ä¸ä¸€å®š, ä¼šå¯¹æ¯”æ›´æ–°åçš„ virtual dom å’Œ real dom , æ‰¾å‡ºéœ€è¦æ›´æ–°çš„æœ€å°æ­¥éª¤ï¼Œæ­¤æ—¶Real DOMæ‰å¯èƒ½å‘ç”Ÿä¿®æ”¹ã€‚
- ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›ï¼Ÿ

    ç»„ä»¶çš„åˆå§‹åŒ–é˜¶æ®µçš„å£°æ˜å‘¨æœŸå‡½æ•°ä»¥åŠé‡ç‚¹ç”¨æ³•å¦‚ä¸‹ï¼š

    constructor(): ç”¨äºç»‘å®šäº‹ä»¶ä»¥åŠåˆå§‹åŒ–stateï¼ˆå¯ä»¥é€šè¿‡&quot;fork&quot;propsçš„æ–¹å¼ç»™stateèµ‹å€¼ï¼‰
    componentWillMount(): åªä¼šåœ¨æœåŠ¡ç«¯æ¸²æŸ“æ—¶è¢«è°ƒç”¨ï¼Œä½ å¯ä»¥åœ¨è¿™é‡ŒåŒæ­¥æ“ä½œstate
    render(): è¿™ä¸ªå‡½æ•°æ˜¯ç”¨æ¥æ¸²æŸ“DOMæ²¡æœ‰é”™ã€‚ä½†å®ƒåªèƒ½ç”¨æ¥æ¸²æŸ“DOMï¼Œè¯·ä¿è¯å®ƒçš„çº¯ç²¹æ€§ã€‚å¦‚æœæœ‰æ“ä½œDOMæˆ–è€…å’Œæµè§ˆå™¨æ‰“äº¤é“çš„ä¸€ç³»åˆ—æ“ä½œï¼Œè¯·åœ¨ä¸‹ä¸€æ­¥éª¤componentDidMountä¸­è¿›è¡Œ
    componentDidMount(): å¦‚æœä½ æœ‰ç¬¬ä¸‰æ–¹æ“ä½œDOMçš„ç±»åº“éœ€è¦åˆå§‹åŒ–ï¼ˆç±»ä¼¼äºjQueryï¼ŒBootstrapçš„ä¸€äº›ç»„ä»¶ï¼‰æ“ä½œDOMã€æˆ–è€…è¯·æ±‚å¼‚æ­¥æ•°æ®ï¼Œéƒ½åº”è¯¥æ”¾åœ¨è¿™ä¸ªæ­¥éª¤ä¸­åš

    ç»„ä»¶æ›´æ–°é˜¶æ®µï¼š

    componentWillReceiveProps(nextProps): åœ¨è¿™é‡Œä½ å¯ä»¥æ‹¿åˆ°å³å°†æ”¹å˜çš„çŠ¶æ€ï¼Œå¯ä»¥åœ¨è¿™ä¸€æ­¥ä¸­é€šè¿‡setStateæ–¹æ³•è®¾ç½®state
    shouldComponentUpdate(nextProps, nextState): è¿™ä¸€æ­¥éª¤éå¸¸é‡è¦ï¼Œå®ƒçš„è¿”å›å€¼å†³å®šäº†æ¥ä¸‹æ¥çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°æ˜¯å¦ä¼šè¢«è°ƒç”¨ï¼Œé»˜è®¤è¿”å›trueï¼Œå³éƒ½ä¼šè¢«è°ƒç”¨ï¼›ä½ ä¹Ÿå¯ä»¥é‡å†™è¿™ä¸ªå‡½æ•°ä½¿å®ƒè¿”å›falseã€‚
    componentWillUpdate(): æˆ‘ä¹Ÿä¸çŸ¥é“è¿™ä¸ªå£°æ˜å‘¨æœŸå‡½æ•°çš„æ„ä¹‰åœ¨å“ªé‡Œï¼Œåœ¨è¿™ä¸ªå‡½æ•°å†…ä½ ä¸èƒ½è°ƒç”¨setStateæ”¹å˜ç»„ä»¶çŠ¶æ€
    render()
    componentDidUpdate(): å’ŒcomponentDidMountç±»ä¼¼ï¼Œåœ¨è¿™é‡Œæ‰§è¡ŒDOMæ“ä½œä»¥åŠå‘èµ·ç½‘ç»œè¯·æ±‚
    
    ç»„ä»¶ææ„é˜¶æ®µï¼š

    componentWillUnmount(): ä¸»è¦ç”¨äºæ‰§è¡Œä¸€äº›æ¸…ç†å·¥ä½œï¼Œæ¯”å¦‚å–æ¶ˆç½‘ç»œè¯·æ±‚ï¼Œæ¸…æ¥šå¤šä½™çš„DOMå…ƒç´ ç­‰



  - å½“æŸäº›ç¬¬ä¸‰æ–¹ç±»åº“æƒ³å¯¹DOMåˆå§‹åŒ–ï¼Œæˆ–è€…è¿›è¡Œè¿œç¨‹æ•°æ®åŠ è½½æ—¶ï¼Œåº”è¯¥åœ¨å“ªä¸ªå‘¨æœŸä¸­å®Œæˆ
  - åœ¨å“ªäº›å£°æ˜å‘¨æœŸä¸­å¯ä»¥ä¿®æ”¹ç»„ä»¶çš„stateï¼Ÿ
- ä¸åŒçˆ¶èŠ‚ç‚¹çš„ç»„ä»¶éœ€è¦å¯¹å½¼æ­¤çš„çŠ¶æ€è¿›è¡Œæ”¹å˜æ—¶åº”è¯¥å®ç°ï¼Ÿ
  - å¦‚ä½•è®¾è®¡å‡ºä¸€ä¸ªå¥½çš„Fluxæ¶æ„
  - å¦‚ä½•è®¾è®¡å‡ºä¸€ä¸ªå¥½çš„Reactç»„ä»¶
- å¦‚ä½•è¿›è¡Œä¼˜åŒ–ï¼Ÿ
  - ç»„ä»¶ä¸­çš„keyå±æ€§æœ‰ä»€ä¹ˆç”¨ï¼Ÿ
- Component ä¸ Element ä¸ Instance çš„åŒºåˆ«
- Webpackå¦‚ä½•æ‰“åŒ…è¾“å‡ºå¤šä¸ªæ–‡ä»¶ï¼Ÿ
  - webpackæ‰“åŒ…æ—¶å¦‚ä½•å·¥ä½œçš„ï¼Ÿ
  - å¦‚ä½•è§£å†³å¾ªç¯å¼•ç”¨çš„é—®é¢˜
  - åœ¨ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦æ‰“åŒ…è¾“å‡ºå¤šä¸ªæ–‡ä»¶ï¼Ÿ
  - loaderå’Œpluginçš„å·®åˆ«
  - ä½ è§‰å¾—ä½¿ç”¨è¿‡ä»€ä¹ˆé«˜çº§æŠ€å·§å—ï¼Ÿ
- (å¼€æ”¾é—®é¢˜ï¼‰Reactçš„ç”Ÿæ€ä½ ä½¿ç”¨è¿‡å“ªäº›ç±»åº“

</code></pre>
<h1><a class="header" href="#why-react" id="why-react">why react</a></h1>
<p>ReactJS: ui å±•ç¤ºæ¡†æ¶, åªè´Ÿè´£ view æ¸²æŸ“çš„éƒ¨åˆ†, åŒ…æ‹¬ npm åº“ <code>react</code>(æ ¸å¿ƒ), <code>react-dom</code>(ä¸“é—¨å¤„ç† dom)</p>
<p>reactjs æ¥è‡ª facebook, èµ·åˆè¢«åˆ›é€ æ˜¯ä¸ºäº†è§£å†³ä¸€ä¸ªé—®é¢˜: é¡µé¢ä¸Šçš„ä¸€ä¸ªå›¾æ ‡éœ€è¦å®æ—¶æ˜¾ç¤ºä¸€ä¸ªæ•°å­—, è¡¨ç¤ºæœ‰å¤šå°‘æ¶ˆæ¯æœªè¯», ä½†æ˜¯å§‹ç»ˆåšä¸åˆ°å®æ—¶å˜åŒ–. äº§ç”Ÿçš„åŸå› æ˜¯,</p>
<ul>
<li>
<p>ä¼ ç»Ÿçš„ dom api éœ€è¦æ“ä½œå¤ªå¤šç»†èŠ‚ (æ¯”å¦‚å…¸å‹çš„ jQuery, api å·¨å¤šæ— æ¯”). react å®ç°äº†æ•´ä½“åˆ·æ–°, ui æ¸²æŸ“å’Œæ•°æ®ç»‘å®š, ui éšæ•°æ®å®æ—¶å˜åŒ–</p>
</li>
<li>
<p>è¿˜æœ‰ä¸€ä¸ªåŸå› , ä¼ ç»Ÿçš„ app çš„çŠ¶æ€åˆ†æ•£ä¸åŒçš„åœ°æ–¹</p>
</li>
</ul>
<p>so why react?</p>
<ul>
<li>ä¼ ç»Ÿå¼€å‘æ¨¡å¼å¦‚ jQuery ç›´æ¥æ“ä½œ dom æ ‘, æ€§èƒ½æ¶ˆè€—å¤§, react ä½¿ç”¨ virtual dom å–è€Œä»£ä¹‹</li>
<li>ä¼ ç»Ÿå¼€å‘ç›´æ¥æ“çºµ dom, éœ€è¦å…³æ³¨å¤ªå¤š api ç»†èŠ‚ (çœ‹çœ‹ jQuery æœ‰å¤šå°‘ api å°±çŸ¥é“äº†), react å®ç°äº† ui æ¸²æŸ“ å’Œ æ•°æ®ç»‘å®š, ä¸ç”¨æ‰‹åŠ¨æ“ä½œæ¸²æŸ“</li>
<li>ä¼ ç»Ÿå¼€å‘ ä»£ç éš¾ä»¥å¤ç”¨, react æä¾›ç»„ä»¶åŒ–çš„å¼€å‘æ–¹å¼</li>
</ul>
<p>å‰ç«¯å·¥ç¨‹ and æ¨¡å—åŒ– -&gt; js-proj-history.md</p>
<h1><a class="header" href="#jsx" id="jsx">jsx</a></h1>
<h2><a class="header" href="#åŸºæœ¬è¯­æ³•" id="åŸºæœ¬è¯­æ³•">åŸºæœ¬è¯­æ³•</a></h2>
<p>JSX: è¯­æ³•ç³–, ç±»ä¼¼ xml, ä½†æ˜¯è¿›è¡Œäº†æ‹“å±•, åŠ å…¥ js è¯­æ³•, å°† HTML ç›´æ¥åµŒå…¥äº† JS ä»£ç é‡Œé¢, æœ€ç»ˆéœ€è¦â€œç¼–è¯‘â€è¾“å‡º JS ä»£ç æ‰èƒ½ä½¿ç”¨;</p>
<p>ä½¿ç”¨ React å¹¶éå¿…é¡»ä½¿ç”¨ JSX, JSX åªæ˜¯ä¸€ç§ç›´è§‚çš„åˆ›å»º React nodes çš„æ–¹æ³•ï¼Œå®ƒæ˜¯å¯¹ <code>React.createElement()</code>æ–¹æ³•çš„å°è£…</p>
<p>é€šè¿‡ Babelï¼ŒJSX è¯­å¥ä¹Ÿå¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œ</p>
<p>çœ‹çœ‹ demo------- <a href="https://github.com/xiaoyureed/react-note/blob/master/demo/demo.js">ğŸšª</a></p>
<pre><code class="language-js">// è¯­ä¹‰åŒ–ä¸”æ˜“æ‡‚çš„æ ‡ç­¾
if(this.state.liked) {
  return (&lt;BlueLike /&gt;);
} else {
  return (&lt;GrayLike /&gt;);
}

// jsx å¦‚ä½•è½¬åŒ–ä¸º js:
React.createElement(
  string/ReactClass, // è¡¨ç¤º HTML å…ƒç´ æˆ–æ˜¯ React Component
  [object props], // å±æ€§å€¼ object
  [children] // æ¥ä¸‹æ¥å‚æ•°çš†ä¸ºå…ƒç´ å­å…ƒç´ 
)


// ä½¿ç”¨æ ‡ç­¾çš„å†™æ³•, ä»£ç æ›´åŠ ç®€æ´
&lt;a href=&quot;https://facebook.github.io/react/&quot;&gt;Hello!&lt;/a&gt;/* å¯ä»¥ç›´æ¥åœ¨jsxä¸­ä½¿ç”¨ */
// React.createElement(ç»„ä»¶/HTMLæ ‡ç­¾, ç»„ä»¶å±æ€§, å­å…ƒç´ )
React.createElement('a', {href: 'https://facebook.github.io/react/'}, 'Hello!')



// ç»“åˆjså†™æ³•

// è§£ææ—¶å€™, &quot;{&quot; å¼€å§‹, è¿›å…¥js, &quot;&lt;&quot; å¼€å§‹, è¿›å…¥html
var text = 'Hello React';
// jsx æœ¬èº«ä¹Ÿæ˜¯è¡¨è¾¾å¼
const element = &lt;h1&gt;{text}&lt;/h1&gt;;
// ä¼šæ›¿æ¢ä¸º:
var text = 'Hello React';
React.createElement(&quot;h1&quot;, null, text);

// åœ¨ html æ ‡ç­¾å±æ€§ ä¸­ä½¿ç”¨ jsx
&lt;h1 foo={1 + 2} /&gt;


// ä½¿ç”¨æ•°ç»„
/* jsxä¸­ä½¿ç”¨js, jsxä¸­ä½¿ç”¨æ•°ç»„, &lt;!-- æœ€å¥½æœ‰ä½¿ç”¨index, ä¸ç„¶ä¼šæŠ¥è­¦å‘Š, å®é™…ä¸Šæ˜¯å› ä¸ºæœ‰æŸæ€§èƒ½ --&gt; */
var names = ['aaa', 'bbb', 'ccc'];
ReactDOM.render(
    &lt;div&gt;
        {
            names.map(function (name, index) {
                return &lt;div key={index}&gt;hello, {name}&lt;/div&gt;
            })
        }
    &lt;/div&gt;
    ,
    document.getElementById(&quot;array&quot;)
);

// -------------------------------------------

// /* è¿™é‡Œä¼šå°†æ•°ç»„æ•°æ®è¿èµ·æ¥, è¿™é‡Œæ²¡æœ‰index, ä¼šè­¦å‘Š, ä¸è¿‡ä¸å½±å“è¿è¡Œ */
var namesHtml = [&lt;h1&gt;h1...&lt;/h1&gt;, &lt;h2&gt;h2...&lt;/h2&gt;];
ReactDOM.render(
    &lt;div&gt;
        {namesHtml}
    &lt;/div&gt;,
    document.getElementById(&quot;htmlArray&quot;)
);


// ----------------------

jsx ä¸­çš„å…³é”®å­—å˜åŒ–

class å’Œ for ç”±äºä¸º JavaScript ä¿ç•™å…³é”®å­—ç”¨æ³•ï¼Œå› æ­¤åœ¨ JSX ä¸­ä½¿ç”¨ className å’Œ htmlFor æ›¿ä»£

Boolean å±æ€§: åœ¨ JSX ä¸­é¢„è®¾åªæœ‰å±æ€§åç§°ä½†æ²¡æœ‰(æ— éœ€)è®¾å€¼ä¸º true

// ---------------------

è‡ªå®šä¹‰å±æ€§ data-xxx
&lt;HelloMessage data-attr=&quot;xd&quot; /&gt;

//--------------

ä½¿ç”¨ &quot;...&quot;éå† props å±æ€§

var props = {
    style: &quot;width:20px&quot;,// æŠ¥é”™, å­˜ç–‘; å¯èƒ½styleéœ€è¦å•ç‹¬ä¸€ä¸ªå¯¹è±¡, æˆ–è€… &lt;HelloMessage style={{ color: '#FFFFFF', fontSize: '30px'}} /&gt;
    className: &quot;main&quot;,
    value: &quot;yo&quot;,  // ä¼šè¢«æ›¿æ¢
}

&lt;HelloMessage  {...props} value=&quot;yo&quot; /&gt;

// ç­‰äºä»¥ä¸‹
React.createElement(&quot;h1&quot;, React._spread({}, props, {value: &quot;yo&quot;}), &quot;Hello React!&quot;);

// ==========================


ç›´æ¥æ˜¾ç¤ºåŸå§‹ HTML
&lt;div&gt;{{ _html: &quot;&lt;h1&gt;Hello World!!&lt;/h1&gt;&quot; }}&lt;/div&gt;


//================

Inline Style
// åœ¨ React Component ä¸­ CSS ä½¿ç”¨ Inline Style å†™æ³•ï¼Œå…¨éƒ½å°è£…åœ¨ JavaScript å½“ä¸­
const divStyle = {
    color: &quot;red&quot;,
    backgroundImage: &quot;url(&quot; + imgUrl + &quot;)&quot;
};

ReactDOM.render(
    &lt;div style={divStyle}&gt;Hello World!&lt;/div&gt;,
    document.getElementById(&quot;app&quot;)
);


</code></pre>
<h2><a class="header" href="#ä½¿ç”¨-jsx-éœ€è¦çš„ç¯å¢ƒé…ç½®" id="ä½¿ç”¨-jsx-éœ€è¦çš„ç¯å¢ƒé…ç½®">ä½¿ç”¨ jsx éœ€è¦çš„ç¯å¢ƒé…ç½®</a></h2>
<p>jsx è¢«æµè§ˆå™¨è¯†åˆ«éœ€è¦å…ˆç¼–è¯‘, è¿™é‡Œæœ‰ 2 ä¸ªæ–¹æ³•:</p>
<p>ä¸€ç§æ˜¯ä½¿ç”¨ browserify æˆ– webpack ç­‰ CommonJS bundler å¹¶æ•´åˆ babel é¢„å¤„ç†, äºæµè§ˆå™¨ç«¯åšè§£æ, ç›¸è¾ƒäº server ç«¯è§£æè€—è´¹æ—¶é—´, ä½†æ˜¯é€‚åˆæ•´åˆè€é¡¹ç›®</p>
<pre><code class="language-html">&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/react/15.0.1/react.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/react/15.0.1/react-dom.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js&quot;&gt;&lt;/script&gt;
&lt;!-- babel.jsä¸browser.jsçš„å…³ç³»: babelçš„æµè§ˆå™¨ç‰ˆæœ¬ä¸ºbrowser.js --&gt;
</code></pre>
<p>ç¬¬äºŒç§æ˜¯ç»“åˆ webpack, babel é¢„å…ˆç¼–è¯‘å†éƒ¨ç½², ä½¿ç”¨ babel.js, <code>babel src --out-dir build</code></p>
<p>==================== ä½¿ç”¨ç¬¬ä¸€ç§æ–¹æ³•ä½¿ç”¨ jsx, å¦‚ä½•å¼•å…¥ jsx</p>
<p>ç›´æ¥å†…åµŒ</p>
<pre><code class="language-js">/* text/babelè¡¨ç¤ºä¸ºjsxè¯­æ³•ï¼Œ å’Œjsä¸å…¼å®¹ */
&lt;script type=&quot;text/babel&quot;&gt;
    ReactDOM.render(
    &lt;h1&gt;Hello, world!&lt;/h1&gt;, document.getElementById('example') );
&lt;/script&gt;
</code></pre>
<p>ä»å¤–éƒ¨å¼•å…¥</p>
<pre><code class="language-js">&lt;script type=&quot;text/jsx&quot; src=&quot;main.jsx&quot; /&gt;
</code></pre>
<h1><a class="header" href="#å¼€å‘ç¯å¢ƒæ­å»º" id="å¼€å‘ç¯å¢ƒæ­å»º">å¼€å‘ç¯å¢ƒæ­å»º</a></h1>
<h2><a class="header" href="#è€é¡¹ç›®æ¥å…¥" id="è€é¡¹ç›®æ¥å…¥">è€é¡¹ç›®æ¥å…¥</a></h2>
<p>CDN-based(ç›´æ¥å¼•å…¥ script çš„æ–¹å¼, é€‚åˆè€é¡¹ç›®, è§ä¸‹èŠ‚ demo)ã€ webpack(<a href="https://github.com/carlleton/reactjs101/blob/zh-CN/Ch02/webpack-dev-enviroment.md">ref</a>), TypeScript çš„å¼€å‘æ–¹å¼, browserify æ­é… Gulp çš„æ–¹æ³•(<a href="https://github.com/carlleton/reactjs101/blob/zh-CN/Ch02/browserify-gulp-dev-enviroment.md">ref</a>)</p>
<h2><a class="header" href="#create-react-app-ä½¿ç”¨" id="create-react-app-ä½¿ç”¨">create-react-app ä½¿ç”¨</a></h2>
<p>ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ create-react-app å®˜æ–¹è„šæ‰‹æ¶</p>
<pre><code class="language-sh"># å…¨å±€å®‰è£…
npm i -g create-react-app
# åˆ›å»ºä¸€ä¸ªapp
create-react-app demo-app

# ä¹Ÿå¯ä»¥ä¸€æ­¥åˆ°ä½
npx create-react-app demo-app

</code></pre>
<p>å¯ä»¥é…åˆ vscode çš„ chrome debugger æ’ä»¶:</p>
<p>éœ€è¦ä¿®æ”¹ url ä¸ºè‡ªå·±çš„ï¼Œreact å·¥ç¨‹é»˜è®¤æ˜¯http://localhost:3000</p>
<p><img src="1.gif" alt="alt" /></p>
<p>æ¨èå…ˆ <code>npm start</code> å¯åŠ¨ app, ç„¶å F5 å¯åŠ¨è°ƒè¯•æœåŠ¡å™¨, æ­¤æ—¶ä¼šæ–°å¼€ä¸€ä¸ª chrome, è®¿é—®é…ç½®çš„ url</p>
<h2><a class="header" href="#vscode-ç¯å¢ƒ" id="vscode-ç¯å¢ƒ">vscode ç¯å¢ƒ</a></h2>
<p>eslint, prettier æ’ä»¶, å’Œå¯¹åº”çš„ module</p>
<p>ç”Ÿæˆ .eslintrc.js æ—¶å€™ï¼ˆeslint â€”initï¼‰çš„ç¬¬ä¸€æ­¥é€‰æ‹©ï¼Œå³&quot;How would you like to use ESlint&quot;ï¼Œä¸è¦é€‰æ‹©&quot;enforce code style&quot;ï¼Œå› ä¸ºæˆ‘ä»¬è¦äº¤ç»™ Prettier å»è´Ÿè´£æ ¼å¼åŒ–ä»£ç ï¼Œå¦åˆ™ä¼šæœ‰å†²çª</p>
<p>ä½†å¦‚æœæˆ‘ä»¬é€‰æ‹©äº†&quot;enforce code style&quot;ï¼Œé‚£ä¹ˆä¼šå¤šå‡ºä¸€æ­¥&quot;Which style guide do you want to follow? (Use arrow keys)&quot;è®©ä½ é€‰ï¼Œæ­¤æ—¶å¯ä»¥é€‰æ‹©ä¸‰ç§ä»£ç é£æ ¼ï¼šå³ Airbnbã€Standardã€Googleã€‚</p>
<p><a href="https://blog.csdn.net/lishuan182/article/details/89575678">vscode å…³é—­ eslint</a></p>
<p><a href="https://segmentfault.com/a/1190000020379876">eslint + airbnb è§„èŒƒ</a></p>
<p><a href="https://thomlom.dev/setup-eslint-prettier-react/">eslint + prettier é…åˆä½¿ç”¨, å†²çªè§£å†³, ä½¿ç”¨ git hooks åœ¨æ¯æ¬¡æäº¤ commit æ—¶ (pre-commit)æ ¼å¼åŒ–</a></p>
<h2><a class="header" href="#webpack-ç¯å¢ƒæ­å»º" id="webpack-ç¯å¢ƒæ­å»º">webpack ç¯å¢ƒæ­å»º</a></h2>
<pre><code class="language-sh">yarn add webpack webpack-cli webpack-dev-server
touch webpack.config.js


</code></pre>
<pre><code class="language-json">&quot;scripts&quot;: {
        &quot;dev&quot;: &quot;webpack-dev-server --mode development&quot;,
        &quot;build&quot;: &quot;webpack --mode production&quot;,
 },
# yarn dev å»å¯åŠ¨æœ¬åœ°server
# yarn build å»ç”Ÿæˆç”Ÿäº§ä»£ç 



</code></pre>
<p>https://juejin.im/post/5d7a7e7e518825345a05c518</p>
<p>https://juejin.im/post/5cfb8c0051882541b24c3ed3 //todo</p>
<h1><a class="header" href="#ç»„ä»¶åŒ–" id="ç»„ä»¶åŒ–">ç»„ä»¶åŒ–</a></h1>
<h2><a class="header" href="#ç¤¾åŒºå¼€æºç»„ä»¶" id="ç¤¾åŒºå¼€æºç»„ä»¶">ç¤¾åŒºå¼€æºç»„ä»¶</a></h2>
<ul>
<li>react-hook-form è¡¨å• - https://github.com/react-hook-form/react-hook-form</li>
<li>react-beautiful-dnd æ‹–æ‹½</li>
<li>https://github.com/vercel/swr è¿œç¨‹æ•°æ®è·å– remote data fetching</li>
</ul>
<h2><a class="header" href="#web-components" id="web-components">Web Components</a></h2>
<p>http://www.ruanyifeng.com/blog/2019/08/web_components.html</p>
<p>TODO</p>
<h2><a class="header" href="#ç»„ä»¶è®¾è®¡åŸåˆ™" id="ç»„ä»¶è®¾è®¡åŸåˆ™">ç»„ä»¶è®¾è®¡åŸåˆ™</a></h2>
<p>props (å¤–éƒ¨ä¼ å…¥) + state (å†…éƒ¨ç»´æŠ¤) = View</p>
<p>Ract ç»„ä»¶ä¸€èˆ¬ä¸æä¾›æ–¹æ³•, ä¸åŒçš„ props å’Œ state ä¼šäº§ç”Ÿ ä¸åŒçš„ view, ç›¸å½“äºä¸€ä¸ª pure function.</p>
<p>åˆ›ä¸€ä¸ªç»„ä»¶è€ƒè™‘ä¸‰ç‚¹:</p>
<ul>
<li>é™æ€ ui</li>
<li>çŠ¶æ€ç»„æˆ, å†…éƒ¨ç»´æŠ¤</li>
<li>ç”±å“ªäº›äº¤äº’æ–¹å¼</li>
</ul>
<p>éµå¾ªçš„åŸåˆ™:</p>
<ul>
<li>
<p>è‡ªå®šä¹‰ç»„ä»¶åå¤§å†™å­—æ¯å¼€å¤´ (react é»˜è®¤ å¤§å†™ä¸ºè‡ªå®šä¹‰, å°å†™ä¸ºåŸç”Ÿ dom èŠ‚ç‚¹å¦‚ div), å¦å¤– jsx æ”¯æŒåç§°çš„å±æ€§è¯­æ³•, å¦‚ <code>&lt;menu.Item /&gt;</code></p>
</li>
<li>
<p>ç»„ä»¶åº”è¯¥è¶³å¤Ÿå°, åªåšä¸€ä»¶äº‹ (è¿™æ˜¯ä¸ºäº†æ€§èƒ½è€ƒè™‘, æ‹†åˆ†æˆå°ç»„ä»¶å, å„ä¸ªç»„ä»¶éƒ½æœ‰è‡ªå·±çš„ state, å˜åŒ–æ—¶åªä¼šè‡ªå·±åˆ·æ–°, ä¸ä¼šä½¿å¾—æ•´ä¸ªæ‹¼æˆçš„å¤§ç»„ä»¶åˆ·æ–°)</p>
</li>
<li>
<p>state èƒ½ä¸è¦å°±ä¸è¦, èƒ½é€šè¿‡è®¡ç®—å¾—åˆ°çš„çŠ¶æ€å°±ä¸è¦ç‰¹åœ°å­˜å‚¨åˆ° state, å°½é‡æ‰€æœ‰æ•°æ®éƒ½é€šè¿‡ props è·å–, ä¹Ÿå°±æ˜¯ functional component ä¼˜äº state component (æ€§èƒ½å¥½, æ˜“äºé‡ç”¨)</p>
</li>
</ul>
<h2><a class="header" href="#å¸¦çŠ¶æ€ç»„ä»¶-çº¯å‡½æ•°ç»„ä»¶" id="å¸¦çŠ¶æ€ç»„ä»¶-çº¯å‡½æ•°ç»„ä»¶">å¸¦çŠ¶æ€ç»„ä»¶ çº¯å‡½æ•°ç»„ä»¶</a></h2>
<p>ä¸¤ç§å†™æ³• âœ:</p>
<p>ES6 è¯­æ³•(å¯ä»¥è¿›è¡Œæ¯”è¾ƒå¤æ‚çš„æ“ä½œå’Œç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„æ§åˆ¶ï¼Œç›¸å¯¹äº Functional components è€—è´¹èµ„æº)</p>
<pre><code class="language-js">//  æ³¨æ„ç»„ä»¶å¼€å¤´ç¬¬ä¸€ä¸ªå­—æ¯éƒ½è¦å¤§å†™
class MyComponent extends React.Component {

    // ES6 Class ä¸­ render() æ˜¯å”¯ä¸€å¿…è¦çš„æ–¹æ³•ï¼ˆä½†è¦æ³¨æ„çš„æ˜¯è¯·ä¿æŒ render() çš„çº¯ç²¹ï¼Œä¸è¦åœ¨é‡Œé¢è¿›è¡Œ state ä¿®æ”¹æˆ–æ˜¯ä½¿ç”¨éåŒæ­¥æ–¹æ³•å’Œæµè§ˆå™¨äº’åŠ¨ï¼Œè‹¥éœ€éåŒæ­¥äº’åŠ¨è¯·äº componentDidMount() æ“ä½œï¼‰
    render() {
        return &lt;div&gt;Hello, World!&lt;/div&gt;;
    }
}

// å°† &lt;MyComponent /&gt; ç»„ä»¶æ’å…¥ id ä¸º app çš„ DOM å…ƒç´ ä¸­
ReactDOM.render(&lt;MyComponent /&gt;, document.getElementById(&quot;app&quot;));
</code></pre>
<p>ä½¿ç”¨ Functional Component å†™æ³•ï¼ˆå•çº¯åœ° render UI çš„ stateless componentsï¼Œæ²¡æœ‰å†…éƒ¨çŠ¶æ€ã€æ²¡æœ‰ refï¼Œæ²¡æœ‰ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚è‹¥ééœ€è¦æ§åˆ¶ç”Ÿå‘½å‘¨æœŸçš„è¯å»ºè®®å¤šä½¿ç”¨ stateless components è·å¾—æ¯”è¾ƒå¥½çš„æ€§èƒ½ï¼‰</p>
<pre><code class="language-js">// ä½¿ç”¨ arrow function æ¥è®¾è®¡ Functional Component è®© UI è®¾è®¡æ›´å•çº¯ï¼ˆf(D) =&gt; UIï¼‰ï¼Œå‡å°‘å‰¯ä½œç”¨ï¼ˆside effectï¼‰
const MyComponent = props =&gt; &lt;div&gt;Hello, World!&lt;/div&gt;;

// å°† &lt;MyComponent /&gt; ç»„ä»¶æ’å…¥ id ä¸º app çš„ DOM å…ƒç´ ä¸­
ReactDOM.render(&lt;MyComponent /&gt;, document.getElementById(&quot;app&quot;));
</code></pre>
<h2><a class="header" href="#å‡½æ•°ç»‘å®šæ–¹å¼" id="å‡½æ•°ç»‘å®šæ–¹å¼">å‡½æ•°ç»‘å®šæ–¹å¼</a></h2>
<p>react ä¸­ç”±äºç±»çš„æ–¹æ³•é»˜è®¤ä¸ä¼šç»‘å®šthisï¼Œå› æ­¤åœ¨è°ƒç”¨çš„æ—¶å€™å¦‚æœå¿˜è®°ç»‘å®šï¼Œthisçš„å€¼å°†ä¼šæ˜¯undefined</p>
<pre><code class="language-jsx">// çº¯å‡½æ•°ç»„ä»¶

const Edit = props =&gt; {
    const onFinish = (values) =&gt; {
        console.log('Received values of form: ', values);
    };

    return (
        &lt;Form
            onFinish={onFinish}
        /&gt;
    );
}
</code></pre>
<pre><code class="language-jsx">// class ç»„ä»¶

// æ¨è
import React, { Component } from 'react';
class App extends Component {
  handleSubmit (e, args) {
    console.log(e, args)
  }

  render () {
      // æˆ–è€…åœ¨æ„é€ å‡½æ•°ä¸­ bind
      // å¦‚ this.handleClick = this.handleClick.bind(this);
    return (
      &lt;div onClick={this.handleSubmit.bind(this, 'test')}&gt;test&lt;/div&gt;
    )
  }
}

// or

class App extends Component {
  handleSubmit = (e) =&gt; {
     console.log(e);
  }

  render () {
    return (
      &lt;div onClick={this.handleSubmit}&gt;test&lt;/div&gt;
    )
  }
}

//or

class App extends Component {
  handleSubmit (e) {
     console.log(e);
  }
  render () {
    return (
      &lt;div onClick={ () =&gt; this.handleSubmit }&gt;test&lt;/div&gt;
    )
  }
}
</code></pre>
<h2><a class="header" href="#hooks" id="hooks">hooks</a></h2>
<p>https://reactjs.org/docs/hooks-reference.html</p>
<p>https://juejin.cn/post/6844903854174109703 å¾ªåºæ¸è¿›ä»‹ç» hooks, è§£å†³ä»€ä¹ˆé—®é¢˜</p>
<h3><a class="header" href="#create-react-app-é…åˆ-eslint-plugin-react-hooks" id="create-react-app-é…åˆ-eslint-plugin-react-hooks">create react app é…åˆ eslint-plugin-react-hooks</a></h3>
<p>https://blog.csdn.net/zqd666/article/details/102961701
https://www.npmjs.com/package/eslint-plugin-react-hooks?ref=hackernoon.com</p>
<h3><a class="header" href="#hooks-åŸç†" id="hooks-åŸç†">hooks åŸç†</a></h3>
<p>https://github.com/brickspert/blog/issues/26</p>
<h3><a class="header" href="#æœ€ä½³å®è·µ" id="æœ€ä½³å®è·µ">æœ€ä½³å®è·µ</a></h3>
<p>https://zhuanlan.zhihu.com/p/98554943
https://www.zhihu.com/search?type=content&amp;q=react%20hooks%20%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5</p>
<h3><a class="header" href="#ä¸ºä»€ä¹ˆéœ€è¦-hooks" id="ä¸ºä»€ä¹ˆéœ€è¦-hooks">ä¸ºä»€ä¹ˆéœ€è¦ hooks</a></h3>
<p>https://www.javascriptc.com/2530.html</p>
<p>çº¯å‡½æ•°ï¼Œä¸èƒ½åŒ…å«çŠ¶æ€ï¼Œä¹Ÿä¸æ”¯æŒç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œå› æ­¤æ— æ³•å–ä»£ç±»çš„å†™æ³•, React Hooks çš„è®¾è®¡ç›®çš„ï¼Œå°±æ˜¯åŠ å¼ºç‰ˆå‡½æ•°ç»„ä»¶ï¼Œå®Œå…¨ä¸ä½¿ç”¨&quot;ç±»&quot;ï¼Œå°±èƒ½å†™å‡ºä¸€ä¸ªå…¨åŠŸèƒ½çš„ç»„ä»¶</p>
<p>React Hooks çš„æ„æ€æ˜¯ï¼Œç»„ä»¶å°½é‡å†™æˆçº¯å‡½æ•°ï¼Œå¤–éƒ¨åŠŸèƒ½å’Œå‰¯ä½œç”¨æ”¾åœ¨é’©å­ä¸­ã€‚ React Hooks å°±æ˜¯é‚£äº›é’©å­.éœ€è¦ä»€ä¹ˆåŠŸèƒ½ï¼Œå°±ä½¿ç”¨ä»€ä¹ˆé’©å­ã€‚React é»˜è®¤æä¾›äº†ä¸€äº›å¸¸ç”¨é’©å­. é’©å­ä¸€å¾‹ä½¿ç”¨useå‰ç¼€å‘½åï¼Œä¾¿äºè¯†åˆ«</p>
<p>hooks è§£å†³äº†å‡ ä¸ªé—®é¢˜:</p>
<ul>
<li>å®¹æ˜“å¯¹ state æ“ä½œé€»è¾‘è¿›è¡Œå¤ç”¨</li>
<li>ä»¥å‰åˆ†å¸ƒåœ¨å‘¨æœŸå‡½æ•°ä¸­çš„æ“ä½œé›†ä¸­åˆ°äº†ä¸€ä¸ªåœ°æ–¹ (useEffect ä¸­)</li>
<li>å±è”½äº† this</li>
</ul>
<pre><code class="language-js">å››ä¸ªæœ€å¸¸ç”¨çš„ç‹—å­:

useState()
ä¸ºå‡½æ•°ç»„ä»¶å¼•å…¥çŠ¶æ€ï¼ˆstateï¼‰

useContext() åœ¨ç»„ä»¶ä¹‹é—´å…±äº«çŠ¶æ€, ä¸å¿…ä¸ºäº†å‚æ•°ä¼ é€’è¿›è¡Œå¤æ‚åµŒå¥—, å‡å°‘ç»„ä»¶å±‚çº§

useReducer() ä¸ºå‡½æ•°ç»„ä»¶å¼•å…¥ action

useEffect() å¼•å…¥å…·æœ‰å‰¯ä½œç”¨çš„æ“ä½œï¼Œæœ€å¸¸è§çš„å°±æ˜¯å‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®

useLayoutEffect() åŒæ­¥æ‰§è¡Œå‰¯ä½œç”¨

useCallback() è®°å¿†å‡½æ•°
useMemo() è®°å¿†ç»„ä»¶
å¯ä»¥å®Œå…¨æ›¿ä»£ useCallback çš„åŠŸèƒ½ 
useCallback(fn, inputs) is equivalent to useMemo(() =&gt; fn, inputs).


useImperativeHandle() ç»„ä»¶å¯ä»¥è·å¾—å­ç»„ä»¶çš„ input çš„ DOM èŠ‚ç‚¹

</code></pre>
<p>ç”±äº Hooks å¯ä»¥æä¾›å…±äº«çŠ¶æ€å’Œ Reducer å‡½æ•°ï¼Œæ‰€ä»¥å®ƒåœ¨è¿™äº›æ–¹é¢å¯ä»¥å–ä»£ Reduxã€‚ä½†æ˜¯ï¼Œå®ƒæ²¡æ³•æä¾›ä¸­é—´ä»¶ï¼ˆmiddlewareï¼‰å’Œæ—¶é—´æ—…è¡Œï¼ˆtime travelï¼‰ï¼Œå¦‚æœä½ éœ€è¦è¿™ä¸¤ä¸ªåŠŸèƒ½ï¼Œè¿˜æ˜¯è¦ç”¨ Redux</p>
<h3><a class="header" href="#useref" id="useref">useRef</a></h3>
<p>use to create a reference to refer to some object else;</p>
<p>useRef ä»…èƒ½ç”¨åœ¨ FunctionComponentï¼Œ(æ˜¾ç„¶çš„ï¼Œå› ä¸º Hooks ä¸èƒ½ç”¨åœ¨ ClassComponent), somehow equal to â€œthisâ€; é¿å…åœ¨ Render å‡½æ•°ä¸­ç›´æ¥ä¿®æ”¹ Ref, æœ€å¥½æ”¾åœ¨æŸä¸ªå‡½æ•°ä¸­ä¿®æ”¹</p>
<p>createRef ä»…èƒ½ç”¨åœ¨ ClassComponentã€‚(cuz: createRef å¹¶æ²¡æœ‰ Hooks çš„æ•ˆæœï¼Œå…¶å€¼ä¼šéšç€ FunctionComponent é‡å¤æ‰§è¡Œè€Œä¸æ–­è¢«åˆå§‹åŒ–ï¼š)  createRef æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„å¼•ç”¨ï¼Œè€Œ useRef æ¯æ¬¡éƒ½ä¼šè¿”å›ç›¸åŒçš„å¼•ç”¨</p>
<pre><code class="language-js">//ä½œä¸ºå®¹å™¨
export default () =&gt; {
  const refInput = useRef();
  return (
    &lt;div&gt;
      &lt;input ref={refInput} /&gt;
      &lt;button
        onClick={() =&gt; {
          refInput.current.focus();
        }}
      &gt;
        focus
      &lt;/button&gt;
    &lt;/div&gt;
  );
};
</code></pre>
<p>cache prev value: (can be inproved by useEffect, see blow)</p>
<pre><code class="language-js">export default () =&gt; {
  const [count, setCount] = useState(0);
  // åœ¨ä¸¤æ¬¡ä¸åŒçš„æ¸²æŸ“é—´ä¼ é€’å€¼
  // ç›¸å½“äº ç±»å±æ€§å˜é‡
  const prev = useRef(null);
  return (
    &lt;div&gt;
      &lt;p&gt;current: {count}&lt;/p&gt;
      &lt;p&gt;prev: {prev.current}&lt;/p&gt;
      &lt;button
        onClick={() =&gt; {
          prev.current = count;
          setCount(count + 1);
        }}
      &gt;
        +
      &lt;/button&gt;
      &lt;button
        onClick={() =&gt; {
          prev.current = count;
          setCount(count - 1);
        }}
      &gt;
        -
      &lt;/button&gt;
    &lt;/div&gt;
  );
};
</code></pre>
<h3><a class="header" href="#usememo-and-memo-and-usecallback" id="usememo-and-memo-and-usecallback">useMemo and memo and useCallback</a></h3>
<p>éƒ½æ˜¯ç”¨æ¥æå‡æ€§èƒ½. å¯ä»¥é˜²æ­¢ç»´æŠ¤çš„å¯¹è±¡é‡å¤åˆ›å»º</p>
<ul>
<li>
<p>memo() å†³å®šä¸€ä¸ªç»„ä»¶çš„æ¸²æŸ“æ˜¯å¦é‡å¤æ‰§è¡Œ <code>memo(XxxComponent [, isPropsUpdate()])</code></p>
<ul>
<li>
<p>ç”¨æ¥åŒ…è£…ä¸€ä¸ªç»„ä»¶; euqals to å‡½æ•°å¼ç»„ä»¶ä¸­çš„  , PureComponentç¬¬äºŒä¸ªå‚æ•°å¯é€‰ä¼ é€’ä¸€ä¸ªæ¯”è¾ƒå‡½æ•° <code>(prevProps, nextProps) =&gt; {...return false/true}</code> (å¦‚æœç¬¬äºŒä¸ªå‚æ•°ä¸ä¼ é€’ï¼Œåˆ™é»˜è®¤åªä¼šè¿›è¡Œ props çš„æµ…æ¯”è¾ƒã€‚)</p>
<p>PureComponent: é€šè¿‡æµ…å±‚æ¯”è¾ƒ props, å†³å®šæ˜¯å¦é‡æ–°æ¸²æŸ“; ä¹Ÿå°±æ˜¯è¯´, ä¼˜åŒ–åªå¯¹äº æµ…å±‚å±æ€§å˜åŒ–æœ‰æ•ˆ; ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ shouldComponentUpdate() è¿›è¡Œæ·±å±‚æ¯”è¾ƒ</p>
</li>
</ul>
</li>
<li>
<p>useMemo  æ§åˆ¶ä¸€æ®µå‡½æ•°é€»è¾‘æ˜¯å¦é‡å¤æ‰§è¡Œ;<code>usememo(func, [deps])</code> æ¥å—ä¸€ä¸ªå‡½æ•°, å’Œä¸€ä¸ªæ•°ç»„(ä¾èµ–)ï¼Œæ¯æ¬¡ rerender, ä¾èµ–æ˜¯å¦å˜åŒ–å†³å®šäº†å‡½æ•°é€»è¾‘æ˜¯å¦é‡å¤æ‰§è¡Œ, è‹¥ä¸ºç©ºæ•°ç»„åˆ™ä»…ä»…æ‰§è¡Œä¸€æ¬¡</p>
<ul>
<li>
<p>å‡½æ•°ä»ç„¶å¯ä»¥è¿”å› ç»„ä»¶, å°±æ˜¯è¯´ç›¸æ¯” memo() ä¼˜åŒ–ç²’åº¦æ›´ç»† (memo åªèƒ½åŒ…è£…æ•´ä¸ªç»„ä»¶, useMemo å¯ä»¥åªåŒ…è£…ç»„ä»¶ä¸­çš„æŸæ®µå‡½æ•°é€»è¾‘)</p>
</li>
<li>
<p>useMemo ç±»ä¼¼ useEffect, åŒºåˆ«æ˜¯ effect æ˜¯ render åæ‰§è¡Œï¼Œ useMemo æ˜¯ render å‰/æœŸé—´æ‰§è¡Œ, ä¹‹åæ˜¯å¦é‡å¤æ‰§è¡Œ, çœ‹ä¾èµ–æ˜¯å¦å˜åŒ–</p>
</li>
<li>
<p>usememo æœ¬èº«ä¹Ÿæœ‰å¼€é”€, æ‰€ä»¥ä½¿ç”¨ useMemo è€ƒè™‘: ä¼ é€’ç»™ useMemo çš„å‡½æ•°å¼€é”€å¤§ä¸å¤§? å¦‚æœå¤§æ‰ç”¨, </p>
</li>
<li>
<p>æ¨èä½¿ç”¨ React.useMemo è€Œä¸æ˜¯ React.memoï¼Œå› ä¸ºåœ¨ç»„ä»¶é€šä¿¡æ—¶å­˜åœ¨ React.useContext çš„ç”¨æ³•ï¼Œè¿™ç§ç”¨æ³•ä¼šä½¿æ‰€æœ‰ç”¨åˆ°çš„ç»„ä»¶é‡æ¸²æŸ“ï¼Œåªæœ‰ React.useMemo èƒ½å¤„ç†è¿™ç§åœºæ™¯çš„æŒ‰éœ€æ¸²æŸ“ã€‚</p>
</li>
</ul>
</li>
<li>
<p>useCallback ç”¨æ¥åŒ…è£…ä¸€ä¸ªå‡½æ•°, æ¯æ¬¡é‡æ¸²æŸ“éƒ½æ–°åˆ›å»ºè¿™ä¸ªå‡½æ•°çš„å®ä¾‹</p>
<ul>
<li>
<p>è‹¥ useMemo å†…çš„å‡½æ•°è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œ é‚£ä¹ˆå¯ä»¥ä½¿ç”¨ useCallbackç›´æ¥ä¼ å…¥è¿™ä¸ªå‡½æ•° å³ useMemo(() =&gt; fn) ç­‰ä»· useCallback(fn)</p>
</li>
<li>
<p>æ‰€æœ‰ Function Component å†…å‡½æ•°å¿…é¡»ç”¨ React.useCallback åŒ…è£¹ï¼Œä»¥ä¿è¯å‡†ç¡®æ€§ä¸æ€§èƒ½ (å¸¸ç”¨æ¥ å°† å‡½æ•°ä» useEffect ä¸­æŠ½ç¦»åˆ°å¤–éƒ¨, ä¾¿äºäººçœ¼ç»´æŠ¤, è‹¥å¸Œæœ›è¿›ä¸€æ­¥å°†å‡½æ•°æŠ½åˆ°ç»„ä»¶å¤–éƒ¨, éœ€è¦çµæ´»è¿ç”¨è‡ªå®šä¹‰ Hooks å®ç°)</p>
</li>
</ul>
</li>
</ul>
<pre><code class="language-js">const Demo = memo((props) =&gt; {
  console.log(&quot;demo render&quot;);
  return (
    &lt;div&gt;
      {props.name}, {props.person.age}
    &lt;/div&gt;
  );
});

export default () =&gt; {
  const [count, setCount] = useState(0);
  const [person, setPerson] = useState({
    age: 11
  });
  return (
    &lt;div&gt;
      &lt;span
        onClick={() =&gt; {
          setCount(count + 1);// å¦‚æœä»…ä»…æ˜¯ count æ”¹å˜, Demo ä¸ä¼šrerender
          setPerson({// å¦‚æœpersonä¹Ÿæ”¹å˜, demo ä¼šrerender
            ...person,
            age: person.age + 1
          });
        }}
      &gt;
        {count}
      &lt;/span&gt;
      &lt;Demo name=&quot;demo&quot; person={person} /&gt;
    &lt;/div&gt;
  );
};

</code></pre>
<pre><code class="language-js">/**
 * 
 */
export default () =&gt; {
  const [count, setCount] = useState(0);
  const memorizedText = useMemo(() =&gt; {
    console.log(`run memo func`);
    return `memo: ${Date.now()}`;
  }, [Math.floor(count / 10)]); // æ¯ç‚¹å‡» 10 æ¬¡å˜åŒ–ä¸€æ¬¡

  return (
    &lt;div&gt;
      {memorizedText}
      &lt;p&gt;count: {count}&lt;/p&gt;
      &lt;button
        onClick={() =&gt; {
          setCount(count + 1);
        }}
      &gt;
        +
      &lt;/button&gt;
      &lt;button
        onClick={() =&gt; {
          setCount(count - 1);
        }}
      &gt;
        -
      &lt;/button&gt;
    &lt;/div&gt;
  );
};

</code></pre>
<h3><a class="header" href="#usestate" id="usestate">useState</a></h3>
<h4><a class="header" href="#state-ç‰¹æ€§" id="state-ç‰¹æ€§">state ç‰¹æ€§</a></h4>
<p>æ¯ä¸€æ¬¡æ¸²æŸ“éƒ½æœ‰å®ƒè‡ªå·±çš„ Props å’Œ State
æ¯ä¸€æ¬¡æ¸²æŸ“éƒ½æœ‰å®ƒè‡ªå·±çš„äº‹ä»¶å¤„ç†å‡½æ•°
å½“ç‚¹å‡»æ›´æ–°çŠ¶æ€çš„æ—¶å€™ï¼Œå‡½æ•°ç»„ä»¶éƒ½ä¼šé‡æ–°è¢«è°ƒç”¨ï¼Œé‚£ä¹ˆæ¯æ¬¡æ¸²æŸ“éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œå–åˆ°çš„å€¼ä¸ä¼šå—åé¢æ“ä½œçš„å½±å“</p>
<p>Hook å†…éƒ¨ä½¿ç”¨ Object.is æ¥æ¯”è¾ƒæ–°æ—§ state æ˜¯å¦ç›¸ç­‰
ä¸ class ç»„ä»¶ä¸­çš„ setState æ–¹æ³•ä¸åŒï¼Œå¦‚æœä½ ä¿®æ”¹çŠ¶æ€çš„æ—¶å€™ï¼Œä¼ çš„çŠ¶æ€å€¼æ²¡æœ‰å˜åŒ–ï¼Œåˆ™ä¸é‡æ–°æ¸²æŸ“;
useState ä¸ä¼šè‡ªåŠ¨åˆå¹¶æ›´æ–°å¯¹è±¡, äºŒæ˜¯æ›¿æ¢</p>
<h4><a class="header" href="#ä¼ ç»Ÿå†™æ³•" id="ä¼ ç»Ÿå†™æ³•">ä¼ ç»Ÿå†™æ³•</a></h4>
<p>(ç”±äºå¸¦æœ‰ çŠ¶æ€, æ‰€ä»¥å¿…é¡»ä½¿ç”¨ ç±» çš„å†™æ³•)</p>
<pre><code class="language-js">class Button extends React.Component {
  constructor() {
    super();
    this.state = {
      content: &quot;click me&quot;
    };
    this.handleClick = this.handleClick.bind(this);
  }

  handleClick() {
    this.setState({
      content: &quot;hello btn ~~&quot;
    });
  }

  render() {
    return &lt;button onClick={this.handleClick}&gt;{this.state.content}&lt;/button&gt;;
  }
}
</code></pre>
<h4><a class="header" href="#ä½¿ç”¨-functional-ç»„ä»¶çš„å†™æ³•" id="ä½¿ç”¨-functional-ç»„ä»¶çš„å†™æ³•">ä½¿ç”¨ functional ç»„ä»¶çš„å†™æ³•</a></h4>
<pre><code class="language-js">import React, { useState } from &quot;react&quot;;

const ButtonHooks = () =&gt; {
  // è¯­æ³•:
  // å‚æ•°ä¸º æŸä¸ª state å±æ€§åˆå§‹å€¼
  // è¿”å›å€¼ä¸ºæ•°ç»„, 
  //[0] ä¸º å±æ€§å˜é‡, 
  //[1] ä¸ºå¯¹åº”çš„ setter æ–¹æ³•, çº¦å®šæ˜¯setå‰ç¼€åŠ ä¸ŠçŠ¶æ€çš„å˜é‡å; è‹¥ new state å’Œ old stateæœ‰å…³è”, æ¨è setXXX((old) =&gt; {return new})
  // æ¯ç”¨ä¸€æ¬¡ useState , å°±å¯ä»¥ä¸ºä¸€ä¸ª state å±æ€§ åˆ›å»º getter, setter, é¡ºåºå¾ˆé‡è¦, ä¸å¯æ”¹å˜(å³æ— æ³•æ”¾åœ¨æ¡ä»¶åˆ¤æ–­å†…)
  const [content, setContent] = useState(&quot;click me&quot;);

  const handleClick = () =&gt; {
    return setContent(&quot;hello hah~~&quot;);
  };
  return &lt;button onClick={handleClick}&gt;{content}&lt;/button&gt;;
};

export default ButtonHooks;

</code></pre>
<h4><a class="header" href="#å»¶è¿Ÿåˆå§‹åŒ–" id="å»¶è¿Ÿåˆå§‹åŒ–">å»¶è¿Ÿåˆå§‹åŒ–</a></h4>
<p>initialState å‚æ•°åªä¼šåœ¨ç»„ä»¶çš„åˆå§‹åŒ–æ¸²æŸ“ä¸­èµ·ä½œç”¨ï¼Œåç»­æ¸²æŸ“æ—¶ä¼šè¢«å¿½ç•¥, ä¼ å…¥æœ‰ä¸ªå‡½æ•°, åªä¼šåœ¨åˆå§‹æ¸²æŸ“æ—¶æ‰§è¡Œä¸€æ¬¡, åç»­ä¸å†æ‰§è¡Œ</p>
<pre><code class="language-js">export default (props) =&gt; {
  const [count, setCount] = useState(0);

  const [age, setAge] = useState(() =&gt; {
    console.log(&quot;å»¶è¿Ÿåˆå§‹åŒ–, åˆå§‹åŒ–æ—¶, å³ä½¿ç”¨çš„æ—¶å€™æ‰æ‰§è¡Œè®¡ç®—ï¼Œ åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œ æé«˜æ•ˆç‡&quot;);
    return props.defaultAge || 0;
  });

  return (
    &lt;div className=&quot;App&quot;&gt;
      count: {count}, age: {age}
      &lt;button onClick={() =&gt; setCount((count) =&gt; count + 1)}&gt;Add&lt;/button&gt;
    &lt;/div&gt;
  );
};


</code></pre>
<h4><a class="header" href="#æ–°æ—§-state-æœ‰å…³è”" id="æ–°æ—§-state-æœ‰å…³è”">æ–°æ—§ state æœ‰å…³è”</a></h4>
<p>å¦‚æœæ–°çš„ state éœ€è¦é€šè¿‡ä½¿ç”¨å…ˆå‰çš„ state è®¡ç®—å¾—å‡ºï¼Œé‚£ä¹ˆå¯ä»¥å°†å›è°ƒå‡½æ•°å½“åšå‚æ•°ä¼ é€’ç»™ setStateã€‚è¯¥å›è°ƒå‡½æ•°å°†æ¥æ”¶å…ˆå‰çš„ stateï¼Œå¹¶è¿”å›ä¸€ä¸ªæ›´æ–°åçš„å€¼</p>
<h3><a class="header" href="#usecontext" id="usecontext">useContext</a></h3>
<p>ç±»ä¼¼ redux ä½œç”¨, ä½†æ˜¯ redux æ›´å¼ºå¤§, </p>
<p>useReducerå’ŒuseContextçš„ç»“åˆå¯ä»¥å–ä»£Reduxä¹ˆï¼Ÿ</p>
<ul>
<li>useContextçš„é—®é¢˜æ˜¯å¦‚æœæ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œæ•´ä¸ªå­æ ‘éƒ½ä¼šé‡æ–°æ¸²æŸ“ï¼Œæ€§èƒ½å¯èƒ½ä¼šæœ‰é—®é¢˜</li>
<li>ä½¿ç”¨useContextä½ åªèƒ½åœ¨ç»„ä»¶å±‚å†™æ›´æ”¹çŠ¶æ€çš„é€»è¾‘ï¼Œä½†æ˜¯æœ‰çš„é€»è¾‘æ˜¯å…¨å±€çš„ï¼Œåº”è¯¥å†™åˆ°ä¸€ä¸ªå•ç‹¬çš„jsæ–‡ä»¶è€Œä¸æ˜¯ç»„ä»¶æ–‡ä»¶é‡Œï¼Œè€Œè¦å¯¼å‡ºçš„è¯å°±å¿…é¡»è‡ªå·±å°è£…ï¼Œè¿˜ä¸å¦‚ç”¨Redux</li>
<li>Reduxæœ‰thunkå’Œsagaä¹‹ç±»çš„ä¸­é—´ä»¶æ”¯æŒasync actionï¼Œè€ŒuseReduceræ²¡æœ‰ï¼Œè¿˜å¾—ç”¨å…¶ä»–åº“ã€‚</li>
</ul>
<pre><code class="language-js">import React, { useContext } from &quot;react&quot;;
import ReactDOM from &quot;react-dom&quot;;
import &quot;./styles.css&quot;;

const AppContext = React.createContext({});

// è¯­æ³•:
    // å‚æ•°ä¸º react.context å˜é‡
    // è¿”å› context ä¸­å­˜å‚¨çš„å†…å®¹, æœ‰ä¸¤ä¸ªåœ°æ–¹å¯ä»¥æŒ‡å®šå­˜å‚¨çš„å†…å®¹
    // - AppContext = React.createContext({}) // åˆå§‹åŒ–
    // - &lt;AppContext.Provider value={{}} ... // æŒ‡å®šå…·ä½“å€¼
function App() {
  return (
    //   AppContext.Provideræä¾›äº†ä¸€ä¸ª Context å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å¯ä»¥è¢«å­ç»„ä»¶å…±äº«
    &lt;AppContext.Provider value={{
      username: 'superawesome'
    }}&gt;
      &lt;div className=&quot;App&quot;&gt;
        &lt;Navbar /&gt;
        &lt;Messages /&gt;
      &lt;/div&gt;
    &lt;/AppContext.Provider&gt;
  );
}

const Navbar = () =&gt; {
  const { username } = useContext(AppContext)

  return (
    &lt;div className=&quot;navbar&quot;&gt;
      &lt;p&gt;AwesomeSite&lt;/p&gt;
      &lt;p&gt;{username}&lt;/p&gt;
    &lt;/div&gt;
  )
}

const Messages = () =&gt; {
  const { username } = useContext(AppContext)

  return (
    &lt;div className=&quot;messages&quot;&gt;
      &lt;h1&gt;Messages&lt;/h1&gt;
      &lt;p&gt;1 message for {username}&lt;/p&gt;
      &lt;p className=&quot;message&quot;&gt;useContext is awesome!&lt;/p&gt;
    &lt;/div&gt;
  )
}

const rootElement = document.getElementById(&quot;root&quot;);
ReactDOM.render(&lt;App /&gt;, rootElement);


</code></pre>
<p>æ”¹å˜é¢œè‰²ä¸»é¢˜ demo:</p>
<pre><code class="language-js">const themes = {
  light: {
    fore: &quot;#000000&quot;,
    back: &quot;#eeeeee&quot;
  },
  dark: {
    fore: &quot;#ffffff&quot;,
    back: &quot;#222222&quot;
  }
};

const ThemeContext = createContext({
  theme: themes.light,
  toggle: () =&gt; {}
});

export default () =&gt; {
  const [theme, setTheme] = useState(themes.light);
  return (
    // å¤šä¸ª context åµŒå¥—å³å¯ï¼Œ é¡ºåºä¸é‡è¦
    &lt;ThemeContext.Provider
      value={{
        theme,
        toggle: () =&gt; {
          setTheme((theme) =&gt; {
            setTheme(theme === theme.light ? themes.dark : themes.light);
          });
        }
      }}
    &gt;
      &lt;ToolBar /&gt;
    &lt;/ThemeContext.Provider&gt;
  );
};

const ToolBar = () =&gt; {
  return &lt;ThemedButton /&gt;;
};

const ThemedButton = () =&gt; {
  const context = useContext(ThemeContext);
  return (
    &lt;button
      style={{
        color: context.theme.fore,
        backgroundColor: context.theme.back
      }}
      onClick={() =&gt; {
        context.toggle();
      }}
    &gt;
      click
    &lt;/button&gt;
  );
};
</code></pre>
<h3><a class="header" href="#usereducer" id="usereducer">useReducer</a></h3>
<p>ç”¨äºç®¡ç†å¤æ‚çš„ state å˜åŒ–, å½“ state å¤šåˆ° useState éš¾ä»¥åº”ä»˜, å°±å¯ä»¥ä½¿ç”¨ useReducer</p>
<p>å±€éƒ¨çŠ¶æ€ä¸æ¨èä½¿ç”¨ useReducer ï¼Œä¼šå¯¼è‡´å‡½æ•°å†…éƒ¨çŠ¶æ€è¿‡äºå¤æ‚ï¼Œéš¾ä»¥é˜…è¯»ã€‚ useReducer å»ºè®®åœ¨å¤šç»„ä»¶é—´é€šä¿¡æ—¶ï¼Œç»“åˆ useContext ä¸€èµ·ä½¿ç”¨</p>
<pre><code class="language-js">import React, { useReducer } from &quot;react&quot;;

// reducer è´Ÿè´£æ ¹æ® state å’Œ action è®¡ç®—å‡ºæ–°çš„ state
const btnReducer = (state, action) =&gt; {
  let result;

  switch (action.type) {
    case &quot;countUp&quot;:
      result = {
        ...state,
        count: state.count + 1
      };
      break;

    default:
      // result = state;
      // break;
      throw new Error(&quot;xxx&quot;)
  }
  return result;
};

const ActionDemo = () =&gt; {
    // å‚æ•° 1: reducer
    // å‚æ•° 2: initState 
    // å‚æ•° 3: init, å¯é€‰, å¯¹ initState åšåŠ å·¥åä¼ å…¥ useReducer
    // è¿”å›å€¼: [å½“å‰çŠ¶æ€, dispatch å‡½æ•°], åè€…æ˜¯å‡½æ•°,ä¿è¯ä¸å¯å˜
  const [state, dispatch] = useReducer(btnReducer, {
    count: 0
  });
  return (
    &lt;div&gt;
      &lt;button
        style={{
          padding: &quot;5px 20px&quot;,
          marginTop: &quot;10px&quot;,
          marginBottom: &quot;10px&quot;,
          color: &quot;#fff&quot;,
          backgroundColor: &quot;#0066cc&quot;,
          borderRadius: &quot;15px&quot;,
          border: &quot;1px solid #fff&quot;
        }}
        // dispatcher è´Ÿè´£å‘å‡º action, 
        onClick={() =&gt; dispatch({ type: &quot;countUp&quot; })}
      &gt;
        up
      &lt;/button&gt;
      &lt;p&gt;count: {state.count}&lt;/p&gt;
    &lt;/div&gt;
  );
};

export default ActionDemo;


</code></pre>
<h3><a class="header" href="#useeffect" id="useeffect">useEffect</a></h3>
<h4><a class="header" href="#effect-ç†è§£" id="effect-ç†è§£">effect ç†è§£</a></h4>
<p>effectï¼ˆå‰¯ä½œç”¨ï¼‰ï¼šæŒ‡é‚£äº›æ²¡æœ‰å‘ç”Ÿåœ¨æ•°æ®å‘è§†å›¾è½¬æ¢è¿‡ç¨‹ä¸­çš„é€»è¾‘ï¼Œå¦‚ ajax è¯·æ±‚ã€è®¿é—®åŸç”Ÿdom å…ƒç´ ã€æœ¬åœ°æŒä¹…åŒ–ç¼“å­˜ã€ç»‘å®š/è§£ç»‘äº‹ä»¶ã€æ·»åŠ è®¢é˜…ã€è®¾ç½®å®šæ—¶å™¨ã€è®°å½•æ—¥å¿—ç­‰ã€‚</p>
<p>å‰¯ä½œç”¨æ“ä½œå¯ä»¥åˆ†ä¸¤ç±»ï¼šéœ€è¦æ¸…é™¤çš„å’Œä¸éœ€è¦æ¸…é™¤çš„</p>
<p>useEffect æ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šåœ¨ç»„ä»¶æ¸²æŸ“åˆ°å±å¹•ä¹‹åæ‰æ‰§è¡Œï¼Œè¯¥å‡½æ•°æœ‰è¦æ±‚ï¼šè¦ä¹ˆè¿”å›ä¸€ä¸ªèƒ½æ¸…é™¤å‰¯ä½œç”¨çš„å‡½æ•°ï¼Œè¦ä¹ˆå°±ä¸è¿”å›ä»»ä½•å†…å®¹; å®ƒè·Ÿ class ç»„ä»¶ä¸­çš„ componentDidMountã€  componentDidUpdate å’Œ componentWillUnmount å…·æœ‰ç›¸åŒçš„ç”¨é€”ï¼Œåªä¸è¿‡è¢«åˆå¹¶æˆäº†ä¸€ä¸ª API</p>
<p>ä¸ componentDidMount æˆ– componentDidUpdate ä¸åŒï¼Œä½¿ç”¨ useEffect è°ƒåº¦çš„ effect ä¸ä¼šé˜»å¡æµè§ˆå™¨æ›´æ–°å±å¹•ï¼Œè¿™è®©ä½ çš„åº”ç”¨çœ‹èµ·æ¥å“åº”æ›´å¿«ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œeffect ä¸éœ€è¦åŒæ­¥åœ°æ‰§è¡Œã€‚åœ¨ä¸ªåˆ«æƒ…å†µä¸‹ï¼ˆä¾‹å¦‚æµ‹é‡å¸ƒå±€ï¼‰ï¼Œæœ‰å•ç‹¬çš„ useLayoutEffect Hook ä¾›ä½ ä½¿ç”¨ï¼Œå…¶ API ä¸ useEffect ç›¸åŒ</p>
<h4><a class="header" href="#effect-åŸºæœ¬ä½¿ç”¨" id="effect-åŸºæœ¬ä½¿ç”¨">effect åŸºæœ¬ä½¿ç”¨</a></h4>
<pre><code class="language-js">export default function App() {
  const [count, setCount] = useState(0);

  useEffect(() =&gt; {// ç›¸å½“äº componentDidMount
    console.log(`count: ${count}`);
  }, [count]);// ä¾èµ– count æ˜¯å¦å˜åŒ–, [] åˆ™æ²¡æœ‰ä¾èµ–, åªåœ¨ render åæ‰§è¡Œä¸€æ¬¡; ä¸å¸¦è¿™ä¸ªå‚æ•°, åˆ™æ¯æ¬¡ render åéƒ½æ‰§è¡Œ

  return (
    &lt;div className=&quot;App&quot;&gt;
      count: {count}
      &lt;button onClick={() =&gt; setCount((count) =&gt; count + 1)}&gt;Add&lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h4><a class="header" href="#ç¼“å­˜ä¸Šæ¬¡å€¼" id="ç¼“å­˜ä¸Šæ¬¡å€¼">ç¼“å­˜ä¸Šæ¬¡å€¼</a></h4>
<p>useEffect åœ¨ Render å®Œæ¯•åæ‰æ‰§è¡Œ</p>
<pre><code class="language-js">// å°è£…äº†ä¸€ä¸ªç®€å•çš„ Hooks æ‹¿åˆ°ä¸Šä¸€æ¬¡çš„å€¼
function usePrevious(value) {
  const ref = useRef();
  useEffect(() =&gt; {
    ref.current = value;//useEffect åœ¨ Render å®Œæ¯•åæ‰æ‰§è¡Œ, therefore ref çš„å€¼åœ¨å½“å‰ Render ä¸­æ°¸è¿œæ˜¯ä¸Šä¸€æ¬¡ Render æ—¶å€™çš„
  });
  return ref.current;
}


</code></pre>
<h4><a class="header" href="#è®¾ç½®é”€æ¯å›è°ƒå‡½æ•°ä¾‹å­" id="è®¾ç½®é”€æ¯å›è°ƒå‡½æ•°ä¾‹å­">è®¾ç½®é”€æ¯å›è°ƒå‡½æ•°ä¾‹å­</a></h4>
<p>åªæœ‰ä¸€ä¸ªå‚æ•°çš„ä¾‹å­:</p>
<pre><code class="language-js">import React, { useState, useEffect } from &quot;react&quot;;
let timer = null;
function App() {
  const [count, setCount] = useState(0);
  //ä¸€æ—¦ count å€¼å‘ç”Ÿæ”¹å˜ï¼Œåˆ™ä¿®æ”¹ documen.title å€¼
  useEffect(() =&gt; {
    document.title = &quot;componentDidMount&quot; + count;
  },[count]);

//æ•°ç»„æ²¡æœ‰ä¼ å€¼ï¼Œä»£è¡¨ä¸ç›‘å¬ä»»ä½•å‚æ•°å˜åŒ–ï¼Œå³åªæœ‰åœ¨ç»„ä»¶åˆå§‹åŒ–æˆ–é”€æ¯çš„æ—¶å€™æ‰ä¼šè§¦å‘ï¼Œç”¨æ¥ä»£æ›¿ componentDidMount å’Œ componentWillUnmount
  useEffect(() =&gt; {
    timer = setInterval(() =&gt; {
      setCount(prevCount =&gt; prevCount + 1);
    }, 1000);
    // è¿”å›å€¼(å¦‚æœæœ‰)åˆ™åœ¨ç»„ä»¶é”€æ¯å‰è°ƒç”¨, è‹¥ä¾èµ–æ•°ç»„ä¸­å­˜åœ¨ä¾èµ–, åˆ™è¿”å›çš„å›è°ƒå‡½æ•°åœ¨ ä¸Šæ¬¡ useEffect å¤„ç†å®Œå æ—¶æ‰§è¡Œ
    return () =&gt; {
      document.title = &quot;componentWillUnmount&quot;;
      clearInterval(timer);
    };
  }, []);
  
  return (
    &lt;div&gt;
      Count: {count}
      &lt;button onClick={() =&gt; clearInterval(timer)}&gt;clear&lt;/button&gt;
    &lt;/div&gt;
  );
}

</code></pre>
<h4><a class="header" href="#å‘é€å¼‚æ­¥è¯·æ±‚" id="å‘é€å¼‚æ­¥è¯·æ±‚">å‘é€å¼‚æ­¥è¯·æ±‚</a></h4>
<pre><code class="language-js">export default () =&gt; {
  const personList = usePerson();
  if (personList === null) {
    return &lt;div&gt;pending...&lt;/div&gt;;
  }
  return (
    &lt;div&gt;
      {personList.map((person) =&gt; (
        &lt;li key={person}&gt;{person}&lt;/li&gt;
      ))}
    &lt;/div&gt;
  );
};

async function getPersonList() {
  await new Promise((resolve) =&gt; {
    setTimeout(() =&gt; {
      resolve();
    }, 200);
  });
  return [&quot;aa&quot;, &quot;bb&quot;, &quot;cc&quot;];
}

const usePerson = () =&gt; {
  const [personList, setPersonList] = useState(null);
  
  //useEffect æ¥æ”¶çš„å‡½æ•°ï¼Œè¦ä¹ˆè¿”å›ä¸€ä¸ªèƒ½æ¸…é™¤å‰¯ä½œç”¨çš„å‡½æ•°ï¼Œè¦ä¹ˆå°±ä¸è¿”å›ä»»ä½•å†…å®¹ã€‚è€Œ async è¿”å›çš„æ˜¯ promiseã€‚
  useEffect(() =&gt; {
    async function req() {
      const personList = await getPersonList();
      setPersonList(personList);
    }
    req();
  }, []);
  return personList;
};

</code></pre>
<h4><a class="header" href="#ä½¿ç”¨-fetch-api" id="ä½¿ç”¨-fetch-api">ä½¿ç”¨ fetch api</a></h4>
<pre><code class="language-js">å¦‚ä½•åœ¨ Hooks ä¸­ä¼˜é›…çš„ Fetch Data
function App() {
  const [data, setData] = useState({ hits: [] });
  useEffect(() =&gt; {
    // æ›´ä¼˜é›…çš„æ–¹å¼
    const fetchData = async () =&gt; {
      const result = await axios(
        'https://api.github.com/api/v3/search?query=redux',
      );
      setData(result.data);
    };
    fetchData();
  }, []);
  return (
    &lt;ul&gt;
      {data.hits.map(item =&gt; (
        &lt;li key={item.id}&gt;
          &lt;a href={item.url}&gt;{item.title}&lt;/a&gt;
        &lt;/li&gt;
      ))}
    &lt;/ul&gt;
  );
}


</code></pre>
<h3><a class="header" href="#è‡ªå®šä¹‰-hook" id="è‡ªå®šä¹‰-hook">è‡ªå®šä¹‰ hook</a></h3>
<p>è‡ªå®šä¹‰ Hookï¼Œåªè¦å‡½æ•°åéµå¾ªä»¥ use å¼€å¤´ï¼Œä¸”è¿”å›é JSX å…ƒç´ ï¼Œå°±æ˜¯è‡ªå®šä¹‰ Hooks </p>
<h4><a class="header" href="#å¸¦æœ‰è‡ªå¢æ•ˆæœçš„-state-hook" id="å¸¦æœ‰è‡ªå¢æ•ˆæœçš„-state-hook">å¸¦æœ‰è‡ªå¢æ•ˆæœçš„ state hook</a></h4>
<pre><code class="language-js">export default () =&gt; {
  const [count, addCount] = useCountAdd(0);

  return (
    &lt;div&gt;
      count: {count}
      &lt;button onClick={() =&gt; addCount()}&gt;Add&lt;/button&gt;
    &lt;/div&gt;
  );
};

const useCountAdd = (init) =&gt; {
  const [count, setCount] = useState(init);
  return [
    count,
    () =&gt; {
      setCount((count) =&gt; count + 1);
    }
  ];
};
</code></pre>
<h4><a class="header" href="#ä»-usehooks-æ”¹é€ -responsecomponent" id="ä»-usehooks-æ”¹é€ -responsecomponent">ä» usehooks æ”¹é€  responseComponent</a></h4>
<p>å®æ—¶æ›´æ–°çš„ response component:</p>
<pre><code class="language-js">import React, { useState, useEffect } from &quot;react&quot;;

const Response = ({param}) =&gt; {
    // æ ‡è¯†è¯·æ±‚æ˜¯å¦å®Œæˆ
  const [ok, setOk] = useState(false);
  // http çš„å“åº”
  const [response, setResponse] = useState({});

  // å‚æ•° 1: æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¼‚æ­¥æ“ä½œçš„ä»£ç æ”¾åœ¨é‡Œé¢
  // å‚æ•° 2: æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œç”¨äºç»™å‡º Effect çš„ä¾èµ–é¡¹ï¼Œåªè¦è¿™ä¸ªæ•°ç»„å‘ç”Ÿå˜åŒ–ï¼ŒuseEffect()å°±ä¼šæ‰§è¡Œã€‚
  //ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥çœç•¥ï¼Œè¿™æ—¶æ¯æ¬¡ç»„ä»¶æ¸²æŸ“æ—¶ï¼Œå°±ä¼šæ‰§è¡ŒuseEffect()ã€‚
  useEffect(() =&gt; {
    fetch(`http://www.httpbin.org/anything/${param}`)
      .then(resp =&gt; resp.json())
      .then(data =&gt; {
        setResponse(data);
        setOk(true);
      });
  }, [param]);

  if (!ok) {
    return &lt;p&gt;Nothing...&lt;/p&gt;;
  }

  return (
    &lt;div&gt;
      &lt;p&gt;your IP: {response.origin}&lt;/p&gt;
      &lt;p&gt;request url: {response.url}&lt;/p&gt;
    &lt;/div&gt;
  );
};

const EffectDemo = () =&gt; {
  const [param, setParam] = useState(&quot;one&quot;);

  return (
    &lt;div&gt;
      &lt;Response param={param} /&gt;
      &lt;p&gt;
        you can choose:
        &lt;button onClick={() =&gt; setParam(&quot;one&quot;)}&gt;one&lt;/button&gt;
        &lt;button onClick={() =&gt; setParam(&quot;two&quot;)}&gt;two&lt;/button&gt;
        &lt;button onClick={() =&gt; setParam(&quot;three&quot;)}&gt;three&lt;/button&gt;
      &lt;/p&gt;
    &lt;/div&gt;
  );
};

export default EffectDemo;


</code></pre>
<p>æ”¹é€ å:</p>
<pre><code class="language-js">import React, {useState, useEffect } from &quot;react&quot;;

const useResponse = param =&gt; {
  const [ok, setOk] = useState(false);
  const [response, setResponse] = useState({});

  useEffect(() =&gt; {
    setOk(false);
    fetch(`http://www.httpbin.org/anything/${param}`)
      .then(resp =&gt; resp.json())
      .then(data =&gt; {
        setResponse(data);
        setOk(true);
      });
  }, [param]);
  
  return [ok, response];
};

const Response = ({param}) =&gt; {
  const [ok, response] = useResponse(param);
  if (!ok) {
    return (
      &lt;p&gt;Nothing...&lt;/p&gt;
    );
  }
  return (
    &lt;div&gt;
      &lt;p&gt;your IP: {response.origin}&lt;/p&gt;
      &lt;p&gt;request url: {response.url}&lt;/p&gt;
    &lt;/div&gt;
  );
};


</code></pre>
<h4><a class="header" href="#å®šæ—¶å™¨-and-è‡ªåŠ¨é”€æ¯" id="å®šæ—¶å™¨-and-è‡ªåŠ¨é”€æ¯">å®šæ—¶å™¨ and è‡ªåŠ¨é”€æ¯</a></h4>
<p>å®šæ—¶å™¨ (éœ€è¦è®¾ç½®é”€æ¯å‡½æ•°)</p>
<pre><code class="language-js">const useCountAdd = (init) =&gt; {
  const [count, setCount] = useState(init);
  return [
    count,
    () =&gt; {
      setCount((count) =&gt; count + 1);
    }
  ];
};

const useInterval = (callback, interval) =&gt; {
  useEffect(() =&gt; {
    const I = setInterval(callback, interval);
    return () =&gt; { // ç›¸å½“äº componentWillunmount
      clearInterval(I);
    };
  }, []);
};

export default () =&gt; {
  const [count, addCount] = useCountAdd(0);

  useInterval(() =&gt; {
    addCount();
  }, 1000);

  return (
    &lt;div&gt;
      count: {count}
      &lt;button onClick={addCount}&gt;add&lt;/button&gt;
    &lt;/div&gt;
  );
};
</code></pre>
<p>å®šæ—¶è‡ªåŠ¨é”€æ¯</p>
<pre><code class="language-js">const useTimerCount = (initCount) =&gt; {
  const [count, setCount] = useState(initCount);

  const ref = useRef();
  useEffect(() =&gt; {
    ref.current = setInterval(() =&gt; {
      setCount((count) =&gt; count + 1);
    }, 1000);
  }, []);
  useEffect(() =&gt; {
    if (count &gt; 6) {
      clearInterval(ref.current);
    }
  });

  return [count, setCount];
};

const useCounter = (count) =&gt; {
  return &lt;div&gt;timer count: {count}&lt;/div&gt;;
};

export default () =&gt; {
  const [count, setCount] = useTimerCount(0);
  return useCounter(count);
};
</code></pre>
<h3><a class="header" href="#ç»¼åˆä¾‹å­" id="ç»¼åˆä¾‹å­">ç»¼åˆä¾‹å­</a></h3>
<h4><a class="header" href="#ç‚¹èµæŒ‰é’®" id="ç‚¹èµæŒ‰é’®">ç‚¹èµæŒ‰é’®</a></h4>
<pre><code class="language-js">import React, { useReducer, useState } from &quot;react&quot;;
import &quot;./styles.css&quot;;

const initState = {
  likes: 100,
  dislikes: 5
};

const appReducer = (state, action) =&gt; {
  switch (action.type) {
    case &quot;click_like&quot;:
      return {
        ...state,
        likes: state.likes + action.payload
      };
    case &quot;click_dislike&quot;:
      return {
        ...state,
        dislikes: state.dislikes + action.payload
      };
    default:
      return state;
  }
};

export default function App() {
  const [state, dispatch] = useReducer(appReducer, initState);
  const { likes, dislikes } = state;
  const [status, setStatus] = useState(null);

  const handleLike = () =&gt; {
    if (status === &quot;like&quot;) {
      setStatus(null);
      dispatch({
        type: &quot;click_like&quot;,
        payload: -1
      });
    } else if (status === null) {
      setStatus(&quot;like&quot;);
      dispatch({
        type: &quot;click_like&quot;,
        payload: 1
      });
    } else {
      setStatus(&quot;like&quot;);
      dispatch({
        type: &quot;click_dislike&quot;,
        payload: -1
      });
      dispatch({
        type: &quot;click_like&quot;,
        payload: 1
      });
    }
  };

  const handleDisLike = () =&gt; {
    if (status === &quot;dislike&quot;) {
      setStatus(null);
      dispatch({
        type: &quot;click_dislike&quot;,
        payload: -1
      });
    } else {
      if (status === &quot;like&quot;) {
        dispatch({
          type: &quot;click_like&quot;,
          payload: -1
        });
      }

      setStatus(&quot;dislike&quot;);
      dispatch({
        type: &quot;click_dislike&quot;,
        payload: 1
      });
    }
  };

  return (
    &lt;div className=&quot;App&quot;&gt;
      &lt;button
        className={status === &quot;like&quot; ? &quot;btn active&quot; : &quot;btn&quot;}
        onClick={handleLike}
      &gt;
        èµ&lt;span&gt;{likes}&lt;/span&gt;
      &lt;/button&gt;
      &lt;button
        className={status === &quot;dislike&quot; ? &quot;btn active&quot; : &quot;btn&quot;}
        onClick={handleDisLike}
      &gt;
        è¸©&lt;span&gt;{dislikes}&lt;/span&gt;
      &lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<pre><code class="language-css">.App {
  display: flex;
  height: 100vh;
  align-items: center;
  justify-content: center;
}

.btn {
  cursor: pointer;
  border: none;
  font-size: 18px;
  line-height: 30px;
  background-color: transparent;
  color: #747777;
  outline: none;
  padding: 0 20px;
}

.btn:first-of-type {
  border-right: 2px solid #747777;
}

.btn:hover {
  color: #282a2e;
}

.active,
.active:hover {
  color: #1b81f5;
}

span {
  margin-left: 6px;
}
</code></pre>
<h2><a class="header" href="#é«˜é˜¶ç»„ä»¶-and-å‡½æ•°ä½œä¸ºå­ç»„ä»¶" id="é«˜é˜¶ç»„ä»¶-and-å‡½æ•°ä½œä¸ºå­ç»„ä»¶">é«˜é˜¶ç»„ä»¶ and å‡½æ•°ä½œä¸ºå­ç»„ä»¶</a></h2>
<p>é«˜é˜¶ç»„ä»¶ (HOC) æ¥å—ç»„ä»¶ä½œä¸ºå‚æ•°, è¿”å›æ–°çš„ç»„ä»¶, ä¸€èˆ¬ä»¥å‡½æ•°çš„å½¢å¼å‘ˆç°</p>
<pre><code class="language-jsx">export default function withTimer(WrappedComponent) {
    return class extends React.Component {
        state = { time: new Date() };
        componentDidMount() {
            this.timerID = setInterval(() =&gt; this.tick(), 1000);
        }

        componentWillUnmount() {
            clearInterval(this.timerID);
        }

        tick() {
            this.setState({
                time: new Date()
            });
        }
        render() {
            // props åŸå°æœªåŠ¨
            // å¢åŠ äº†ä¸€ä¸ª time å±æ€§
            return &lt;WrappedComponent time={this.state.time} {...this.props} /&gt;;
        }
    };
}

// ä½¿ç”¨çš„æ—¶å€™å¯ä»¥è¿™æ ·ä½¿ç”¨:
export class TabSelectorSample extends PureComponent {
    state = {
        color: null
    };
    render() {
        return (
            &lt;div&gt;
                Select color:{&quot; &quot;}
                &lt;TabSelector
                    options={options}
                    value={this.state.color}
                    onChange={c =&gt; this.setState({ color: c })}
                /&gt;
                {/* time å±æ€§æ˜¯é€šè¿‡åŒ…è£…æ·»åŠ è¿›æ¥çš„ */}
                &lt;p&gt;{this.props.time.toLocaleTimeString()}&lt;/p&gt;
            &lt;/div&gt;
        );
    }
}

export default withTimer(TabSelectorSample);
</code></pre>
<p>å‡½æ•°ä½œä¸ºå­ç»„ä»¶:</p>
<pre><code class="language-jsx">const FunctionAsSonComponent = props =&gt; {
    return (
        &lt;MyComponent&gt;
        {/* ä¼ å…¥ä¸€ä¸ªå‡½æ•° */}
            {name =&gt; {
                return &lt;div&gt;{name}&lt;/div&gt;;
            }}
        &lt;/MyComponent&gt;
    );
};

// ä½¿ç”¨: 

const MyComponent = props =&gt; {
    // è°ƒç”¨ä¼ å…¥çš„å‡½æ•°, hello å°±æ˜¯å‡½æ•°çš„å‚æ•°
    return &lt;div&gt;{props.children(&quot;hello&quot;)}&lt;/div&gt;;
};
</code></pre>
<h2><a class="header" href="#fragment" id="fragment">Fragment</a></h2>
<p>Fragments çœ‹èµ·æ¥åƒç©ºçš„ JSX æ ‡ç­¾, å¯ä»¥å°†å¤šä¸ªå…ƒç´ ä½œä¸ºè¿”å›å€¼</p>
<pre><code class="language-js">class Table extends React.Component {
  render() {
    return (
      &lt;table&gt;
        &lt;tr&gt;
          &lt;Columns /&gt;
        &lt;/tr&gt;
      &lt;/table&gt;
    );
  }
}

class Columns extends React.Component {
  render() {
    return (
        // è¿™é‡Œå°±æ˜¯ä¸€ä¸ª Fragment, jsx è§„å®šæ— æ³•ç›´æ¥è¿”å›å¤šä¸ªå…ƒç´ , é€šè¿‡ Fragment å¯è§„é¿è¿™ä¸ªé™åˆ¶
        // å…¶å®å°±æ˜¯ &lt;React.Fragment/&gt; çš„è¯­æ³•ç³–
        // ä½†æ˜¯ &lt;&gt;&lt;/&gt; è¯­æ³•ä¸èƒ½æ¥å—é”®å€¼æˆ–å±æ€§, åªæœ‰  &lt;React.Fragment/&gt; å¯æ¥å—
      &lt;&gt;
        &lt;td&gt;Hello&lt;/td&gt;
        &lt;td&gt;World&lt;/td&gt;
      &lt;/&gt;
    );
  }
}

</code></pre>
<p>æ¥å— key å±æ€§çš„ demo:</p>
<pre><code class="language-js">function Glossary(props) {
  return (
    &lt;dl&gt;
      {props.items.map(item =&gt; (
        // æ²¡æœ‰`key`ï¼Œå°†ä¼šè§¦å‘ä¸€ä¸ªkeyè­¦å‘Š
        // key æ˜¯å”¯ä¸€å¯ä»¥ä¼ é€’ç»™ Fragment çš„å±æ€§
        &lt;React.Fragment key={item.id}&gt;
          &lt;dt&gt;{item.term}&lt;/dt&gt;
          &lt;dd&gt;{item.description}&lt;/dd&gt;
        &lt;/React.Fragment&gt;
      ))}
    &lt;/dl&gt;
  );
}

</code></pre>
<h2><a class="header" href="#strictmode" id="strictmode">StrictMode</a></h2>
<p>ä¸ Fragment ç±»ä¼¼ï¼ŒStrictMode ä¸å‘ˆç°ä»»ä½•å¯è§ UIã€‚å®ƒä¸ºå®ƒçš„åä»£å¯åŠ¨é¢å¤–çš„æ£€æŸ¥å’Œè­¦å‘Šã€‚(ä¸¥æ ¼æ¨¡å¼æ£€æŸ¥ä»…åœ¨å¼€å‘æ¨¡å¼ä¸‹è¿è¡Œï¼›å®ƒä»¬ä¸ä¼šå½±å“ç”Ÿäº§æ„å»ºã€‚</p>
<p>)</p>
<pre><code class="language-js">import React from 'react';

function ExampleApplication() {
  return (
    &lt;div&gt;
      &lt;Header /&gt;
      &lt;React.StrictMode&gt;
        &lt;div&gt;
          &lt;ComponentOne /&gt;
          &lt;ComponentTwo /&gt;
        &lt;/div&gt;
      &lt;/React.StrictMode&gt;
      &lt;Footer /&gt;
    &lt;/div&gt;
  );
}

</code></pre>
<h2><a class="header" href="#ç¤ºä¾‹" id="ç¤ºä¾‹">ç¤ºä¾‹</a></h2>
<p>æ¯ä¸ª demo éƒ½æä¾› 3 ç§å†™æ³•, ä¾›å¯¹æ¯”.</p>
<h3><a class="header" href="#ä½¿ç”¨-props" id="ä½¿ç”¨-props">ä½¿ç”¨ props</a></h3>
<pre><code class="language-js">// ç»„ä»¶ç±»çš„ç¬¬ä¸€ä¸ªå­—æ¯å¿…é¡»å¤§å†™ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼Œæ¯”å¦‚HelloMessageä¸èƒ½å†™æˆhelloMessageã€‚å¦å¤–ï¼Œç»„ä»¶ç±»åªèƒ½åŒ…å«ä¸€ä¸ªé¡¶å±‚æ ‡ç­¾ï¼Œå¦åˆ™ä¹Ÿä¼šæŠ¥é”™ã€‚

/*************************
      demo1: ä½¿ç”¨props
***************************/

// react api å†™æ³•

var HelloMsg = React.createClass({
    render: function() {
        return &lt;h1&gt;Hello, {this.props.name}&lt;/h1&gt;;
    }
});

// state component å†™æ³•

class HelloMsg extends React.Component {
    constructor(props) {
        super(props);
        this.state = {};
    }
    render() {
        return &lt;h1&gt;Hello, {this.props.name}&lt;/h1&gt;;
    }
}

// Functional component , å•çº¯çš„ui, æ²¡æœ‰ state, æ²¡æœ‰ref, ä»…ä»…ä¸€ä¸ªæ„é€ å‡½æ•°

const HelloMsg = props =&gt; (
    // æ³¨æ„è¿™è¾¹ props æ˜¯ä¼ å…¥å‡½å¼çš„å‚æ•°ï¼Œå› æ­¤å–ç”¨ props ä¸ç”¨åŠ  this
    &lt;h1&gt;Hello, {props.name}&lt;/h1&gt;
);

ReactDOM.render(
    &lt;HelloMsg name=&quot;xiaoyu&quot;&gt;&lt;/HelloMsg&gt;,
    document.getElementById(&quot;component&quot;)
);
</code></pre>
<h3><a class="header" href="#éå†å­å…ƒç´ " id="éå†å­å…ƒç´ ">éå†å­å…ƒç´ </a></h3>
<pre><code class="language-js">// ------------------------------------------------------

/******************************
        demo2: éå†å­å…ƒç´ 
*******************************************/

/* éå†å­å…ƒç´ , this.props.childrenè·å–åˆ°æ‰€æœ‰å­å…ƒç´ , React.Children.mapéå† */

/* this.props.childrenå¯èƒ½æœ‰3ç§å¯èƒ½å€¼ undefined: æ²¡æœ‰å­node, object: ä»…ä»…ä¸€ä¸ªå­node, array: å¤šä¸ªå­node */

var ChildNode = React.createClass({
    render: function() {
        return (
            &lt;ol&gt;
                {// React.Children å·¥å…·ç±», è¿˜æœ‰å¾ˆå¤šå·¥å…·æ–¹æ³•, å‚è§æ–‡æ¡£
                React.Children.map(this.props.children, function(child) {
                    return &lt;li&gt;{child}&lt;/li&gt;;
                })}
            &lt;/ol&gt;
        );
    }
});

class ChildNode extends React.Component {
    // è¿™é‡Œä¸ºäº†æ–¹ä¾¿, æ²¡æœ‰ constructor, å› ä¸ºæ²¡æœ‰è®¾ç½®props

    render() {
        return (
            &lt;ol&gt;
                {// React.Children å·¥å…·ç±», è¿˜æœ‰å¾ˆå¤šå·¥å…·æ–¹æ³•, å‚è§æ–‡æ¡£
                React.Children.map(this.props.children, function(child) {
                    return &lt;li&gt;{child}&lt;/li&gt;;
                })}
            &lt;/ol&gt;
        );
    }
}

const ChildNode = props =&gt; (
    &lt;ol&gt;
        {// React.Children å·¥å…·ç±», è¿˜æœ‰å¾ˆå¤šå·¥å…·æ–¹æ³•, å‚è§æ–‡æ¡£
        React.Children.map(props.children, function(child) {
            return &lt;li&gt;{child}&lt;/li&gt;;
        })}
    &lt;/ol&gt;
);
ReactDOM.render(
    &lt;ChildNode&gt;
        &lt;div&gt;test childNode div1&lt;/div&gt;
        &lt;div&gt;test childNode div2&lt;/div&gt;
    &lt;/ChildNode&gt;,
    document.getElementById(&quot;childNode&quot;)
);

// ---------------------------------------------------------
</code></pre>
<h3><a class="header" href="#æ‰¾åˆ°çœŸå®çš„-domthisrefxxx" id="æ‰¾åˆ°çœŸå®çš„-domthisrefxxx">æ‰¾åˆ°çœŸå®çš„ dom(this.ref.xxx)</a></h3>
<pre><code class="language-js">/**********************************
        demo3: find a DOM node æ‰¾åˆ°çœŸå®çš„dom
*************************************/

/* find a DOM node æ‰¾åˆ°çœŸå®çš„dom */

var TrueDom = React.createClass({
    render: function() {
        return (
            &lt;div&gt;
                &lt;input type=&quot;text&quot; ref=&quot;textInput&quot; /&gt;
                &lt;input
                    type=&quot;button&quot;
                    value=&quot;click to focus&quot;
                    onClick={this.handleClick}
                /&gt;
            &lt;/div&gt;
        );
    },
    handleClick: function() {
        // onclick äº‹ä»¶ä¿è¯äº†åªæœ‰è™šæ‹Ÿdomæ’å…¥documentåæ‰ä¼šä½¿ç”¨this.refså±æ€§, å°±åƒæ”¾å…¥åˆ°äº† lifeCycleæ–¹æ³•componentDidMountä¸­ä¸€æ ·
        this.refs.textInput.focus();
    }
});

class TrueDom extends React.Component {
    constructor(props) {
        super(props);
        this.state = {};
        // ä¸ ES5 React.createClass({}) ä¸åŒçš„æ˜¯ component å†…è‡ªå®šä¹‰çš„æ–¹æ³•éœ€è¦è‡ªè¡Œç»‘å®šåˆ° this context, å¦‚æœå»æ‰, ä¼šæ‰¾ä¸åˆ°ç›¸åº”çš„refs
        this.handleClick = this.handleClick.bind(this);
    }
    render() {
        return (
            &lt;div&gt;
                &lt;input type=&quot;text&quot; ref=&quot;textInput&quot; /&gt;
                &lt;input
                    type=&quot;button&quot;
                    value=&quot;click to focus&quot;
                    onClick={this.handleClick}
                /&gt;
            &lt;/div&gt;
        );
    }
    handleClick() {
        this.refs.textInput.focus();
    }
}
ReactDOM.render(&lt;TrueDom&gt;&lt;/TrueDom&gt;, document.getElementById(&quot;trueDom&quot;));

// -------------------------------------------------------------------
</code></pre>
<h3><a class="header" href="#ä½¿ç”¨-statethisstate" id="ä½¿ç”¨-statethisstate">ä½¿ç”¨ state(this.state)</a></h3>
<pre><code class="language-js">/*************************************
        demo4: çŠ¶æ€ this.state
***************************************/

/* çŠ¶æ€ this.state */

var MyState = React.createClass({
    getInitialState: function() {
        // å®šä¹‰åˆå§‹çŠ¶æ€çš„state, getInitialState æ–¹æ³•ç”¨äºå®šä¹‰åˆå§‹çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å¯ä»¥é€šè¿‡ this.state å±æ€§è¯»å–
        return {
            liked: false
        };
    },
    render: function() {
        var text = this.state.liked ? &quot;like&quot; : &quot;è¿˜æ²¡æœ‰å¼€å§‹å–œæ¬¢&quot;;
        // æ ·å¼: ç¬¬ä¸€é‡å¤§æ‹¬å·è¡¨ç¤ºè¿™æ˜¯ JavaScript è¯­æ³•ï¼Œç¬¬äºŒé‡å¤§æ‹¬å·è¡¨ç¤ºæ ·å¼å¯¹è±¡
        return (
            &lt;p onClick={this.handleClick}&gt;
                ä½ &lt;span style={{ color: &quot;red&quot; }}&gt;{text}&lt;/span&gt;è¿™é‡Œ(ç‚¹å‡»åˆ‡æ¢)
            &lt;/p&gt;
        );
    },
    handleClick: function() {
        // æ”¹å˜state
        this.setState({
            liked: !this.state.liked
        });
    }
});

class MyState extends React.Component {
    constructor(props) {
        super(props);
        this.handleClick = this.handleClick.bind(this);
        this.state = {
            liked: false
        };
    }
    render() {
        var text = this.state.liked ? &quot;like&quot; : &quot;è¿˜æ²¡æœ‰å¼€å§‹å–œæ¬¢&quot;;
        // æ ·å¼: ç¬¬ä¸€é‡å¤§æ‹¬å·è¡¨ç¤ºè¿™æ˜¯ JavaScript è¯­æ³•ï¼Œç¬¬äºŒé‡å¤§æ‹¬å·è¡¨ç¤ºæ ·å¼å¯¹è±¡
        return (
            &lt;p onClick={this.handleClick}&gt;
                ä½ &lt;span style={{ color: &quot;red&quot; }}&gt;{text}&lt;/span&gt;è¿™é‡Œ(ç‚¹å‡»åˆ‡æ¢)
            &lt;/p&gt;
        );
    }
    handleClick() {
        this.setState({
            liked: !this.state.liked
        });
    }
}
ReactDOM.render(&lt;MyState&gt;&lt;/MyState&gt;, document.getElementById(&quot;myState&quot;));
</code></pre>
<h3><a class="header" href="#ä¸€ä¸ªè¡¨å•ç¤ºä¾‹" id="ä¸€ä¸ªè¡¨å•ç¤ºä¾‹">ä¸€ä¸ªè¡¨å•ç¤ºä¾‹</a></h3>
<pre><code class="language-js">/* è¡¨å• */

var Form = React.createClass({
    getInitialState: function() {
        return {
            value: &quot;hello&quot;
        };
    },
    handleChange: function(event) {
        // å¤„ç†å˜åŒ–äº‹ä»¶, æ³¨æ„æœ‰æ–¹æ³•å‚æ•°: event, event.target.value è¯»å–ç”¨æˆ·è¾“å…¥çš„å€¼
        this.setState({
            value: event.target.value
        });
    },
    render: function() {
        // this.props è¡¨ç¤ºé‚£äº›ä¸€æ—¦å®šä¹‰ï¼Œå°±ä¸å†æ”¹å˜çš„ç‰¹æ€§ï¼Œè€Œ this.state æ˜¯ä¼šéšç€ç”¨æˆ·äº’åŠ¨è€Œäº§ç”Ÿå˜åŒ–çš„ç‰¹æ€§ã€‚
        var value = this.state.value;
        return (
            &lt;div&gt;
                &lt;input type=&quot;text&quot; value={value} onChange={this.handleChange} /&gt;
                &lt;p&gt;{value}&lt;/p&gt;
            &lt;/div&gt;
        );
    }
});

class Form extends React.Component {
    constructor(props) {
        super(props);
        this.state = {
            value: &quot;hello&quot;
        };
        this.handleChange = this.handleChange.bind(this);
    }
    handleChange(event) {
        // æœ‰eventå‚æ•°, å¦åˆ™æŠ¥é”™: ... is changing a controlled input of type text to be uncontrolled
        this.setState({
            value: event.target.value
        });
    }
    render() {
        // this.props è¡¨ç¤ºé‚£äº›ä¸€æ—¦å®šä¹‰ï¼Œå°±ä¸å†æ”¹å˜çš„ç‰¹æ€§ï¼Œè€Œ this.state æ˜¯ä¼šéšç€ç”¨æˆ·äº’åŠ¨è€Œäº§ç”Ÿå˜åŒ–çš„ç‰¹æ€§ã€‚
        var value = this.state.value;
        return (
            &lt;div&gt;
                &lt;input type=&quot;text&quot; value={value} onChange={this.handleChange} /&gt;
                &lt;p&gt;{value}&lt;/p&gt;
            &lt;/div&gt;
        );
    }
}
ReactDOM.render(&lt;Form&gt;&lt;/Form&gt;, document.getElementById(&quot;form&quot;));
</code></pre>
<h3><a class="header" href="#ç™»å½•ç•Œé¢" id="ç™»å½•ç•Œé¢">ç™»å½•ç•Œé¢</a></h3>
<p>https://www.jianshu.com/p/efc080e6ecd9 //todo</p>
<h3><a class="header" href="#todo-list-app" id="todo-list-app">todo list app</a></h3>
<p>https://www.jianshu.com/p/523eb1fc1504 //todo</p>
<h1><a class="header" href="#ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ" id="ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ">ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</a></h1>
<h2><a class="header" href="#ç”Ÿå‘½å‘¨æœŸä»‹ç»" id="ç”Ÿå‘½å‘¨æœŸä»‹ç»">ç”Ÿå‘½å‘¨æœŸä»‹ç»</a></h2>
<p>http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/ ----- äº¤äº’å¼çš„æ¼”ç¤º</p>
<p><img src="./Snipaste_2019-10-22_21-00-02.png" alt="" /></p>
<p>Component å°±åƒä¸ªçŠ¶æ€æœºï¼ˆState Machineï¼‰ï¼Œæ ¹æ®ä¸åŒçš„ stateï¼ˆå¯é€šè¿‡<code>setState()</code> ä¿®æ”¹ï¼‰å’Œ propsï¼ˆç”±çˆ¶å…ƒç´ ä¼ å…¥ï¼‰ï¼ŒComponent ä¼šå‡ºç°å¯¹åº”çš„æ˜¾ç¤ºç»“æœã€‚</p>
<p>å°±åƒæ˜¯ è®¾è®¡æ¨¡å¼ä¸­çš„æ¨¡æ¿æ–¹æ³•æ¨¡å¼, react æä¾›ç»™æˆ‘ä»¬ä¸€ç³»åˆ— æ¨¡æ¿æ–¹æ³•, è¿™äº›æ¨¡æ¿æ–¹æ³•ä¸­çš„å†…å®¹ ä¼šåœ¨ç»„ä»¶ç”Ÿå‘½å‘¨æœŸä¸­çš„æŸä¸ªé˜¶æ®µè¢«è°ƒç”¨</p>
<p>ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå¤§è‡´å¯åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µ:</p>
<ul>
<li>render é˜¶æ®µ: çº¯å‡€æ— å‰¯ä½œç”¨, æ¸²æŸ“çš„æ˜¯ virtual dom</li>
<li>pre-commit é˜¶æ®µ: å°† state è½¬æ¢ä¸º dom æ“ä½œ, è¿™æ—¶è¿˜æ²¡æœ‰æ‰§è¡Œ dom æ“ä½œ, çœŸå® dom ä¸­çš„èŠ‚ç‚¹è¿˜æ˜¯æ¥è‡ªä¸Šä¸€ç‰ˆ state/props </li>
<li>commit é˜¶æ®µ: æ‰§è¡Œ dom æ“ä½œ, å°† virtual dom çœŸå®åæ˜ åˆ°çœŸå® dom ä¸Š (è¿™æ—¶ å¯ä»¥ä½¿ç”¨æ›´æ–°åçš„ dom èŠ‚ç‚¹æ‰§è¡Œä¸€äº›è‡ªå®šä¹‰æ“ä½œ)</li>
</ul>
<p>å¯¹äºä¸€ä¸ªç»„ä»¶, å¯èƒ½æ¥æ”¶ä¸‰ç§æ“ä½œ, å› æ­¤ api ä¹Ÿå¯ä»¥åˆ†ä¸ºä¸‰ç±»:</p>
<ul>
<li>è¢«æŒ‚è½½</li>
<li>è¢«æ›´æ–°</li>
<li>è¢«å¸è½½</li>
</ul>
<h2><a class="header" href="#ç»„ä»¶è¢«æŒ‚è½½" id="ç»„ä»¶è¢«æŒ‚è½½">ç»„ä»¶è¢«æŒ‚è½½</a></h2>
<p>ä¾æ¬¡æ‰§è¡Œè¿™äº›æ–¹æ³•</p>
<ol>
<li>
<p>constructor(props)  ä¼šåœ¨åˆ›å»º ç»„ä»¶æ—¶ (è¢«æŒ‚è½½ä¹‹å‰) è°ƒç”¨, ç”¨äºåˆå§‹åŒ– state, è¿˜æœ‰ç»„ä»¶æ–¹æ³•çš„ binding</p>
<ul>
<li>
<p>å¦‚æœç»„ä»¶æœ‰çˆ¶ç±», é¦–å…ˆéœ€è¦ <code>super(props)</code></p>
</li>
<li>
<p>å¦‚æœ ç»„ä»¶æ˜¯ functional component, åˆ™ä¸éœ€è¦ æ„é€ å‡½æ•° (å› ä¸ºæ²¡æœ‰å†…çŠ¶æ€)</p>
</li>
<li>
<p>å”¯ä¸€å¯ä»¥ç›´æ¥ä¿®æ”¹ state å¯¹è±¡çš„åœ°æ–¹ (é€šè¿‡ <code>this.state</code>), å…¶ä»–åœ°æ–¹æƒ³è¦ä¿®æ”¹ state éœ€è¦é€šè¿‡ <code>setState()</code>.</p>
</li>
<li>
<p>è¦é¿å…åœ¨æ„é€ å‡½æ•°ä¸­å¼•å…¥ä»»ä½•å‰¯ä½œç”¨(å¦‚ è·å–å¤–éƒ¨æ•°æ®), <code>componentDidMount</code> æ‰æ˜¯åº”è¯¥å¹²è¿™äº›äº‹çš„åœ°æ–¹</p>
</li>
<li>
<p>é¿å…å°† props çš„æŸä¸ªå€¼å¤åˆ¶ç»™ state, å› ä¸ºæ›´æ–° props çš„å€¼å¹¶ä¸ä¼šå°†è¿™ä¸ªå€¼åŒæ­¥æ›´è¡Œåˆ° state ä¸­. å¯ä»¥ç›´æ¥ä½¿ç”¨ this.props.xxx</p>
</li>
</ul>
</li>
<li>
<p>(ä¸å¸¸ç”¨ )static getDerivedStateFromProps(props, state) æ¯æ¬¡ render() å‰éƒ½ä¼šè§¦å‘ ; è¿”å›ä¸€ä¸ªå¯¹è±¡æ¥æ›´æ–° state ,å¦‚æœè¿”å› null åˆ™ä¸æ›´æ–°ä»»ä½•å†…å®¹ ; (<a href="https://zh-hans.reactjs.org/docs/react-component.html#static-getderivedstatefromprops">ref</a>)//todo</p>
<ul>
<li>
<p>å¦‚: state éœ€è¦ä» props è®¡ç®—å¾—å‡ºæ—¶, å¯ä»¥ä½¿ç”¨ ;</p>
<p>æ¯”å¦‚: è¡¨å•æ§ä»¶è·å–é»˜è®¤åˆå§‹å€¼ (æ­¤æ—¶ state ä¸­çš„è¡¨å•é¡¹é»˜è®¤å€¼æ˜¯é€šè¿‡ props ä¼ å…¥çš„)</p>
</li>
<li>
<p>ä¸æ¨èä½¿ç”¨ ( å› ä¸º æ‰‹åŠ¨ç»´æŠ¤ state å’Œ props çš„å¯¹åº”å…³ç³»å¢åŠ äº†å¤æ‚æ€§ )</p>
</li>
</ul>
</li>
<li>
<p>render() æ¸²æŸ“ ui, å”¯ä¸€å¿…é¡»å®ç°çš„æ–¹æ³•; æ¯æ¬¡ state å˜åŒ–, éƒ½ä¼šè§¦å‘</p>
<ul>
<li>
<p>è¿”å›å€¼åªæœ‰å››ç§:</p>
<p>react å…ƒç´ . (åŸç”Ÿè¿˜æ˜¯é€šè¿‡ jsx è‡ªå®šä¹‰å‡å¯)</p>
<p>æ•°ç»„ or <a href="https://zh-hans.reactjs.org/docs/fragments.html">fragments</a> //todo</p>
<p><a href="https://zh-hans.reactjs.org/docs/portals.html">Portals</a> //todo</p>
<p>å­—ç¬¦ä¸² or æ•°å­— (åœ¨çœŸå® dom ä¸­ä¼šè¢«æ¸²æŸ“æˆæ–‡æœ¬èŠ‚ç‚¹)</p>
<p>boolean ç±»å‹ or null (ç”¨äºæ”¯æŒè¿”å› test &amp;&amp;  <code>&lt;Child /&gt;</code> çš„æ¨¡å¼)</p>
</li>
<li>
<p>åº”è¯¥ä¸º pure function, ä¿è¯æ¸²æŸ“ç»“æœä»…ä»…å’Œ state æœ‰å…³</p>
</li>
<li>
<p>è‹¥ shouldComponentUpdate() è¿”å› falseï¼Œåˆ™ä¸ä¼šè°ƒç”¨ render()</p>
</li>
</ul>
</li>
<li>
<p>React æ›´æ–° çœŸå® Â­DÂ­OÂ­M å’Œ refs</p>
</li>
<li>
<p>componentDidMount() è¿›è¡Œä¾èµ–äº dom èŠ‚ç‚¹ çš„åˆå§‹åŒ–æ“ä½œ; ä¼šåœ¨ç»„ä»¶æŒ‚è½½å (è¢«æ’å…¥ dom æ ‘ä¸­) è°ƒç”¨</p>
<ul>
<li>
<p>å¦‚: é€šè¿‡ ajax è·å–æ•°æ®; æ·»åŠ è®¢é˜… (ä¸è¦å¿˜è®°åœ¨ componentWillUnmount() é‡Œå–æ¶ˆè®¢é˜…)</p>
</li>
<li>
<p>å¯ä»¥ç›´æ¥è°ƒç”¨ setState() è§¦å‘æ¸²æŸ“, ä½†æ­¤æ¸²æŸ“ä¼šå‘ç”Ÿåœ¨æµè§ˆå™¨æ›´æ–°å±å¹•ä¹‹å‰ (å› æ­¤ç”¨æˆ·ä¸ä¼šæ„ŸçŸ¥åˆ°ä¸¤æ¬¡æ¸²æŸ“)</p>
</li>
<li>
<p>æ•´ä¸ªç”Ÿå‘½å‘¨æœŸåªæ‰§è¡Œä¸€æ¬¡</p>
</li>
</ul>
</li>
</ol>
<pre><code class="language-js">constructor(props) {
    super(props);
    // ä¸è¦åœ¨è¿™é‡Œè°ƒç”¨ this.setState()
    this.state = { counter: 0 };
    this.handleClick = this.handleClick.bind(this);
}
</code></pre>
<h2><a class="header" href="#ç»„ä»¶è¢«å¸è½½" id="ç»„ä»¶è¢«å¸è½½">ç»„ä»¶è¢«å¸è½½</a></h2>
<ol>
<li>
<p>componentWillUnMount() ä¼šåœ¨ç»„ä»¶å¸è½½ä¹‹å‰è°ƒç”¨; å¯ä»¥ æ­¤æ–¹æ³•ä¸­æ‰§è¡Œå¿…è¦çš„æ¸…ç†æ“ä½œ, ç”¨äºèµ„æºé‡Šæ”¾</p>
<ul>
<li>
<p>ä¾‹å¦‚ï¼Œæ¸…é™¤ timerï¼Œå–æ¶ˆç½‘ç»œè¯·æ±‚æˆ–æ¸…é™¤åœ¨ componentDidMount() ä¸­åˆ›å»ºçš„è®¢é˜…</p>
</li>
<li>
<p>ä¸åº”è°ƒç”¨ setState()ï¼Œå› ä¸ºè¯¥ç»„ä»¶å³å°†è¢«å¸è½½, å°†æ°¸è¿œä¸ä¼šé‡æ–°æ¸²æŸ“</p>
</li>
</ul>
</li>
</ol>
<h2><a class="header" href="#ç»„ä»¶è¢«æ›´æ–°" id="ç»„ä»¶è¢«æ›´æ–°">ç»„ä»¶è¢«æ›´æ–°</a></h2>
<ol>
<li>
<p>static getDerivedStateFromProps(props, state)</p>
</li>
<li>
<p>(ä¸å¸¸ç”¨) shouldComponentUpdate(nextProps, nextState) åœ¨ state/props å‘ç”Ÿå˜åŒ–å, render() å‰è§¦å‘; ç”¨æ¥è‡ªå®šä¹‰åˆ¤æ–­ç»„ä»¶æ˜¯å¦éœ€è¦é‡æ–°æ¸²æŸ“</p>
<ul>
<li>
<p>é»˜è®¤è¿”å›å€¼ä¸º true, ä¹Ÿå°±æ˜¯ state æ¯æ¬¡å‘ç”Ÿå˜åŒ–ç»„ä»¶éƒ½ä¼šé‡æ–°æ¸²æŸ“, å¤§å¤šæ•°æ—¶å€™é»˜è®¤å³å¯</p>
</li>
<li>
<p>é¦–æ¬¡æ¸²æŸ“æˆ– or ç”¨ forceUpdate() æ—¶ä¸ä¼šè°ƒç”¨è¯¥æ–¹æ³•, è¡¨ç¤ºä¸€å¾‹æ¸²æŸ“</p>
</li>
<li>
<p><a href="https://zh-hans.reactjs.org/docs/react-component.html#shouldcomponentupdate">æ€§èƒ½è°ƒä¼˜</a></p>
<p>å¯ä»¥ä½¿ç”¨ Pure Component, é»˜è®¤å®ç°äº†è¿™ä¸ªæ–¹æ³•, åªå¯¹ props/state è¿›è¡Œæµ…å±‚æ¯”è¾ƒ, é€‚ç”¨äº props/state æ•°æ®ç»“æ„ç®€å•çš„æƒ…å†µ</p>
<p>æ‰‹åŠ¨ç¼–å†™æ­¤å‡½æ•°: æ¯”å¯¹å‰åçš„ state/props, è¿”å› falseä»¥å‘ŠçŸ¥ React å¯ä»¥è·³è¿‡æ›´æ–°, è¿”å› false å¹¶ä¸ä¼šé˜»æ­¢å­ç»„ä»¶åœ¨ state æ›´æ”¹æ—¶é‡æ–°æ¸²æŸ“ã€‚react ä¸æ¨è è¿›è¡Œæ·±å±‚æ¯”è¾ƒ,ä¼šæŸå®³æ€§èƒ½ã€‚</p>
<p>è‹¥é‡‡ç”¨ immutable å¯ä»¥ä½¿ç”¨ nextProps === this.props æ¯”å¯¹æ˜¯å¦æœ‰å˜åŠ¨ï¼š</p>
</li>
</ul>
</li>
<li>
<p>render()</p>
</li>
<li>
<p>(ä¸å¸¸ç”¨) getSnapshotBeforeUpdate(prevProps, prevState) åœ¨ render() å, åœ¨æ¸²æŸ“è¾“å‡ºåˆ°çœŸå® dom å‰è§¦å‘; ç”¨äºåœ¨ç»„ä»¶å‘ç”Ÿæ›´æ”¹ä¹‹å‰ä» DOM ä¸­æ•è·ä¸€äº›ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼Œæ»šåŠ¨ä½ç½®ï¼‰</p>
<ul>
<li>
<p>æ­¤æ—¶ state å·²ç»æ›´æ–°äº†</p>
</li>
<li>
<p>è¿”å›å€¼å°†ä½œä¸ºæœ€åä¸€ä¸ªå‚æ•°ä¼ é€’ç»™ componentDidUpdate(prevProps, prevState, [snapshot])ã€‚åº”è¿”å› snapshot çš„å€¼ï¼ˆæˆ– nullï¼‰</p>
</li>
<li>
<p>ä¸€èˆ¬å‡ºç°åœ¨uiå¤„ç†ä¸­</p>
</li>
</ul>
</li>
<li>
<p>React æ›´æ–° çœŸå® Â­DÂ­OÂ­M å’Œ refs</p>
</li>
<li>
<p>componentDidUpdate(prevProps, prevState, [snapshot]) åœ¨æ¸²æŸ“è¾“å‡ºåˆ°çœŸå®domåè§¦å‘, é¦–æ¬¡æ¸²æŸ“ä¸ä¼šæ‰§è¡Œæ­¤æ–¹æ³•; ç”¨æ¥å¯¹æ›´æ–°åçš„ dom è¿›è¡Œæ“ä½œ</p>
<ul>
<li>
<p>åœºæ™¯: é¡µé¢éœ€è¦æ ¹æ® props å˜åŒ–æ¥é‡æ–°è·å–æ•°æ® (å¦‚å½“ props æœªå‘ç”Ÿå˜åŒ–æ—¶ï¼Œåˆ™ä¸æ‰§è¡Œç½‘ç»œè¯·æ±‚)</p>
</li>
<li>
<p>åœ°ä½ç±»ä¼¼ ç»„ä»¶è¢«æŒ‚è½½æ—¶çš„ componentDidMount()</p>
</li>
<li>
<p>å¯ä»¥ç›´æ¥è°ƒç”¨ setState()ï¼Œä½†å®ƒå¿…é¡»è¢«åŒ…è£¹åœ¨ä¸€ä¸ªæ¡ä»¶è¯­å¥ï¼Œå¦åˆ™ä¼šå¯¼è‡´æ­»å¾ªç¯</p>
</li>
<li>
<p>ç¬¬ä¸‰ä¸ªå‚æ•° æ˜¯ getSnapshotBeforeUpdate() çš„è¿”å›å€¼, å¯èƒ½ä¸º undefined</p>
</li>
<li>
<p>å¦‚æœ shouldComponentUpdate() è¿”å›å€¼ä¸º falseï¼Œåˆ™ä¸ä¼šè°ƒç”¨ componentDidUpdate()</p>
</li>
</ul>
</li>
</ol>
<pre><code class="language-js">class ScrollingList extends React.Component {
  constructor(props) {
    super(props);
    this.listRef = React.createRef();
  }

  getSnapshotBeforeUpdate(prevProps, prevState) {
    // æˆ‘ä»¬æ˜¯å¦åœ¨ list ä¸­æ·»åŠ æ–°çš„ items ï¼Ÿ
    // æ•è·æ»šåŠ¨â€‹â€‹ä½ç½®ä»¥ä¾¿æˆ‘ä»¬ç¨åè°ƒæ•´æ»šåŠ¨ä½ç½®ã€‚
    if (prevProps.list.length &lt; this.props.list.length) {
      const list = this.listRef.current;
      return list.scrollHeight - list.scrollTop;
    }
    return null;
  }

  componentDidUpdate(prevProps, prevState, snapshot) {
    // å¦‚æœæˆ‘ä»¬ snapshot æœ‰å€¼ï¼Œè¯´æ˜æˆ‘ä»¬åˆšåˆšæ·»åŠ äº†æ–°çš„ itemsï¼Œ
    // è°ƒæ•´æ»šåŠ¨ä½ç½®ä½¿å¾—è¿™äº›æ–° items ä¸ä¼šå°†æ—§çš„ items æ¨å‡ºè§†å›¾ã€‚
    //ï¼ˆè¿™é‡Œçš„ snapshot æ˜¯ getSnapshotBeforeUpdate çš„è¿”å›å€¼ï¼‰
    if (snapshot !== null) {
      const list = this.listRef.current;
      list.scrollTop = list.scrollHeight - snapshot;
    }

    // å…¸å‹ç”¨æ³•ï¼ˆä¸è¦å¿˜è®°æ¯”è¾ƒ propsï¼‰ï¼š
    if (this.props.userID !== prevProps.userID) {
        this.fetchData(this.props.userID);
    }

  }

  render() {
    return (
      &lt;div ref={this.listRef}&gt;{/* ...contents... */}&lt;/div&gt;
    );
  }
}
</code></pre>
<h2><a class="header" href="#ç”Ÿå‘½å‘¨æœŸå‡½æ•°-demo" id="ç”Ÿå‘½å‘¨æœŸå‡½æ•°-demo">ç”Ÿå‘½å‘¨æœŸå‡½æ•° demo</a></h2>
<p>demo1: ä¸€ä¸ªå®šæ—¶æµ®ç°éšè—çš„å›¾æ ‡</p>
<pre><code class="language-js">var Hello = React.createClass({
    getInitialState: function() {
        return {
            opacity: 1.0
        };
    },

    componentDidMount: function() {
        // è®¾å®š å®šæ—¶å™¨
        this.timer = setInterval(
            function() {
                var opacity = this.state.opacity;
                opacity -= 0.05;
                if (opacity &lt; 0.1) {
                    opacity = 1.0;
                }
                this.setState({
                    opacity: opacity
                });
            }.bind(this),
            100
        ); // æ¯éš”100ms, å°±é‡æ–°è®¾ç½®ç»„ä»¶çš„é€æ˜åº¦ï¼Œä»è€Œå¼•å‘é‡æ–°æ¸²æŸ“
        // å›è°ƒå‡½æ•°ä¸€å®šè¦åŠ .bind(this)æ–¹æ³•ï¼ŒåŸå› æ˜¯ï¼šåœ¨setInterval()ä¸­å®šä¹‰çš„å›è°ƒå‡½æ•°ï¼Œæ˜¯åœ¨åŒæ­¥ä»£ç æ‰§è¡Œå®Œåï¼Œéšç€äº‹ä»¶è§¦å‘æ¥å¼‚æ­¥æ‰§è¡Œçš„ï¼Œ
        // æ­¤æ—¶å‡½æ•°çš„ä¸Šä¸‹æ–‡Contextå·²ç»ç”±å®šä¹‰è¯¥å‡½æ•°çš„Scriptæ–‡ä»¶å˜ä¸ºå…¨å±€å˜é‡ï¼Œ
        // å¦‚æœä¸é€šè¿‡bind(this)æ¥æŒ‡å®šç”±ç»„ä»¶å®ä¾‹ä½œä¸ºä¸Šä¸‹æ–‡çš„è¯ï¼Œå›è°ƒå‡½æ•°ä¸­çš„thisä¼šæŒ‡å‘å…¨å±€å˜é‡ä¸­çš„Windowå˜é‡ï¼Œæ˜¾ç„¶ä¸å¯¹
    },

    render: function() {
        // æ ·å¼: å†™æˆ style=&quot;opacity:{this.state.opacity};&quot; æ˜¯é”™è¯¯çš„
        return (
            &lt;div&gt;
                Hello {this.props.name}{&quot; &quot;}
                &lt;span style={{ opacity: this.state.opacity }}&gt;ğŸ‘ˆ&lt;/span&gt;
            &lt;/div&gt;
        );
    }
});
class Hello extends React.Component {
    constructor(props) {
        super(props);
        this.state = {
            opacity: 1.0
        };
        this.intervalCallback = this.intervalCallback.bind(this); // éœ€è¦bindåˆ°å½“å‰ç»„ä»¶(é»˜è®¤æ˜¯ç»‘å®šåˆ°å…¨å±€window), å¦åˆ™æŠ¥é”™: Cannot read property 'opacity' of undefined
    }
    render() {
        return (
            &lt;div&gt;
                Hello {this.props.name}{&quot; &quot;}
                &lt;span style={{ opacity: this.state.opacity }}&gt;ğŸ‘ˆ&lt;/span&gt;
            &lt;/div&gt;
        );
    }
    componentDidMount() {
        this.timer = setInterval(this.intervalCallback, 100);
    }
    intervalCallback() {
        var opacity = this.state.opacity;
        opacity -= 0.05;
        if (opacity &lt; 0.1) {
            opacity = 1.0;
        }
        this.setState({
            opacity: opacity
        });
    }
}

ReactDOM.render(&lt;Hello name=&quot;world&quot; /&gt;, document.getElementById(&quot;lifeCycle&quot;));
</code></pre>
<h1><a class="header" href="#virtual-dom-å’Œ-diff-ç®—æ³•" id="virtual-dom-å’Œ-diff-ç®—æ³•">virtual dom å’Œ diff ç®—æ³•</a></h1>
<h2><a class="header" href="#virtual-dom" id="virtual-dom">virtual dom</a></h2>
<p>å¦‚æœæœ‰å¤§é¢ç§¯çš„æ“ä½œ DOMï¼Œæ€§èƒ½ä¼šæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼Œæ‰€ä»¥ React å®ç°äº†ä¸€ä¸ª<em>Virtual DOM</em>ï¼Œå……å½“æµè§ˆå™¨çœŸå® dom å’Œ react ä¹‹é—´çš„ä¸­é—´å±‚</p>
<p>è¿™ä¸ª Virtual DOM æ˜¯ä¸€ä¸ªçº¯ç²¹çš„ JS æ•°æ®ç»“æ„ï¼Œåœ¨è¿™ä¸ªç»“æ„ä¸Š, å®ç°äº† diff ç®—æ³•</p>
<h2><a class="header" href="#react-çš„-diff-ç®—æ³•" id="react-çš„-diff-ç®—æ³•">react çš„ diff ç®—æ³•</a></h2>
<p>å¤æ‚åº¦ O(n)</p>
<p>æ‹¿åˆ°å‰åä¸¤ä¸ªçŠ¶æ€çš„ virtual dom æ ‘å, ä¼šä¸€å±‚ä¸€å±‚å¯¹æ¯ä¸ªèŠ‚ç‚¹è¿›è¡Œæ¯”è¾ƒ; </p>
<p>å¹¶ä¸”åªä¼šå¯¹æ¯”åŒä¸€å±‚çš„èŠ‚ç‚¹. å¯¹äºè·¨å±‚çº§çš„å·®å¼‚, ä¼šé‡‡ç”¨ æ–°å»º + åˆ é™¤ æ“ä½œ, ä¸ä¼šéå†æ¯”è¾ƒå­èŠ‚ç‚¹</p>
<ul>
<li>
<p>å¦‚æœæŸä¸€å±‚, å¯¹æ¯”å‰åçŠ¶æ€å‘ç°, åªæ˜¯èŠ‚ç‚¹é¡ºåºå˜åŒ–, åˆ™æ“ä½œçœŸå® dom, äº¤æ¢èŠ‚ç‚¹é¡ºåº,</p>
</li>
<li>
<p>å¦‚æœæŸä¸€å±‚, å‰åçŠ¶æ€ æŸèŠ‚ç‚¹æ¶ˆå¤±ä¸è§ or æ–°å¢, åˆ™åœ¨çœŸå® dom ä¸Š, ç›´æ¥åˆ é™¤/æ–°å¢è¯¥èŠ‚ç‚¹åŠæ‰€æœ‰å­èŠ‚ç‚¹. è¿™æ ·å‡å°‘äº†å¾ˆå¤šä¸å¿…è¦çš„éå†.</p>
</li>
<li>
<p>å¦‚æœæŸä¸€å±‚, å‘ç”ŸèŠ‚ç‚¹è·¨å±‚ç§»åŠ¨, æ¯”å¦‚: å‰åçŠ¶æ€,å‘ç° å­èŠ‚ç‚¹ node1 ç§»åŠ¨åˆ° å…„å¼ŸèŠ‚ç‚¹ node2 ä¸‹äº†, é‚£ä¹ˆ diff ç®—æ³•ä¼šåœ¨ node2 ä¸‹åˆ›å»º node1 åŠå…¶å­ç»“ç‚¹, åˆ›å»ºæˆåŠŸå, ç„¶åç›´æ¥åˆ é™¤ node1 (æ–°å»º + åˆ é™¤)</p>
</li>
</ul>
<p>===================å¯¹äºæ‹¥æœ‰ä¸åŒ class çš„2ä¸ªç»„ä»¶</p>
<p>react æ ¹æœ¬ä¸ä¼šèµ°åˆ° diff æ¯”è¾ƒ virtual dom è¿™ä¸€æ­¥:</p>
<ul>
<li>
<p>æ‹¥æœ‰ä¸åŒç±»çš„ä¸¤ä¸ªç»„ä»¶æœ‰ç‰¹æ®Šè§„åˆ™: å‰åä¸¤ä¸ªç»„ä»¶å°†ä¼šç”Ÿæˆä¸åŒçš„ dom æ ‘ç»“æ„ï¼Œå½“ react åˆ¤æ–­ç»„ä»¶ä¸º dirty componentï¼Œä»è€Œæ›¿æ¢æ•´ä¸ªç»„ä»¶ä¸‹æ‰€æœ‰å­èŠ‚ç‚¹</p>
<p>å¦‚: åœ¨å¼€å‘ä¸­æˆ‘ä»¬éœ€è¦å°† A ç»„ä»¶æ¢æˆ B ç»„ä»¶ï¼ŒA ä¸ B ä¸æ˜¯åŒç±»ç»„ä»¶æ—¶ï¼Œreact ä¼šæ¯«ä¸çŠ¹è±«çš„åˆ é™¤ Aï¼Œæ–°å»º B åŠå…¶å­èŠ‚ç‚¹ã€‚ä¸ç®¡ A ä¸ B æ˜¯å¦æœ‰ç›¸åŒçš„ç»“æ„</p>
<p>å¸¦æ¥çš„é—®é¢˜: å‡å¦‚ä¸åŒçš„ç±»ï¼Œä½†æ˜¯ç»“æ„ç›¸ä¼¼çš„ç»„ä»¶ç›¸äº’æ›¿æ¢ï¼Œå°†ä¼šå¤§å¤§å½±å“ react æ€§èƒ½ã€‚</p>
<p>å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢, é€šè¿‡ shouldComponentUpdate()æ¥æ‰‹åŠ¨åˆ¤æ–­æ˜¯å¦éœ€è¦æ›´æ–°ç»„ä»¶</p>
</li>
</ul>
<h2><a class="header" href="#key-å±æ€§æœ‰ä»€ä¹ˆä½œç”¨" id="key-å±æ€§æœ‰ä»€ä¹ˆä½œç”¨">key å±æ€§æœ‰ä»€ä¹ˆä½œç”¨</a></h2>
<p>keyå±æ€§ ç”¨æ¥å”¯ä¸€æ ‡è¯†ä¸€ä¸ªç»„ä»¶, è‹¥æ¸²æŸ“å‰åç»„ä»¶å…·æœ‰ç›¸åŒçš„key åˆ™ reactè®¤ä¸ºæ˜¯åŒä¸€ä¸ªç»„ä»¶</p>
<ul>
<li>
<p>å¦‚æœæ¸²æŸ“å‰åæŸä¸ªå…ƒç´ å…·æœ‰ç›¸åŒkey, è‹¥å…ƒç´ å±æ€§æœ‰æ‰€å˜åŒ–ï¼Œåˆ™Reactåªæ›´æ–°è¯¥ç»„ä»¶å¯¹åº”çš„å±æ€§, ä¸æ¶‰åŠç»„ä»¶çš„æŒ‚è½½å¸è½½ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œæ€§èƒ½å¼€é”€ä¼šç›¸å¯¹è¾ƒå°</p>
</li>
<li>
<p>å¦‚æœå…ƒç´ å‰åæœ‰ä¸åŒçš„key, é‚£ä¹ˆåœ¨å‰åä¸¤æ¬¡æ¸²æŸ“ä¸­å°±ä¼šè¢«è®¤ä¸ºæ˜¯ä¸åŒçš„å…ƒç´ ï¼Œè¿™æ—¶å€™æ—§çš„é‚£ä¸ªå…ƒç´ ä¼šè¢«unmountï¼Œæ–°çš„å…ƒç´ ä¼šè¢«mount</p>
</li>
</ul>
<p>æ‰€ä»¥ä¸ºå…ƒç´ æ·»åŠ  keyå±æ€§, æœ‰åŠ©äºæå‡æ€§èƒ½; ä¸” key éœ€è¦æ»¡è¶³ å”¯ä¸€, ç¨³å®šä¸å˜</p>
<p>ä¸æ¨èä½¿ç”¨æ•°ç»„/é›†åˆçš„indexæ¥åškeyå€¼, å› ä¸ºæ•°ç»„åœ¨æ‰§è¡Œæ’å…¥ã€æ’åºç­‰æ“ä½œä¹‹åï¼Œindexå¹¶ä¸å†å¯¹åº”åˆ°åŸå…ˆçš„å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªkeyå°±å¤±å»äº†æœ¬èº«çš„æ„ä¹‰</p>
<p>ä¸æ¨èä½¿ç”¨ éšæœºç”Ÿæˆå€¼ æ¥åš key</p>
<h2><a class="header" href="#è®¾ç½®ç»„ä»¶æ—¶æ€ä¹ˆæé«˜æ€§èƒ½" id="è®¾ç½®ç»„ä»¶æ—¶æ€ä¹ˆæé«˜æ€§èƒ½">è®¾ç½®ç»„ä»¶æ—¶æ€ä¹ˆæé«˜æ€§èƒ½</a></h2>
<p>å› æ­¤ diff ç®—æ³•é«˜æ•ˆ æœ‰ä¸¤ä¸ªå‰æ:</p>
<ul>
<li>
<p>ç»„ä»¶çš„ dom ç»“æ„ç›¸å¯¹ç¨³å®š (å¾ˆå°‘å‘ç”Ÿè·¨å±‚ç§»åŠ¨, å¢åŠ /åˆ é™¤)</p>
</li>
<li>
<p>åŒç±»å‹çš„å…„å¼ŸèŠ‚ç‚¹å¯ä»¥è¢«å”¯ä¸€æ ‡è¯† (é€šè¿‡ key å±æ€§)</p>
</li>
</ul>
<p>æ‰€ä»¥è®¾è®¡ç»„ä»¶, åº”è¯¥éµå®ˆè¿™æ ·çš„åŸåˆ™:</p>
<ul>
<li>
<p>ui ä¸­çš„å…ƒç´ å°½é‡åªå‘ç”Ÿç§»åŠ¨, å±æ€§å˜åŒ–, å°‘å‘ç”Ÿ å¢åŠ , åˆ é™¤, å°‘å‘ç”Ÿè·¨å±‚ç§»åŠ¨</p>
<p>æ¯”å¦‚, å¯¹äºå¢åŠ /åˆ é™¤èŠ‚ç‚¹, å¯ä»¥ä½¿ç”¨æ ·å¼æ§åˆ¶èŠ‚ç‚¹çš„ display å®ç°</p>
</li>
<li>
<p>ä¸åŒç±»çš„ç»„ä»¶ä¸è¦å­˜åœ¨ç›¸ä¼¼ DOM</p>
<p>å¦‚: å¯¹äºä¸¤ä¸ªç»„ä»¶å…·æœ‰ç›¸ä¼¼çš„ dom ç»“æ„, åº”è¯¥è®¾è®¡ä¸ºåŒä¸€ä¸ª ç»„ä»¶ç±»</p>
</li>
</ul>
<h1><a class="header" href="#context-api-ä½¿ç”¨" id="context-api-ä½¿ç”¨">context-api ä½¿ç”¨</a></h1>
<h1><a class="header" href="#state-çŠ¶æ€" id="state-çŠ¶æ€">state çŠ¶æ€</a></h1>
<h2><a class="header" href="#state-ä»‹ç»" id="state-ä»‹ç»">state ä»‹ç»</a></h2>
<p>state æ˜¯ç»„ä»¶å†…éƒ¨ç»´æŠ¤çš„çŠ¶æ€, props æ˜¯å¤–éƒ¨ä¼ å…¥çš„å±æ€§; state ä¸€èˆ¬æ˜¯çœŸæ­£çš„ä¸šåŠ¡æ•°æ®, props ä¸€èˆ¬æ˜¯ç»„ä»¶çš„é…ç½®, ä»çˆ¶ç»„ä»¶ä¼ å…¥, å®šä¹‰åä¸€èˆ¬ä¸å˜åŒ–</p>
<p>å½“ç»„ä»¶çŠ¶æ€ state æœ‰æ›´æ”¹çš„æ—¶å€™(é€šè¿‡ <code>setState()</code>æ›´æ”¹, ç›´æ¥ä¿®æ”¹çš„è¯, ç»„ä»¶ä¸ä¼šé‡ç»˜)ï¼ŒReact ä¼šè‡ªåŠ¨è°ƒç”¨ç»„ä»¶çš„ render æ–¹æ³•é‡æ–°æ¸²æŸ“ (é‡ç»˜ redraw) æ•´ä¸ªç»„ä»¶çš„ UI</p>
<p>React Component å¯ä»¥ç®¡ç†è‡ªå·±çš„å†…éƒ¨ state, åœ¨ constructor(props) æ„é€ å‡½æ•° ä¸­åˆå§‹åŒ– state, å¹¶ç”¨ <code>this.state</code>æ¥è·å– stateã€‚é€šè¿‡ <code>setState(newState)</code> æ–¹æ³•æ›´æ–° state, æ›´æ–°åå°†é‡æ–°è°ƒç”¨ render() æ–¹æ³•ï¼Œé‡æ–°ç»˜åˆ¶ component å†…å®¹</p>
<pre><code class="language-js">class Timer extends React.Component {
    constructor(props) {
        super(props);
        // ä¸ ES5 React.createClass({}) ä¸åŒçš„æ˜¯ component å†…è‡ªå®šä¹‰çš„æ–¹æ³•éœ€è¦è‡ªè¡Œç»‘å®š this contextï¼Œæˆ–æ˜¯ä½¿ç”¨ arrow function
        this.tick = this.tick.bind(this);
        // åˆå§‹ stateï¼Œç­‰äº ES5 ä¸­çš„ getInitialState
        this.state = {
            secondsElapsed: 0
        };
    }
    // ç´¯åŠ å™¨æ–¹æ³•ï¼Œæ¯ä¸€ç§’è¢«å‘¼å«åå°±ä¼šä½¿ç”¨ setState() æ›´æ–°å†…éƒ¨ stateï¼Œè®© Component é‡æ–° render
    tick() {
        this.setState({ secondsElapsed: this.state.secondsElapsed + 1 });
    }
    // componentDidMount ä¸º component ç”Ÿå‘½å‘¨æœŸä¸­é˜¶æ®µ component å·²æ’å…¥èŠ‚ç‚¹çš„é˜¶æ®µï¼Œé€šå¸¸ä¸€äº›éåŒæ­¥æ“ä½œéƒ½ä¼šæ”¾ç½®åœ¨è¿™ä¸ªé˜¶æ®µã€‚è¿™ä¾¿æ˜¯æ¯1ç§’é’Ÿä¼šå»å‘¼å« tick æ–¹æ³•
    componentDidMount() {
        this.interval = setInterval(this.tick, 1000);
    }
    // componentWillUnmount ä¸º component ç”Ÿå‘½å‘¨æœŸä¸­ component å³å°†ç§»å‡ºæ’å…¥çš„èŠ‚ç‚¹çš„é˜¶æ®µã€‚è¿™è¾¹ç§»é™¤äº† setInterval æ•ˆåŠ›
    componentWillUnmount() {
        clearInterval(this.interval);
    }
    // render ä¸º class Component ä¸­å”¯ä¸€éœ€è¦å®šä¹‰çš„æ–¹æ³•ï¼Œå…¶å›ä¼  component æ¬²æ˜¾ç¤ºçš„å†…å®¹
    render() {
        return &lt;div&gt;Seconds Elapsed: {this.state.secondsElapsed}&lt;/div&gt;;
    }
}

ReactDOM.render(&lt;Timer /&gt;, document.getElementById(&quot;app&quot;));
</code></pre>
<h2><a class="header" href="#state-å’Œç»„ä»¶çš„æ™®é€šå±æ€§åŒºåˆ«" id="state-å’Œç»„ä»¶çš„æ™®é€šå±æ€§åŒºåˆ«">state å’Œç»„ä»¶çš„æ™®é€šå±æ€§åŒºåˆ«</a></h2>
<p>åœ¨ state ä¸­çš„å˜é‡æ˜¯å’Œ ui æ¸²æŸ“ç›¸å…³çš„, æ€»æ˜¯ä¼šåœ¨ render() ä¸­ä½¿ç”¨åˆ°</p>
<p>ç»„ä»¶çš„æ™®é€šå±æ€§å’Œ state ä¸€æ ·ä¼šåœ¨ç»„ä»¶å†…éƒ¨ç”¨åˆ°, ä½†æ˜¯ä¸æ˜¯åœ¨ render() ä¸­ä½¿ç”¨, å’Œ ui æ¸²æŸ“æ— å…³. å¦‚: ç»„ä»¶ä¸­ç”¨åˆ°çš„å®šæ—¶å™¨</p>
<pre><code class="language-js">// åˆå§‹åŒ–
  constructor(props) {
    super(props);
    this.state = {}; // state å˜é‡
    this.timer = 0; // æ™®é€šå±æ€§
  }
</code></pre>
<h2><a class="header" href="#å¦‚ä½•æ›´æ–°-state" id="å¦‚ä½•æ›´æ–°-state">å¦‚ä½•æ›´æ–° state</a></h2>
<p>é€šè¿‡ setState æ–¹æ³•, æœ‰ä¸¤ç§ä½¿ç”¨æ–¹æ³•</p>
<ul>
<li>
<p>setState(newState)</p>
</li>
<li>
<p>setState((preState, props) =&gt; newState)</p>
<p>å¯ä»¥åŒæ—¶ä¼ é€’ä¸€ä¸ª callback å›è°ƒå‡½æ•°, setState((preState, props) =&gt; newState, callback)</p>
</li>
</ul>
<p>å½“Stateä¸­çš„æŸä¸ªçŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œæˆ‘ä»¬åº”è¯¥é‡æ–°åˆ›å»ºè¿™ä¸ªçŠ¶æ€å¯¹è±¡ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹åŸæ¥çš„çŠ¶æ€. ä¸ºä»€ä¹ˆå‘¢</p>
<ul>
<li>
<p>æœ‰åˆ©äºæ€§èƒ½æå‡.</p>
<p>å¦‚æœ æ•´ä¸ª state æ˜¯å¯å˜å¯¹è±¡, é‚£ä¹ˆè¯´ä¸å®šåœ¨å“ªä¸ªåœ°æ–¹å°±æ”¹å˜äº† state, é€ æˆç»„ä»¶ä¸å¿…è¦çš„ é‡ç»˜</p>
<p>å½“å¯¹è±¡ç»„ä»¶çŠ¶æ€éƒ½æ˜¯ä¸å¯å˜å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬åœ¨ç»„ä»¶çš„shouldComponentUpdateæ–¹æ³•ä¸­ï¼Œä»…éœ€è¦æ¯”è¾ƒçŠ¶æ€çš„å¼•ç”¨å°±å¯ä»¥åˆ¤æ–­çŠ¶æ€æ˜¯å¦çœŸçš„æ”¹å˜ï¼Œä»è€Œé¿å…ä¸å¿…è¦çš„renderè°ƒç”¨ã€‚</p>
<p>æˆ‘ä»¬ä½¿ç”¨React æä¾›çš„PureComponentæ—¶ï¼Œæ›´æ˜¯è¦ä¿è¯ç»„ä»¶çŠ¶æ€æ˜¯ä¸å¯å˜å¯¹è±¡ï¼Œå¦åˆ™åœ¨ç»„ä»¶çš„shouldComponentUpdateæ–¹æ³•ä¸­ï¼ŒçŠ¶æ€æ¯”è¾ƒå°±å¯èƒ½å‡ºç°é”™è¯¯ï¼Œå› ä¸ºPureComponentæ‰§è¡Œçš„æ˜¯æµ…æ¯”è¾ƒï¼ˆæ¯”è¾ƒå¯¹è±¡çš„å¼•ç”¨ï¼‰ã€‚</p>
</li>
<li>
<p>ä¸å¯å˜å¯¹è±¡æ–¹ä¾¿ç®¡ç†å’Œè°ƒè¯•</p>
</li>
</ul>
<p>æ‰€ä»¥ state åº”è¯¥æ˜¯ Immutable çš„, ç›®å‰æ˜¯æˆ‘ä»¬è‡ªå·±ä¿è¯å®ƒæ˜¯ä¸å¯å˜çš„, åé¢å¯ä»¥è€ƒè™‘ä½¿ç”¨ Immutable.js</p>
<pre><code class="language-js">// å½“çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¦‚ä½•åˆ›å»ºæ–°çš„çŠ¶æ€å‘¢ï¼Ÿæ ¹æ®çŠ¶æ€çš„ç±»å‹ï¼Œå¯ä»¥åˆ†æˆä¸‰ç§æƒ…å†µï¼š

// 1. çŠ¶æ€çš„ç±»å‹æ˜¯ä¸å¯å˜ç±»å‹ï¼ˆæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œå¸ƒå°”å€¼ï¼Œnullï¼Œ undefinedï¼‰

// æœ€ç®€å•, ç›´æ¥ç»™è¦ä¿®æ”¹çš„çŠ¶æ€èµ‹ä¸€ä¸ªæ–°å€¼å³å¯
this.setState({
  count: 1,
  title: 'Redux',
  success: true
})

////////////////////////////////////////////////////////////

// 2. çŠ¶æ€çš„ç±»å‹æ˜¯æ•°ç»„
//æ³¨æ„ä¸è¦ä½¿ç”¨pushã€popã€shiftã€unshiftã€spliceç­‰æ–¹æ³•ä¿®æ”¹æ•°ç»„ç±»å‹çš„çŠ¶æ€ï¼Œå› ä¸ºè¿™äº›æ–¹æ³•éƒ½æ˜¯åœ¨åŸæ•°ç»„çš„åŸºç¡€ä¸Šä¿®æ”¹ï¼Œè€Œconcatã€sliceã€filterä¼šè¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ã€‚


// å¦‚æœ‰ä¸€ä¸ªæ•°ç»„ç±»å‹çš„çŠ¶æ€booksï¼Œå½“å‘booksä¸­å¢åŠ ä¸€æœ¬ä¹¦æ—¶ï¼Œä½¿ç”¨æ•°ç»„çš„concatæ–¹æ³•æˆ–ES6çš„æ•°ç»„æ‰©å±•è¯­æ³•ï¼ˆspread syntaxï¼‰ï¼š

// æ–¹æ³•ä¸€ï¼šå°†stateå…ˆèµ‹å€¼ç»™å¦å¤–çš„å˜é‡ï¼Œç„¶åä½¿ç”¨concatåˆ›å»ºæ–°æ•°ç»„
var books = this.state.books; 
this.setState({
  books: books.concat(['React Guide']);
})
// æ–¹æ³•äºŒï¼šä½¿ç”¨preStateã€concatåˆ›å»ºæ–°æ•°ç»„
this.setState(preState =&gt; ({
  books: preState.books.concat(['React Guide']);
}))
// æ–¹æ³•ä¸‰ï¼šES6 spread syntax
this.setState(preState =&gt; ({
  books: [...preState.books, 'React Guide'];
}))


// å½“ä»booksä¸­æˆªå–éƒ¨åˆ†å…ƒç´ ä½œä¸ºæ–°çŠ¶æ€æ—¶ï¼Œä½¿ç”¨æ•°ç»„çš„sliceæ–¹æ³•ï¼š

// æ–¹æ³•ä¸€ï¼šå°†stateå…ˆèµ‹å€¼ç»™å¦å¤–çš„å˜é‡ï¼Œç„¶åä½¿ç”¨sliceåˆ›å»ºæ–°æ•°ç»„
var books = this.state.books; 
this.setState({
  books: books.slice(1,3);
})
// æ–¹æ³•äºŒï¼šä½¿ç”¨preStateã€sliceåˆ›å»ºæ–°æ•°ç»„
this.setState(preState =&gt; ({
  books: preState.books.slice(1,3);
}))


//å½“ä»booksä¸­è¿‡æ»¤éƒ¨åˆ†å…ƒç´ åï¼Œä½œä¸ºæ–°çŠ¶æ€æ—¶ï¼Œä½¿ç”¨æ•°ç»„çš„filteræ–¹æ³•ï¼š

// æ–¹æ³•ä¸€ï¼šå°†stateå…ˆèµ‹å€¼ç»™å¦å¤–çš„å˜é‡ï¼Œç„¶åä½¿ç”¨filteråˆ›å»ºæ–°æ•°ç»„
var books = this.state.books; 
this.setState({
  books: books.filter(item =&gt; {
    return item != 'React'; 
  });
})
// æ–¹æ³•äºŒï¼šä½¿ç”¨preStateã€filteråˆ›å»ºæ–°æ•°ç»„
this.setState(preState =&gt; ({
  books: preState.books.filter(item =&gt; {
    return item != 'React'; 
  });
}))

////////////////////////////////////////////////////////////



// 3. çŠ¶æ€çš„ç±»å‹æ˜¯æ™®é€šå¯¹è±¡ï¼ˆä¸åŒ…å«å­—ç¬¦ä¸²ã€æ•°ç»„ï¼‰



//ä½¿ç”¨ES6 çš„Object.assginæ–¹æ³•

// æ–¹æ³•ä¸€ï¼šå°†stateå…ˆèµ‹å€¼ç»™å¦å¤–çš„å˜é‡ï¼Œç„¶åä½¿ç”¨Object.assignåˆ›å»ºæ–°å¯¹è±¡
var owner = this.state.owner;
this.setState({
  owner: Object.assign({}, owner, {name: 'Jason'});
})
// æ–¹æ³•äºŒï¼šä½¿ç”¨preStateã€Object.assignåˆ›å»ºæ–°å¯¹è±¡
this.setState(preState =&gt; ({
  owner: Object.assign({}, preState.owner, {name: 'Jason'});
}))


// ä½¿ç”¨å¯¹è±¡æ‰©å±•è¯­æ³•ï¼ˆobject spread propertiesï¼‰

// æ–¹æ³•ä¸€ï¼šå°†stateå…ˆèµ‹å€¼ç»™å¦å¤–çš„å˜é‡ï¼Œç„¶åä½¿ç”¨å¯¹è±¡æ‰©å±•è¯­æ³•åˆ›å»ºæ–°å¯¹è±¡
var owner = this.state.owner;
this.setState({
  owner: {...owner, name: 'Jason'};
})
// æ–¹æ³•äºŒï¼šä½¿ç”¨preStateã€å¯¹è±¡æ‰©å±•è¯­æ³•åˆ›å»ºæ–°å¯¹è±¡
this.setState(preState =&gt; ({
  owner: {...preState.owner, name: 'Jason'};
}))

</code></pre>
<h2><a class="header" href="#setstate-æ˜¯ä¸æ˜¯å¼‚æ­¥çš„" id="setstate-æ˜¯ä¸æ˜¯å¼‚æ­¥çš„">setState æ˜¯ä¸æ˜¯å¼‚æ­¥çš„</a></h2>
<p>ç»å…¸ä¾‹å­:</p>
<pre><code class="language-js">// demo.js
class Demo extends PureComponent {
  state={
    count: 0,
  }
  // é’©å­å‡½æ•° (åœ¨è¿™é‡Œæ˜¯å¼‚æ­¥çš„)
  componentDidMount() {
    console.log('pre state', this.state.count);
    this.setState({
      count: this.state.count + 1
    });
    console.log('next state', this.state.count);//å‰åæ²¡å˜åŒ–

    //æµ‹è¯•setTimeout (è¿™é‡Œæ˜¯åŒæ­¥çš„)
    setTimeout(() =&gt; {
      console.log('setTimeout pre state', this.state.count);
      this.setState({
        count: this.state.count + 1
      });
      console.log('setTimeout next state', this.state.count);// å‰åæœ‰å˜åŒ–
    }, 0);
  }

  onClick = (event) =&gt; {
    // æµ‹è¯•åˆæˆå‡½æ•° (åˆæˆäº‹ä»¶è§¦å‘çš„å‡½æ•°) ä¸­setState (è¿™é‡Œæ˜¯å¼‚æ­¥çš„)
    console.log(`${event.type} pre state`, this.state.count);
    this.setState({
      count: this.state.count + 1
    });
    console.log(`${event.type} next state`, this.state.count);// å‰åæ²¡å˜åŒ–
  }

  render() {
    return &lt;button onClick={this.onClick}&gt;count+1&lt;/button&gt;
  }
}
</code></pre>
<p>è°ƒç”¨setStateï¼Œç»„ä»¶çš„stateå¹¶ä¸ä¼šç«‹å³æ”¹å˜ï¼ŒsetStateåªæ˜¯æŠŠè¦ä¿®æ”¹çš„çŠ¶æ€æ”¾å…¥ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼ŒReactä¼šä¼˜åŒ–çœŸæ­£çš„æ‰§è¡Œæ—¶æœºï¼Œå¹¶ä¸” React ä¼šå°†å¤šæ¬¡setStateçš„çŠ¶æ€ä¿®æ”¹åˆå¹¶æˆä¸€æ¬¡çŠ¶æ€ä¿®æ”¹. </p>
<blockquote>
<p>æ‰€ä»¥ä¸è¦ä¾èµ–å½“å‰çš„Stateï¼Œè®¡ç®—ä¸‹ä¸ªState; å‰åä¸¤ä¸ª state åº”è¯¥æ²¡æœ‰ä»»ä½•è”ç³»; åŒæ ·ä¸èƒ½ä¾èµ–å½“å‰çš„Propsè®¡ç®—ä¸‹ä¸ª stateï¼Œå› ä¸ºPropsä¸€èˆ¬ä¹Ÿæ˜¯ä»çˆ¶ç»„ä»¶çš„Stateä¸­è·å–ï¼Œä¾ç„¶æ— æ³•ç¡®å®šè·å–çš„å½“å‰ props å°±æ˜¯æœ€æ–°çš„</p>
</blockquote>
<p>==================çœŸçš„æ˜¯å¼‚æ­¥çš„å—</p>
<p>setStateæœ¬èº«çš„æ‰§è¡Œè¿‡ç¨‹æ˜¯åŒæ­¥çš„</p>
<p>ä½†æ˜¯åœ¨reactçš„<code>åˆæˆå‡½æ•° (è‡ªå®šä¹‰å‡½æ•°)</code>ä¸<code>é’©å­å‡½æ•° (ç”Ÿå‘½å‘¨æœŸå‡½æ•°)</code>ä¸­çš„ setState() ä¸ä¼šç«‹é©¬æ›´æ–° stateï¼Œæ‰€ä»¥ä¸èƒ½ç«‹å³æ‹¿åˆ°æ›´æ–°åçš„ stateï¼Œå½¢æˆäº†æ‰€è°“çš„å¼‚æ­¥ï¼›</p>
<p>==================ä¸ºä»€ä¹ˆéœ€è¦æœ‰å¼‚æ­¥å‘¢ //todo</p>
<ul>
<li>
<p>ä¿æŒ å’Œ props çš„ä¸€è‡´æ€§</p>
<p>å°±ç®—è®© state åŒæ­¥æ›´æ–°ï¼Œprops ä¹Ÿä¸è¡Œï¼Œå› ä¸ºå½“çˆ¶ç»„ä»¶é‡æ¸²æŸ“ï¼ˆre-render ï¼‰äº†ä½ æ‰çŸ¥é“ propsã€‚</p>
</li>
<li>
<p>æ€§èƒ½ä¼˜åŒ–</p>
<p>React ä¼šç»™ä¸åŒçš„ setState() è°ƒç”¨åˆ†é…ä¸åŒçš„ä¼˜å…ˆçº§, è€Œä¸æ˜¯ç«‹é©¬æ›´æ–° state, é˜²æ­¢å¹¶å‘çš„åŠ¨ä½œé˜»å¡çº¿ç¨‹</p>
</li>
<li>
<p>å¯ä»¥å®ç° æ›´æ–° state, åœ¨å¹•åæ¸²æŸ“æ–°çš„é¡µé¢, è¿˜ä¿æŒæ—§çš„é¡µé¢å¯ä»¥äº¤äº’</p>
</li>
</ul>
<p>=======================å¯ä»¥æ˜¯åŒæ­¥çš„å—</p>
<p>å¯ä»¥ </p>
<ul>
<li>
<p>åœ¨åŸç”Ÿäº‹ä»¶è§¦å‘çš„å‡½æ•°, setTimeout, asyncå‡½æ•°ä¸­æ˜¯åŒæ­¥çš„</p>
</li>
<li>
<p>ç”Ÿå‘½å‘¨æœŸå‡½æ•°å’Œåˆæˆå‡½æ•°ä¸­éƒ½æ˜¯å¼‚æ­¥æ›´æ–°</p>
</li>
</ul>
<h2><a class="header" href="#setstate-æ›´æ–°æ˜¯ä¸€ä¸ªåˆå¹¶è¿‡ç¨‹" id="setstate-æ›´æ–°æ˜¯ä¸€ä¸ªåˆå¹¶è¿‡ç¨‹">setState æ›´æ–°æ˜¯ä¸€ä¸ªåˆå¹¶è¿‡ç¨‹</a></h2>
<p>State çš„æ›´æ–°æ˜¯ä¸€ä¸ªæµ…åˆå¹¶ï¼ˆShallow Mergeï¼‰çš„è¿‡ç¨‹, æ‰€ä»¥ å½“è°ƒç”¨setStateä¿®æ”¹ç»„ä»¶çŠ¶æ€æ—¶ï¼Œåªéœ€è¦ä¼ å…¥å‘ç”Ÿæ”¹å˜çš„Stateï¼Œè€Œä¸æ˜¯ç»„ä»¶å®Œæ•´çš„State</p>
<pre><code class="language-js">// setState ç­‰ä»·äº
Object.assign(preState, newState)



// ä¾‹å¦‚
// åˆå§‹åŒ– state
this.state = {
  title : 'React',
  content : 'React is an wonderful JS library!'
}
// æ›´æ–° state
this.setState({title: 'Reactjs'});
// æœ€ç»ˆåˆå¹¶åçš„ state æ˜¯è¿™æ ·çš„:
{
  title : 'Reactjs',
  content : 'React is an wonderful JS library!'
}


</code></pre>
<h2><a class="header" href="#replacestate-æ›´æ–°æ˜¯ä¸€ä¸ªæ›¿æ¢è¿‡ç¨‹" id="replacestate-æ›´æ–°æ˜¯ä¸€ä¸ªæ›¿æ¢è¿‡ç¨‹">replaceState æ›´æ–°æ˜¯ä¸€ä¸ªæ›¿æ¢è¿‡ç¨‹</a></h2>
<p>replaceState()æ–¹æ³•ä¸setState()ç±»ä¼¼ï¼Œä½†æ˜¯æ–¹æ³•åªä¼šä¿ç•™nextStateä¸­çŠ¶æ€ï¼ŒåŸstateä¸åœ¨nextStateä¸­çš„çŠ¶æ€éƒ½ä¼šè¢«åˆ é™¤</p>
<pre><code class="language-js">//ä½¿ç”¨è¯­æ³•ï¼š
replaceState(object nextState[, function callback])

// nextStateï¼Œå°†è¦è®¾ç½®çš„æ–°çŠ¶æ€ï¼Œè¯¥çŠ¶æ€ä¼šæ•´ä¸ªæ›¿æ¢å½“å‰çš„stateã€‚
// callbackï¼Œå¯é€‰å‚æ•°ï¼Œå›è°ƒå‡½æ•°ã€‚è¯¥å‡½æ•°ä¼šåœ¨replaceStateè®¾ç½®æˆåŠŸï¼Œä¸”ç»„ä»¶é‡æ–°æ¸²æŸ“åè°ƒç”¨ã€‚
</code></pre>
<h1><a class="header" href="#props-å±æ€§" id="props-å±æ€§">props å±æ€§</a></h1>
<h2><a class="header" href="#åœ¨-jsx-ä¸­éå†-props" id="åœ¨-jsx-ä¸­éå†-props">åœ¨ jsx ä¸­éå† props</a></h2>
<p>ä½¿ç”¨ &quot;...&quot; éå† props</p>
<pre><code class="language-js">var props = {
    style: &quot;width:20px&quot;,// æŠ¥é”™, å­˜ç–‘; å¯èƒ½styleéœ€è¦å•ç‹¬ä¸€ä¸ªå¯¹è±¡, æˆ–è€… &lt;HelloMessage style={{ color: '#FFFFFF', fontSize: '30px'}} /&gt;
    className: &quot;main&quot;,
    value: &quot;yo&quot;,  // ä¼šè¢«æ›¿æ¢
}

&lt;HelloMessage  {...props} value=&quot;yo&quot; /&gt;

// ç­‰äºä»¥ä¸‹
React.createElement(&quot;h1&quot;, React._spread({}, props, {value: &quot;yo&quot;}), &quot;Hello React!&quot;);
</code></pre>
<h2><a class="header" href="#proptypes-ç±»å‹æ£€æŸ¥" id="proptypes-ç±»å‹æ£€æŸ¥">PropTypes ç±»å‹æ£€æŸ¥</a></h2>
<pre><code class="language-js">import PropTypes from 'prop-types';

class Greeting extends React.Component {
  render() {
    return (
      &lt;h1&gt;Hello, {this.props.name}&lt;/h1&gt;
    );
  }
}

Greeting.propTypes = {
  name: PropTypes.string

  // é™åˆ¶æŸä¸ªpropsä¸ºjs&quot;åŸç”Ÿç±»å‹&quot;
  optionalArray: PropTypes.array,
  optionalBool: PropTypes.bool,
  optionalFunc: PropTypes.func,
  optionalNumber: PropTypes.number,
  optionalObject: PropTypes.object,// ä¸æ¨è
  optionalString: PropTypes.string,
  optionalSymbol: PropTypes.symbol,// ç±»ä¼¼äºå­—ç¬¦å‹çš„æ•°æ®ç±»å‹, ç‹¬ä¸€æ— äºŒçš„å€¼, ç»™objectæ–°å¢å±æ€§åç§° let s = Symbol();let s1 = Symbol('s1');(ref:https://www.jianshu.com/p/174f88d189c6)

  // ä»»ä½•å¯è¢«æ¸²æŸ“çš„å…ƒç´ ï¼ˆåŒ…æ‹¬æ•°å­—ã€å­—ç¬¦ä¸²ã€å­å…ƒç´ æˆ–æ•°ç»„ï¼‰ã€‚
  optionalNode: PropTypes.node,//  numbers, strings, elements or an array

  // ä¸€ä¸ª React å…ƒç´ 
  optionalElement: PropTypes.element,// A React element.

  optionalMessage: PropTypes.instanceOf(Message),// æŸä¸ªç±»çš„å®ä¾‹

  optionalEnum: PropTypes.oneOf(['News', 'Photos']),// [æŸä¸ªç³»åˆ—]ä¸­çš„ä¸€ä¸ª, ç±»ä¼¼æšä¸¾ç±»å‹
  optionalUnion: PropTypes.oneOfType([// å‡ ç§ç±»å‹ä¸­çš„ä¸€ä¸ª
    PropTypes.string,
    PropTypes.number,
    PropTypes.instanceOf(Message)
  ]),

  optionalArrayOf: PropTypes.arrayOf(PropTypes.number),// æŸç§ç±»å‹çš„æ•°ç»„

  // ä¸€ä¸ªæŒ‡å®šç±»å‹çš„å¯¹è±¡
  optionalObjectOf: PropTypes.objectOf(PropTypes.number),// å¯¹è±¡, æ‰€æœ‰å±æ€§éƒ½æ˜¯æŸä¸€ç‰¹å®šç±»å‹
  // ä¸€ä¸ªæŒ‡å®šå±æ€§åŠå…¶ç±»å‹çš„å¯¹è±¡
  optionalObjectWithShape: PropTypes.shape({// å¯¹è±¡, è§„å®šå„ä¸ªå±æ€§ä¸åŒçš„ç±»å‹
    color: PropTypes.string,
    fontSize: PropTypes.number
  }),

  // å¿…é¡»ï¼Œ è¿™æ ·å¦‚æœè¿™ä¸ªå±æ€§çˆ¶ç»„ä»¶æ²¡æœ‰æä¾›æ—¶ï¼Œä¼šæ‰“å°è­¦å‘Šä¿¡æ¯
  requiredFunc: PropTypes.func.isRequired,
  requiredAny: PropTypes.any.isRequired,// anyä¸æ¨è

   // ä½ ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªè‡ªå®šä¹‰éªŒè¯å™¨ã€‚å®ƒåº”è¯¥åœ¨éªŒè¯å¤±è´¥æ—¶è¿”å›
  // ä¸€ä¸ª Error å¯¹è±¡è€Œä¸æ˜¯ `console.warn` æˆ–æŠ›å‡ºå¼‚å¸¸ã€‚
  // ä¸è¿‡åœ¨ `oneOfType` ä¸­å®ƒä¸èµ·ä½œç”¨ã€‚
  customProp: function(props, propName, componentName) {// è‡ªå®šä¹‰ validator
    if (!/matchme/.test(props[propName])) {
      return new Error(
        'Invalid prop `' + propName + '` supplied to' +
        ' `' + componentName + '`. Validation failed.'
      );
    }
  },
  // è‡ªå®šä¹‰ validator to `arrayOf` and `objectOf`.
  // The validator  will be called for each key in the array or object.
  // The first two arguments of the validator are the array or object itself, and the current item's key.
  customArrayProp: PropTypes.arrayOf(function(propValue, key, componentName, location, propFullName) {
    if (!/matchme/.test(propValue[key])) {
      return new Error(
        'Invalid prop `' + propFullName + '` supplied to' +
        ' `' + componentName + '`. Validation failed.'
      );
    }
  })
};
</code></pre>
<p>for example:</p>
<pre><code class="language-js">//  æ³¨æ„ç»„ä»¶å¼€å¤´ç¬¬ä¸€ä¸ªå­—æ¯éƒ½è¦å¤§å†™
class MyComponent extends React.Component {
    // render æ˜¯ Class based ç»„ä»¶å”¯ä¸€å¿…é¡»çš„æ–¹æ³•ï¼ˆmethodï¼‰
    render() {
        return &lt;div&gt;Hello, World!&lt;/div&gt;;
    }
}

// PropTypes éªŒè¯ï¼Œè‹¥ä¼ å…¥çš„ props type ä¸ç¬¦åˆå°†ä¼šæ˜¾ç¤ºé”™è¯¯
MyComponent.propTypes = {
    todo: React.PropTypes.object,
    name: React.PropTypes.string
};

// Prop é¢„è®¾å€¼ï¼Œè‹¥å¯¹åº” props æ²¡ä¼ å…¥å€¼å°†ä¼šä½¿ç”¨ default å€¼
MyComponent.defaultProps = {
    todo: {},
    name: &quot;&quot;
};
</code></pre>
<h2><a class="header" href="#å¼•å…¥ç±»å‹æ£€æŸ¥çš„å…¶ä»–æ–¹æ³•" id="å¼•å…¥ç±»å‹æ£€æŸ¥çš„å…¶ä»–æ–¹æ³•">å¼•å…¥ç±»å‹æ£€æŸ¥çš„å…¶ä»–æ–¹æ³•</a></h2>
<h3><a class="header" href="#å¼•å…¥-typescript" id="å¼•å…¥-typescript">å¼•å…¥ TypeScript</a></h3>
<p>JavaScript çš„è¶…é›†</p>
<p>https://react-typescript-cheatsheet.netlify.app/docs/basic/setup
https://www.typescriptlang.org/docs/handbook/interfaces.html</p>
<pre><code class="language-sh">npx create-react-app hook-ts-demo --template typescript

</code></pre>
<h3><a class="header" href="#flow-ç±»å‹æ£€æŸ¥" id="flow-ç±»å‹æ£€æŸ¥">flow ç±»å‹æ£€æŸ¥</a></h3>
<p>Facebook è‡ªå·±çš„å·¥å…·</p>
<h2><a class="header" href="#è®¾å®š-props-çš„é»˜è®¤å€¼" id="è®¾å®š-props-çš„é»˜è®¤å€¼">è®¾å®š props çš„é»˜è®¤å€¼</a></h2>
<pre><code class="language-js">class Greeting extends React.Component {
    render() {
        return &lt;h1&gt;Hello, {this.props.name}&lt;/h1&gt;;
    }
}

// Specifies the default values for props:
Greeting.defaultProps = {
    name: &quot;Stranger&quot;
};
</code></pre>
<p>or</p>
<pre><code class="language-js">class Greeting extends React.Component {
    static defaultProps = {
        name: &quot;stranger&quot;
    };

    render() {
        return &lt;div&gt;Hello, {this.props.name}&lt;/div&gt;;
    }
}
</code></pre>
<h2><a class="header" href="#æœ‰å“ªäº›å±æ€§" id="æœ‰å“ªäº›å±æ€§">æœ‰å“ªäº›å±æ€§</a></h2>
<p>å’Œ react-router åˆä½œæ—¶å€™, å°† react-router çš„ history,location,match ä¸‰ä¸ªå¯¹è±¡ç»‘å®šåˆ° props, æ‰“å° props :</p>
<p><img src="Snipaste_2018-06-25_17-20-23.png" alt="alt" /></p>
<h1><a class="header" href="#refs" id="refs">refs</a></h1>
<p>è¡¨å•å¤„ç†ä¸ç¬¬ä¸‰æ–¹ lib é›†æˆ</p>
<p>ref ä»‹ç»å‚è§æ–‡æ¡£: https://react-cn.github.io/react/docs/more-about-refs.html</p>
<p>ref åœ¨ redux ä¸­ä½¿ç”¨: https://segmentfault.com/a/1190000015172005</p>
<p>å’Œç¬¬ä¸‰æ–¹ js lib é›†ä¹Ÿä¼šç”¨åˆ° Refs</p>
<pre><code class="language-js">class MarkdownEditor extends React.Component {
    constructor(props) {
        super(props);
        this.handleChange = this.handleChange.bind(this);
        this.rawMarkup = this.rawMarkup.bind(this);
        this.state = {
            value: &quot;Type some *markdown* here!&quot;
        };
    }
    // å¦ä¸€ç§å¤„ç†æ–¹æ³•æ˜¯: å€ŸåŠ© onChange(event), é€šè¿‡ event.target.value æ‹¿åˆ°å®çš„å€¼d
    handleChange() {
        this.setState({ value: this.refs.textarea.value });
    }
    // å°†ä½¿ç”¨è€…è¾“å…¥çš„ Markdown è¯­æ³• parse æˆ HTML æ”¾å…¥ DOM ä¸­ï¼ŒReact é€šå¸¸ä½¿ç”¨ virtual DOM ä½œä¸ºå’Œ DOM æ²Ÿé€šçš„ä¸­ä»‹ï¼Œä¸å»ºè®®ç›´æ¥æ“ä½œ DOMã€‚æ•…ä½¿ç”¨æ—¶çš„å±æ€§ä¸º dangerouslySetInnerHTML
    rawMarkup() {
        const md = new Remarkable();
        return { __html: md.render(this.state.value) };
    }
    render() {
        return (
            &lt;div className=&quot;MarkdownEditor&quot;&gt;
                &lt;h3&gt;Input&lt;/h3&gt;
                &lt;textarea
                    onChange={this.handleChange}
                    // ref å¯ä»¥æ˜¯ä¸€ä¸ªid, ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°
                    ref=&quot;textarea&quot;
                    defaultValue={this.state.value}
                /&gt;
                &lt;h3&gt;Output&lt;/h3&gt;
                &lt;div
                    className=&quot;content&quot;
                    dangerouslySetInnerHTML={this.rawMarkup()}
                /&gt;
            &lt;/div&gt;
        );
    }
}

ReactDOM.render(&lt;MarkdownEditor /&gt;, document.getElementById(&quot;app&quot;));
</code></pre>
<h1><a class="header" href="#åˆæˆäº‹ä»¶" id="åˆæˆäº‹ä»¶">åˆæˆäº‹ä»¶</a></h1>
<p>reactä¸ºäº†è§£å†³è·¨å¹³å°ï¼Œå…¼å®¹æ€§é—®é¢˜ï¼Œè‡ªå·±å°è£…äº†ä¸€å¥—äº‹ä»¶æœºåˆ¶ï¼Œä»£ç†äº†åŸç”Ÿçš„äº‹ä»¶ï¼Œåƒåœ¨jsxä¸­å¸¸è§çš„onClickã€onChangeè¿™äº›éƒ½æ˜¯åˆæˆäº‹ä»¶</p>
<p>demo: TodoList app</p>
<pre><code class="language-js">// TodoApp ç»„ä»¶ä¸­åŒ…å«äº†æ˜¾ç¤º Todo çš„ TodoList ç»„ä»¶ï¼ŒTodo çš„å†…å®¹é€è¿‡ props ä¼ å…¥ TodoList ä¸­ã€‚ç”±äº TodoList ä»…å•çº¯ Render UI ä¸æ¶‰åŠå†…éƒ¨ state æ“ä½œæ˜¯ stateless componentï¼Œæ‰€ä»¥ä½¿ç”¨ Functional Component å†™æ³•ã€‚

// éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ç”¨ map function æ¥è¿­ä»£ Todosï¼Œéœ€è¦ç•™æ„çš„æ˜¯æ¯ä¸ªè¿­ä»£çš„å…ƒç´ å¿…é¡»è¦æœ‰ unique key ä¸ç„¶ä¼šå‘ç”Ÿé”™è¯¯ï¼ˆå¯ä»¥ç”¨è‡ªå®šä¹‰ idï¼Œæˆ–æ˜¯ä½¿ç”¨ map function çš„ç¬¬äºŒä¸ªå‚æ•° indexï¼‰

const TodoList = props =&gt; (
    &lt;ul&gt;
        {props.items.map(item =&gt; (
            &lt;li key={item.id}&gt;{item.text}&lt;/li&gt;
        ))}
    &lt;/ul&gt;
);

// æ•´ä¸ª App çš„ä¸»è¦ç»„ä»¶

// æ€ä¹ˆè·å–inputè¡¨å•é¡¹çš„value, æœ‰å¤šç§æ–¹æ³•, è¿™æ˜¯ç¬¬ä¸€ç§: å€ŸåŠ© onchangeäº‹ä»¶å’Œstate

class TodoApp extends React.Component {
    constructor(props) {
        super(props);
        this.onChange = this.onChange.bind(this);
        this.handleSubmit = this.handleSubmit.bind(this);
        this.state = {
            items: [],
            text: &quot;&quot;
        };
    }
    onChange(e) {
        this.setState({ text: e.target.value });
    }
    handleSubmit(e) {
        e.preventDefault();
        const nextItems = this.state.items.concat([
            { text: this.state.text, id: Date.now() }
        ]);
        const nextText = &quot;&quot;;
        this.setState({ items: nextItems, text: nextText });
    }
    render() {
        return (
            &lt;div&gt;
                &lt;h3&gt;TODO&lt;/h3&gt;
                &lt;TodoList items={this.state.items} /&gt;
                &lt;form onSubmit={this.handleSubmit}&gt;
                    &lt;input onChange={this.onChange} value={this.state.text} /&gt;
                    &lt;button&gt;{&quot;Add #&quot; + (this.state.items.length + 1)}&lt;/button&gt;
                &lt;/form&gt;
            &lt;/div&gt;
        );
    }
}

// ç¬¬äºŒç§è·å–inputå€¼çš„æ–¹æ³•: å€ŸåŠ© submitäº‹ä»¶

class MyOwnListApp extends React.Component {
    constructor(props) {
        super(props);
        this.state = {
            items: []
        };
        this.onSubmit = this.onSubmit.bind(this);
    }
    render() {
        return (
            &lt;div&gt;
                &lt;h3&gt;MyOwnListApp&lt;/h3&gt;
                &lt;MyOwnList items={this.state.items}&gt;&lt;/MyOwnList&gt;
                &lt;form onSubmit={this.onSubmit}&gt;
                    &lt;input type=&quot;text&quot; /&gt;
                    &lt;button&gt;submit&lt;/button&gt;
                &lt;/form&gt;
            &lt;/div&gt;
        );
    }
    onSubmit(event) {
        event.preventDefault();
        /* this.state.items.push([{// è¿™æ ·å­uiä¸ä¼šè‡ªåŠ¨redraw
            id: Date.now(),
            value: event.target[0].value
        }]); */
        this.setState({
            // ç°åœ¨æ‰ä¼šauto redraw
            items: this.state.items.concat([
                {
                    id: Date.now(),
                    value: event.target[0].value
                }
            ])
        });
        event.target[0].value = &quot;&quot;; // æ¸…ç©º
    }
}

ReactDOM.render(&lt;TodoApp /&gt;, document.getElementById(&quot;app&quot;));
</code></pre>
<p>ä¹Ÿå¯ä»¥è‡ªå·±ç»‘å®šåŸç”Ÿäº‹ä»¶:</p>
<pre><code class="language-js">//æ‰‹åŠ¨ç»‘å®šmousedownäº‹ä»¶
    ReactDom.findDOMNode(this).addEventListener(
      &quot;mousedown&quot;,
      this.onClick.bind(this)
    );
</code></pre>
<h1><a class="header" href="#çŠ¶æ€ç®¡ç†" id="çŠ¶æ€ç®¡ç†">çŠ¶æ€ç®¡ç†</a></h1>
<p>Data Flow å’Œ Flux/Redux</p>
<p>Flux æ¶æ„: ä¸€ç§æ–¹ä¾¿åº”ç”¨çŠ¶æ€ç®¡ç†çš„æ¶æ„ -- â€œå•å‘æ•°æ®æµâ€, æ˜¯ React æ¨å´‡çš„ä¸€ç§åº”ç”¨æ¶æ„çš„æ–¹å¼, app è¶³å¤Ÿå¤æ‚æ‰èƒ½ä½“ç°æ–¹ä¾¿ (React æœ¬èº«åªæ¶‰åŠ UI å±‚ï¼Œå¦‚æœæ­å»ºå¤§å‹åº”ç”¨ï¼Œapp çš„ state, ç»„ä»¶ä¹‹é—´çš„é€šä¿¡ ä¼šå˜å¾—æ— æ¯”å¤æ‚, è¿™æ—¶ Flux æ¶æ„å°±æœ‰äº†ç”¨æ­¦ä¹‹åœ°).</p>
<p>æ ¸å¿ƒæ€æƒ³: å½“ view ä¸Šç”¨æˆ·å‘ç”Ÿäº†æ“ä½œ, app ä¼šé€šè¿‡ &quot;Action Creator&quot; åˆ›å»ºä¸€ä¸ª &quot;Action&quot;, é€šè¿‡ &quot;Dispatcher&quot; åˆ†å‘å‡ºå», ç”± &quot;Store&quot; è¿›è¡Œå¤„ç†. &quot;Store&quot; å’Œ &quot;View&quot; æ˜¯ç»‘å®šçš„,Store äº§ç”Ÿå˜åŒ–,View ä¹Ÿä¼šåŒæ­¥å˜åŒ–</p>
<p>Redux: æ˜¯ flux æ¶æ„çš„ä¸€ä¸ªå…·ä½“å®ç°ï¼Œ å°† Flux æ¶æ„ ä¸å‡½æ•°å¼ç¼–ç¨‹ç»“åˆä¸€èµ·</p>
<p>åŒç±»: mobx ,Reflux,Flummoxã€‚</p>
<p>åŒæ—¶, å¦‚æœ app æ¯”è¾ƒç®€å•, æ˜¯ä¸éœ€è¦çš„ redux æ¥ç®¡ç† state çš„, redux åªé€‚ç”¨äº&quot;å¤šäº¤äº’ã€å¤šæ•°æ®æº&quot;çš„æƒ…å†µ</p>
<h2><a class="header" href="#flux-æ¶æ„çš„æ€æƒ³" id="flux-æ¶æ„çš„æ€æƒ³">flux æ¶æ„çš„æ€æƒ³</a></h2>
<p>https://www.zhihu.com/question/33864532/answer/57667838</p>
<pre><code>  â•”â•â•â•â•â•â•â•â•â•â•—       â•”â•â•â•â•â•â•â•â•â•—       â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
  â•‘ Actions â•‘â”€â”€â”€â”€â”€â”€&gt;â•‘ Stores â•‘â”€â”€â”€â”€â”€â”€&gt;â•‘ View Components â•‘
  â•šâ•â•â•â•â•â•â•â•â•â•       â•šâ•â•â•â•â•â•â•â•â•       â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       ^                                      â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>å°†å„ä¸ªç»„ä»¶çš„ state é›†ä¸­åˆ° Store, ç»Ÿä¸€ç®¡ç†, å„ä¸ªç»„ä»¶å’Œ Store äº¤äº’, ç®€åŒ–ç»„ä»¶ä¹‹é—´çš„é€šä¿¡</p>
<p>View å±‚ä¸èƒ½ç›´æ¥å¯¹ state è¿›è¡Œæ“ä½œï¼Œè€Œéœ€è¦ä¾èµ– Actions æ´¾å‘æŒ‡ä»¤æ¥å‘ŠçŸ¥ Store ä¿®æ”¹çŠ¶æ€ï¼ŒStore æ¥æ”¶ Actions æŒ‡ä»¤åå‘ç”Ÿç›¸åº”çš„æ”¹å˜ï¼ŒView å±‚åŒæ—¶è·Ÿç€ Store çš„å˜åŒ–è€Œå˜åŒ–</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼šA ç»„ä»¶è¦ä½¿ B ç»„ä»¶å‘ç”Ÿå˜åŒ–ã€‚é¦–å…ˆï¼ŒA ç»„ä»¶éœ€è¦å°†è¿™ä¸ªæ„å›¾å°è£…ä¸ºä¸€ä¸ª action æ‰§è¡Œï¼Œå‘ŠçŸ¥ç»‘å®š B ç»„ä»¶çš„ Store å‘ç”Ÿå˜åŒ–ï¼ŒStore æ¥æ”¶åˆ°æ´¾å‘çš„æŒ‡ä»¤åæ”¹å˜ï¼Œé‚£ç›¸åº”çš„ B ç»„ä»¶çš„è§†å›¾ä¹Ÿå°±å‘ç”Ÿäº†æ”¹å˜ã€‚å‡å¦‚ Cï¼ŒDï¼ŒEï¼ŒF ç»„ä»¶ç»‘å®šäº†å’Œ B ç»„ä»¶ç›¸åŒçš„ Storeï¼Œé‚£ä¹ˆ Cï¼ŒDï¼ŒEï¼ŒF ä¹Ÿä¼šè·Ÿç€å˜åŒ–ã€‚</p>
<h2><a class="header" href="#flux-å®˜æ–¹å®ç°" id="flux-å®˜æ–¹å®ç°">Flux å®˜æ–¹å®ç°</a></h2>
<p>Advantages:</p>
<ul>
<li>
<p>è®©å¼€å‘è€…å¯ä»¥å¿«é€Ÿäº†è§£æ•´ä¸ª App ä¸­çš„è¡Œä¸º(åœ¨ store ä¸­çœ‹å°±è¡Œäº†)</p>
</li>
<li>
<p>æ•°æ®å’Œä¸šåŠ¡é€»è¾‘ç»Ÿä¸€å­˜æ”¾å¥½ç®¡ç†</p>
</li>
<li>
<p>è®© View å•çº¯åŒ–åªè´Ÿè´£ UI çš„æ’ç‰ˆä¸éœ€è´Ÿè´£ state ç®¡ç†</p>
</li>
</ul>
<p>Disadvantages:</p>
<ul>
<li>ä»£ç å¿’å¤æ‚äº†, å†™ âœ å°åº”ç”¨ä¸åˆç®—</li>
</ul>
<p>æœ‰å“ªäº›æ¦‚å¿µ?</p>
<ul>
<li>
<p>actions ï¼šä¸€äº›åˆ—åŠ¨ä½œ(å°±æ˜¯å‡½æ•°), è´Ÿè´£å®šä¹‰æ‰€æœ‰æ”¹å˜ stateï¼ˆçŠ¶æ€ï¼‰çš„è¡Œä¸ºï¼Œå¯ä»¥è®©å¼€å‘è€…å¿«é€Ÿäº†è§£ App çš„å„ç§åŠŸèƒ½ï¼Œè‹¥ä½ æƒ³æ”¹å˜ state ä½ åªèƒ½å‘ actionã€‚æ³¨æ„ action å¯ä»¥æ˜¯åŒæ­¥æˆ–æ˜¯éåŒæ­¥</p>
</li>
<li>
<p>Dispatcher : æ˜¯ Flux æ¶æ„çš„æ ¸å¿ƒï¼Œæ¯ä¸ª App åªæœ‰ä¸€ä¸ª Dispatcherï¼Œå¹¶è´Ÿè´£å‘æ‰€æœ‰ store å‘é€ action äº‹ä»¶(store.dispatch())</p>
</li>
<li>
<p>Store: ä¸€ä¸ª App é€šå¸¸ä¼šæœ‰å¤šä¸ª store è´Ÿè´£å­˜æ”¾ä¸šåŠ¡é€»è¾‘ï¼Œæ ¹æ®ä¸åŒä¸šåŠ¡ä¼šæœ‰ä¸åŒ store; store è´Ÿè´£æ“ä½œå’Œå‚¨å­˜æ•°æ®(state);</p>
<ul>
<li>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ store åªæä¾› getter API è¯»å–èµ„æ–™ï¼Œè‹¥æƒ³æ”¹å˜ state ä¸€å¾‹å‘é€ action;</p>
</li>
<li>
<p>æä¾› API è®© store å¯ä»¥æ³¨å†Œ callback function(å°±æ˜¯æ³¨å†Œ listener, æŒ‡å®š state æ”¹å˜çš„å›è°ƒå‡½æ•°(ä¸€èˆ¬æ˜¯ setState()è§¦å‘ redraw), EventEmitter.on(actionType, callbackFn))ã€‚</p>
</li>
<li>
<p>éœ€è¦åœ¨ store é‡Œ, é€šè¿‡ AppDispatcher.register(fn) æ³¨å†Œå¤„ç† action çš„å‡½æ•°(å› ä¸º store æ¨¡å—è¿™é‡Œæ‰èƒ½ç›´æ¥è®¿é—® store å†…éƒ¨çš„ state), å¤„ç†å®Œæ¯•, é€šè¿‡ EventEmitter.emit(actionType) è§¦å‘ listener</p>
</li>
</ul>
</li>
<li>
<p>View: è¿™éƒ¨ä»½æ˜¯ React è´Ÿè´£çš„èŒƒç•´ï¼Œè´Ÿè´£æä¾›ç›‘å¬äº‹ä»¶çš„ callback functionï¼Œå½“äº‹ä»¶å‘ç”Ÿæ—¶é‡æ–°å–å¾—æ•°æ®å¹¶é‡ç»˜ View</p>
</li>
</ul>
<h2><a class="header" href="#redux" id="redux">Redux</a></h2>
<h3><a class="header" href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-redux" id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-redux">ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ redux</a></h3>
<p>ä¸‹å›¾å±•ç¤ºäº†ä½¿ç”¨ redux å’Œä¸ä½¿ç”¨ redux æ—¶, state å’Œç»„ä»¶é—´çš„äº¤äº’å…³ç³»:</p>
<p><img src="Snipaste_2018-06-27_12-45-41.png" alt="alt" /></p>
<ul>
<li>æ•´åˆäº† react-redux åï¼Œæˆ‘ä»¬çš„ React App å°±å¯ä»¥è§£å†³ä¼ ç»Ÿè·¨ Component ä¹‹é—´ä¼ é€’ state çš„é—®é¢˜å’Œå›°éš¾ã€‚åªè¦é€šè¿‡ Provider å°±å¯ä»¥è®©æ¯ä¸ª React App ä¸­çš„ Component å–ç”¨ store ä¸­çš„ stateï¼Œéå¸¸æ–¹ä¾¿</li>
<li>æ•°æ®å’Œä¸šåŠ¡é€»è¾‘æ”¾åˆ°äº†ä¸€ä¸ªåœ°æ–¹, ä¸€ç›®äº†ç„¶</li>
</ul>
<h3><a class="header" href="#åŸºæœ¬æ¦‚å¿µ" id="åŸºæœ¬æ¦‚å¿µ">åŸºæœ¬æ¦‚å¿µ</a></h3>
<p>http://www.ruanyifeng.com/blog/2016/09/redux_tutorial_part_three_react-redux.html</p>
<ul>
<li>
<p>State: Store å¯¹è±¡å¯ä»¥åŒ…å«å¤šä¸ª èŠ‚ç‚¹ ã€‚å¦‚æœæƒ³å¾—åˆ°æŸä¸ªæ—¶åˆ»çš„æ•°æ®ï¼Œå°±è¦å¯¹ Store ç”Ÿæˆå¿«ç…§ã€‚è¿™ç§æ—¶é—´åˆ‡ç‰‡çš„æ•°æ®é›†åˆï¼Œå°±å«åš State;</p>
<ul>
<li>
<p>å…¶æœ¬è´¨å°±æ˜¯ä¸€ä¸ª js å¯¹è±¡, <code>const state = store.getState();</code> å¯ä»¥å¾—åˆ°å½“å‰æ—¶åˆ»çš„ state</p>
<pre><code class="language-js">{
  counter: 0,
  todos: [] // å¾…åŠé¡¹
}
</code></pre>
</li>
<li>
<p>ä¸€ä¸ª State å¯¹åº”ä¸€ä¸ª Viewã€‚åªè¦ State ç›¸åŒï¼ŒView å°±ç›¸åŒ.</p>
</li>
<li>
<p>è‹¥è¦æ”¹å˜ stateï¼Œå¿…é¡» dispatch ä¸€ä¸ª action</p>
</li>
</ul>
</li>
<li>
<p>Action: å°±æ˜¯ View å‘å‡ºçš„é€šçŸ¥ï¼Œè¡¨ç¤º State åº”è¯¥è¦å‘ç”Ÿå˜åŒ–äº†</p>
<ul>
<li>
<p>æœ¬è´¨å°±æ˜¯ä¸€ä¸ª js å¯¹è±¡, ä½†æ˜¯ä¸€å®šè¦åŒ…å«&quot;type &quot;å±æ€§, å…¶ä»–æ²¡æœ‰è¦æ±‚, ä½†æ˜¯ä¹Ÿæœ‰è§„èŒƒ</p>
<pre><code class="language-js">{
  type: 'ADD_TODO',
  payload: {
    id: 1,
    content: 'å¾…åŠäº‹é¡¹1',
    completed: false
  }
}
</code></pre>
<p>å¦‚æœéœ€è¦æ–°å¢ä¸€ä¸ª todo é¡¹ï¼Œå®é™…ä¸Šå°±æ˜¯å°† payload å†™å…¥åˆ° state.todos æ•°ç»„ä¸­</p>
</li>
</ul>
</li>
<li>
<p>Action Creator: å®šä¹‰ä¸€ä¸ªå‡½æ•°æ¥ç”Ÿæˆ Action</p>
<ul>
<li>
<p>ç¤ºä¾‹:</p>
<pre><code class="language-js">var id = 1;
function addTodo(content) {
    return {
        type: &quot;ADD_TODO&quot;,
        payload: {
            id: id++,
            content: content, // å¾…åŠäº‹é¡¹å†…å®¹
            completed: false // æ˜¯å¦å®Œæˆçš„æ ‡è¯†
        }
    };
}
</code></pre>
</li>
<li>
<p>Action Creator å¯ä»¥æ˜¯åŒæ­¥çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯å¼‚æ­¥çš„</p>
</li>
</ul>
</li>
<li>
<p>Reducer: Store æ”¶åˆ° Action ä»¥åï¼Œå¿…é¡»ç»™å‡ºä¸€ä¸ªæ–°çš„ Stateï¼Œè¿™æ · View æ‰ä¼šå‘ç”Ÿå˜åŒ–ã€‚è¿™ç§ State çš„è®¡ç®—è¿‡ç¨‹å°±å«åš Reducerã€‚</p>
<ul>
<li>
<p>Reducer å¿…é¡»æ˜¯åŒæ­¥çš„çº¯å‡½æ•°ï¼Œå®ƒæ¥å— Action å’Œå½“å‰ State ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ State(Reducer å‡½æ•°é‡Œé¢ä¸èƒ½æ”¹å˜ Stateï¼Œå¿…é¡»è¿”å›ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡)ã€‚</p>
</li>
<li>
<p>store.dispatch(action)ä¹‹å, ä¼šè§¦å‘ reducer æ‰§è¡Œ(åˆ›å»º store æ—¶å€™, å°† reducer ä¼ å…¥äº†)</p>
</li>
<li>
<p>æœ€å¥½æŠŠ State å¯¹è±¡è®¾æˆåªè¯»ã€‚ä½ æ²¡æ³•æ”¹å˜å®ƒï¼Œè¦å¾—åˆ°æ–°çš„ Stateï¼Œå”¯ä¸€åŠæ³•å°±æ˜¯ç”Ÿæˆä¸€ä¸ªæ–°å¯¹è±¡ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯ï¼Œä»»ä½•æ—¶å€™ï¼Œä¸æŸä¸ª View å¯¹åº”çš„ State æ€»æ˜¯ä¸€ä¸ªä¸å˜çš„å¯¹è±¡</p>
<ul>
<li>
<p>(å¯ä»¥å€ŸåŠ© ImutableJs åº“)</p>
</li>
<li>
<p>å¯ä»¥ä½¿ç”¨ lodash çš„ cloneDeep</p>
</li>
<li>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨ Object.assign / map / filter/ ... ç­‰è¿”å›å‰¯æœ¬çš„å‡½æ•°</p>
</li>
</ul>
</li>
<li>
<p>ç¤ºä¾‹:</p>
<pre><code class="language-js">var initState = {
    counter: 0,
    todos: []
};

function reducer(state, action) {
    // â€» åº”ç”¨çš„åˆå§‹çŠ¶æ€æ˜¯åœ¨ç¬¬ä¸€æ¬¡æ‰§è¡Œ reducer æ—¶è®¾ç½®çš„ â€»
    if (!state) state = initState;

    switch (action.type) {
        case &quot;ADD_TODO&quot;:
            var nextState = _.cloneDeep(state); // ç”¨åˆ°äº† lodash çš„æ·±å…‹éš†
            nextState.todos.push(action.payload);
            return nextState;

        default:
            // ç”±äº nextState ä¼šæŠŠåŸ state æ•´ä¸ªæ›¿æ¢æ‰
            // è‹¥æ— ä¿®æ”¹ï¼Œå¿…é¡»è¿”å›åŸ stateï¼ˆå¦åˆ™å°±æ˜¯ undefinedï¼‰
            return state;
    }
}
</code></pre>
</li>
</ul>
</li>
</ul>
<p><img src="Snipaste_2018-06-27_09-07-13.png" alt="alt" /></p>
<blockquote>
<p>Redux æ•°æ®æµçš„æ¨¡å‹å¤§è‡´ä¸Šå¯ä»¥ç®€åŒ–æˆï¼šé¦–å…ˆï¼Œç”¨æˆ·å’Œ view äº¤äº’å‘å‡º Action (åŒ…å« type, data è¿™ä¸¤ä¸ªåŸºæœ¬å±æ€§): <code>store.dispatch(action);</code>ç„¶åï¼ŒStore è‡ªåŠ¨è°ƒç”¨ Reducer (å³å¤„ç† action çš„å‡½æ•°)ï¼Œå¹¶ä¸”ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼šå½“å‰ State å’Œæ”¶åˆ°çš„ Actionã€‚ Reducer ä¼šè¿”å›æ–°çš„ State : <code>let nextState = todoApp(previousState, action);</code> State ä¸€æ—¦æœ‰å˜åŒ–ï¼ŒStore å°±ä¼šè°ƒç”¨ç›‘å¬å‡½æ•°, ä¹Ÿå°±æ˜¯ <code>store.subscribe(listener);</code> ä¸­çš„ listener, listener å¯ä»¥é€šè¿‡<code>store.getState()</code>å¾—åˆ°å½“å‰çŠ¶æ€ç„¶å set å›å», å¦‚æœä½¿ç”¨çš„æ˜¯ Reactï¼Œè¿™æ—¶å¯ä»¥è§¦å‘é‡æ–°æ¸²æŸ“ Viewã€‚</p>
</blockquote>
<ul>
<li>Web åº”ç”¨æ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œè§†å›¾ä¸çŠ¶æ€æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚</li>
<li>æ‰€æœ‰çš„çŠ¶æ€ï¼Œä¿å­˜åœ¨ä¸€ä¸ªå¯¹è±¡é‡Œé¢ (Store)ã€‚</li>
<li>æ­¤å¤–, redux æœ‰ synchronousï¼ˆåŒæ­¥ï¼‰çš„æƒ…å½¢ï¼Œasynchronousï¼ˆéåŒæ­¥ï¼‰æƒ…å½¢</li>
</ul>
<h3><a class="header" href="#åŸºæœ¬-api" id="åŸºæœ¬-api">åŸºæœ¬ api</a></h3>
<p>https://github.com/kenberkeley/redux-simple-tutorial/blob/master/redux-advanced-tutorial.md</p>
<h4><a class="header" href="#store" id="store">store</a></h4>
<p><code>const store = createStore(reducer)</code></p>
<ul>
<li>getState()</li>
<li>dispatch(action)</li>
<li>subscribe(listener)</li>
</ul>
<p>ä¸‹é¢çœ‹çœ‹è¯¦ç»†è§£é‡Š:</p>
<p>Store: Redux åªæœ‰ä¸€ä¸ª Store è´Ÿè´£å­˜æ”¾æ•´ä¸ª App çš„ State, ä¸€ä¸ª Store å¯ä»¥åŒ…å«å¤šä¸ª state èŠ‚ç‚¹, ä¸€ä¸ª state èŠ‚ç‚¹ å¯¹åº”ä¸€ä¸ª reducer; å”¯ä¸€èƒ½æ”¹å˜ State çš„æ–¹æ³•åªæœ‰é€šè¿‡ store å‘é€ actionã€‚</p>
<p>æ€ä¹ˆåˆ›å»º?</p>
<p>createStore(reducer, [preloadedState], [enhancer]) ç”Ÿæˆ store, å¸¸ç”¨ <code>const store = createStore(reducer);</code> createStore å‡½æ•°æ¥å—å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¿”å›æ–°ç”Ÿæˆçš„ Store å¯¹è±¡</p>
<ul>
<li>
<p>ç¬¬ä¸€ä¸ªå‚æ•°æ”¾å…¥æˆ‘ä»¬çš„ reducer æˆ–æ˜¯æœ‰å¤šä¸ª reducers combineï¼ˆä½¿ç”¨ combineReducers()ï¼‰åœ¨ä¸€èµ·çš„ rootReducersã€‚</p>
</li>
<li>
<p>ç¬¬äºŒä¸ªå‚æ•°æˆ‘ä»¬ä¼šæ”¾å…¥å¸Œæœ›é¢„å…ˆè½½å…¥çš„ state ä¾‹å¦‚ï¼šuser session ç­‰ã€‚(å¦‚æœæä¾›äº†è¿™ä¸ªå‚æ•°ï¼Œå®ƒä¼šè¦†ç›– Reducer å‡½æ•°çš„é»˜è®¤åˆå§‹å€¼ã€‚) ä¸»è¦ç”¨äºå‰åç«¯åŒæ„æ—¶çš„æ•°æ®åŒæ­¥</p>
</li>
<li>
<p>ç¬¬ä¸‰ä¸ªå‚æ•°é€šå¸¸ä¼šæ”¾å…¥æˆ‘ä»¬æƒ³è¦ä½¿ç”¨ç”¨æ¥å¢å¼º Redux åŠŸèƒ½çš„ middlewaresï¼Œè‹¥æœ‰å¤šä¸ª middlewares çš„è¯ï¼Œé€šå¸¸ä¼šä½¿ç”¨ applyMiddleware æ¥æ•´åˆã€‚</p>
</li>
</ul>
<p>çœ‹çœ‹ç¤ºä¾‹:</p>
<pre><code class="language-js">import { createStore } from 'redux'
...
const store = createStore(reducer, initialState) // initialState ä¸»è¦ç”¨äºå‰åç«¯åŒæ„çš„æ•°æ®åŒæ­¥ï¼ˆè¯¦æƒ…è¯·å…³æ³¨ React æœåŠ¡ç«¯æ¸²æŸ“ï¼‰
</code></pre>
<p>å±äº Store çš„å››ä¸ªæ–¹æ³•:</p>
<ul>
<li>
<p>getState() è·å–å½“å‰æ—¶åˆ»çš„ state</p>
</li>
<li>
<p>dispatch(action) View å‘å‡º Action çš„å”¯ä¸€æ–¹æ³•</p>
<ul>
<li>å†…éƒ¨ä¼šè§¦å‘ Reducer çš„æ‰§è¡Œ, ä¸ºæ­¤, Store éœ€è¦çŸ¥é“ Reducer å‡½æ•°, åšæ³•å°±æ˜¯åœ¨ç”Ÿæˆ Store çš„æ—¶å€™, å°† Reducer ä¼ å…¥ createStore æ–¹æ³•.</li>
</ul>
</li>
<li>
<p>subscribe(listener) è®¾ç½®ç›‘å¬å‡½æ•°ï¼Œä¸€æ—¦ State å‘ç”Ÿå˜åŒ–ï¼Œå°±è‡ªåŠ¨æ‰§è¡Œè¿™ä¸ªå‡½æ•°</p>
<ul>
<li>
<p>åªè¦æŠŠ View çš„æ›´æ–°å‡½æ•°ï¼ˆå¯¹äº React é¡¹ç›®ï¼Œå°±æ˜¯ç»„ä»¶çš„ render æ–¹æ³•æˆ– setState æ–¹æ³•ï¼‰æ”¾å…¥ listenï¼Œå°±ä¼šå®ç° View çš„è‡ªåŠ¨æ¸²æŸ“ã€‚</p>
</li>
<li>
<p>store.subscribe æ–¹æ³•è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè°ƒç”¨è¿™ä¸ªå‡½æ•°å°±å¯ä»¥è§£é™¤ç›‘å¬ã€‚</p>
</li>
</ul>
</li>
<li>
<p>replaceReducer(nextReducer) ä¸€èˆ¬åœ¨ Webpack Code-Splitting æŒ‰éœ€åŠ è½½çš„æ—¶å€™ç”¨</p>
</li>
</ul>
<h4><a class="header" href="#reducer" id="reducer">reducer</a></h4>
<p>reducer å°±æ˜¯ä¸€ä¸ªå‡½æ•°, æ¥æ”¶ old state å’Œ action, ç”Ÿæˆ new state;</p>
<p>combineReducersï¼šcombineReducers(reducers) , combineReducers å¯ä»¥å°†å¤šä¸ª reducers è¿›è¡Œæ•´åˆå¹¶å›ä¼ ä¸€ä¸ª</p>
<pre><code class="language-js">import { combineReducers } from 'redux';

// è¿™ç§å†™æ³•æœ‰ä¸€ä¸ªå‰æï¼Œå°±æ˜¯ State çš„å±æ€§åå¿…é¡»ä¸å­ Reducer åŒå
const chatReducer = combineReducers({
  chatLog,
  statusMessage,
  userName
})

// å¦‚æœä¸åŒåï¼Œå°±è¦é‡‡ç”¨ä¸‹é¢çš„å†™æ³•
// æ ¹æ® State çš„ key å»æ‰§è¡Œç›¸åº”çš„å­ Reducerï¼Œå¹¶å°†è¿”å›ç»“æœåˆå¹¶æˆä¸€ä¸ªå¤§çš„ State å¯¹è±¡ã€‚
const reducer = combineReducers({
  a: doSomethingWithA,
  b: processB,`
  c: c
})
// ç­‰åŒäº
function reducer(state = {}, action) {
  return {
    a: doSomethingWithA(state.a, action),
    b: processB(state.b, action),
    c: c(state.c, action)
  }
}

export default todoApp;
</code></pre>
<h4><a class="header" href="#applymiddleware" id="applymiddleware">applyMiddleware</a></h4>
<p>redux æä¾›çš„å·¥å…·å‡½æ•°</p>
<p>applyMiddleware(...middlewares) è®©å¼€å‘è€…å¯ä»¥åœ¨ req å’Œ res ä¹‹é—´è¿›è¡Œä¸€äº›æ“ä½œã€‚åœ¨ Redux ä¸­ Middleware åˆ™æ˜¯æ‰®æ¼” action åˆ°è¾¾ reducer å‰çš„ç¬¬ä¸‰æ–¹æ‰©å……ã€‚è€Œ applyMiddleware å¯ä»¥å°†å¤šä¸ª middlewares æ•´åˆå¹¶å›ä¼ ä¸€ä¸ª Functionï¼Œä¾¿äºä½¿ç”¨ã€‚</p>
<h4><a class="header" href="#bindactioncreators" id="bindactioncreators">bindActionCreators</a></h4>
<p>å·¥å…·å‡½æ•°</p>
<p>bindActionCreators(actionCreators, dispatch) bindActionCreators å¯ä»¥å°† actionCreators å’Œ dispatch ç»‘å®šï¼Œå¹¶å›ä¼ ä¸€ä¸ª Function ã€‚ä½†è‹¥æ˜¯ä½¿ç”¨ react-redux å¯ä»¥ç”¨ connect è®© dispatch è¡Œä¸ºæ›´å®¹æ˜“ç®¡ç†</p>
<ul>
<li>
<p>compose(...functions) å°† function ç”±å³åˆ°å·¦åˆå¹¶å¹¶å›ä¼ ä¸€ä¸ª Function</p>
<pre><code class="language-js">const store = createStore(
    reducer,
    compose(applyMiddleware(thunk), DevTools.instrument())
);
</code></pre>
</li>
</ul>
<h3><a class="header" href="#çº¯-redux-çš„-api-ç¤ºä¾‹åŒæ­¥ç‰ˆæœ¬çš„-api" id="çº¯-redux-çš„-api-ç¤ºä¾‹åŒæ­¥ç‰ˆæœ¬çš„-api">çº¯ redux çš„ api ç¤ºä¾‹(åŒæ­¥ç‰ˆæœ¬çš„ api)</a></h3>
<pre><code class="language-js">import React from &quot;react&quot;;
import { createStore, combineReducers, bindActionCreators } from &quot;redux&quot;;

function run() {
    // Store initial state
    const initialState = { count: 0 };

    // reducer
    // ä»£è¡¨ state çš„å¤„ç†é€»è¾‘
    const counter = (state = initialState, action) =&gt; {
        switch (action.type) {
            case &quot;PLUS_ONE&quot;:
                return { count: state.count + 1 };
            case &quot;MINUS_ONE&quot;:
                return { count: state.count - 1 };
            case &quot;CUSTOM_COUNT&quot;:
                return {
                    count: state.count + action.payload.count
                };
            default:
                break;
        }
        return state;
    };

    const todos = (state = {}) =&gt; state; // å¾…æ·»åŠ åˆ° Store ä¸­çš„æ–°èŠ‚ç‚¹

    // Create store
    const store = createStore(
        // combineReducers å¯ä»¥å¸®åŠ©ç»´æŠ¤å¤šä¸ª state è¿› store ä¸­
        //è¿™æ · Store ä¸­å°±æœ‰ ä¸¤ä¸ªèŠ‚ç‚¹äº†
        combineReducers({
            todos,
            counter
        })
    );

    // Action creator
    function plusOne() {
        // action
        return { type: &quot;PLUS_ONE&quot; };
    }

    function minusOne() {
        return { type: &quot;MINUS_ONE&quot; };
    }

    function customCount(count) {
        return { type: &quot;CUSTOM_COUNT&quot;, payload: { count } };
    }

    // bindActionCreators æ˜¯ redux æä¾›çš„å·¥å…·å‡½æ•°, å°† dispatcher ç»‘å®šåˆ° action å†…éƒ¨
    // çœæ‰äº†æ‰‹åŠ¨ dispatch è¿™ç›´æ¥è°ƒç”¨action å³å¯
    plusOne = bindActionCreators(plusOne, store.dispatch);

    store.subscribe(() =&gt; console.log(store.getState()));
    // store.dispatch(plusOne());
    plusOne();
    store.dispatch(minusOne());
    store.dispatch(customCount(5));
}
export default () =&gt; (
    &lt;div&gt;
        &lt;button onClick={run}&gt;Run&lt;/button&gt;
        &lt;p&gt;* è¯·æ‰“å¼€æ§åˆ¶å°æŸ¥çœ‹è¿è¡Œç»“æœ&lt;/p&gt;
    &lt;/div&gt;
);
</code></pre>
<h3><a class="header" href="#react-redux" id="react-redux">react-redux</a></h3>
<p>react-redux æä¾› ä¸€ä¸ªå‡½æ•° <code>connect</code>, é€šè¿‡é«˜é˜¶ç»„ä»¶çš„æ–¹å¼, å°† redux ä¸­çš„ store å’Œ react ä¸­çš„ component é“¾æ¥èµ·æ¥</p>
<pre><code class="language-jsx">import React from &quot;react&quot;;
import { bindActionCreators, createStore } from &quot;redux&quot;;
import { Provider, connect } from &quot;react-redux&quot;;

// Store initial state
const initialState = { count: 0 };

// reducer
const counter = (state = initialState, action) =&gt; {
    switch (action.type) {
        case &quot;PLUS_ONE&quot;:
            return { count: state.count + 1 };
        case &quot;MINUS_ONE&quot;:
            return { count: state.count - 1 };
        case &quot;CUSTOM_COUNT&quot;:
            return { count: state.count + action.payload.count };
        default:
            break;
    }
    return state;
};

// Create store
const store = createStore(counter);

// Action creator
function plusOne() {
    // action
    return { type: &quot;PLUS_ONE&quot; };
}

function minusOne() {
    return { type: &quot;MINUS_ONE&quot; };
}

export class Counter extends React.Component {
    render() {
        // åœ¨è¿™é‡Œé€šè¿‡ props å¯ä»¥æ‹¿åˆ° state ä¸­æˆ‘ä»¬å…³å¿ƒçš„æ•°æ® å’Œ actions
        const { count, plusOne, minusOne } = this.props;
        return (
            &lt;div className=&quot;counter&quot;&gt;
                &lt;button onClick={minusOne}&gt;-&lt;/button&gt;
                &lt;span style={{ display: &quot;inline-block&quot;, margin: &quot;0 10px&quot; }}&gt;
                    {count}
                &lt;/span&gt;
                &lt;button onClick={plusOne}&gt;+&lt;/button&gt;
            &lt;/div&gt;
        );
    }
}

/**
 * bind state data of which wo take care to props
 * ç»‘å®šstateä¸­æˆ‘ä»¬å…³å¿ƒçš„æ•°æ®åˆ° props (ä¸èƒ½æ•´ä¸ª store ç»‘å®šåˆ° props, å› ä¸º state ä¸­å’Œå½“å‰ç»„ä»¶æ— å…³çš„æ•°æ®æ›´æ–°æ— éœ€å‡ºå‘ç»„ä»¶é‡ç»˜
 * @param state store.getState()
 */
function mapStateToProps(state) {
    return {
        count: state.count
    };
}

/**
 * ç»‘å®š action åˆ° props
 * @param dispatch
 */
function mapDispatchToProps(dispatch) {
    return bindActionCreators({ plusOne, minusOne }, dispatch);
}

// è¿æ¥
const ConnectedCounter = connect(mapStateToProps, mapDispatchToProps)(Counter);

export default class CounterSample extends React.Component {
    render() {
        return (
            // æ ¹èŠ‚ç‚¹é€šè¿‡ Provider æä¾› store, å­ç»„ä»¶å°±å¯ä»¥éšæ—¶è®¿é—® store ä¸­çš„æ•°æ®
            &lt;Provider store={store}&gt;
                &lt;ConnectedCounter /&gt;
            &lt;/Provider&gt;
        );
    }
}
</code></pre>
<h3><a class="header" href="#å¼‚æ­¥-action" id="å¼‚æ­¥-action">å¼‚æ­¥ Action</a></h3>
<p>è¦ä½¿ç”¨ asynchronousï¼ˆéåŒæ­¥ï¼‰çš„è¡Œä¸ºçš„è¯éœ€è¦ä½¿ç”¨å…¶ä¸­ä¸€ç§ middlewareï¼š redux-thunkã€redux-promise æˆ– redux-promise-middleware ï¼Œè¿™æ ·å¯ä»¥è®©ä½ åœ¨ actions ä¸­ dispatch Promises è€Œé functionã€‚</p>
<p><img src="./Snipaste_2019-10-26_21-38-03.png" alt="alt" /></p>
<p>è¿‡ç¨‹æ˜¯è¿™æ ·çš„: ç”¨æˆ·åœ¨ view è§¦å‘ä¸€ä¸ª action (å°±æ˜¯æ™®é€š action å¹¶æ²¡æœ‰æ‰€è°“çš„ å¼‚æ­¥ action), å¹¶æ²¡æœ‰è¢« dispatch ç»™ reducer, è€Œæ˜¯è¢« Middlewares æ‹¦æˆª, å†…éƒ¨å¤„ç†å, ç”Ÿæˆæ–°çš„æ ‡å‡†çš„ action ,ç»™ reducer;</p>
<p>æ‰€è°“çš„ å¼‚æ­¥ action, å¹¶ä¸æ˜¯ç‰¹æ®Šçš„ action, è€Œæ˜¯å¤šä¸ª action çš„ç»„åˆä½¿ç”¨</p>
<p>Middleware åœ¨ dispatcher ä¸­å¯¹ action è¿›è¡Œæ‹¦æˆªè¿›è¡Œç‰¹æ®Šå¤„ç†</p>
<h3><a class="header" href="#thunk-saga" id="thunk-saga">thunk, saga</a></h3>
<p>todo</p>
<h3><a class="header" href="#è°ƒè¯•å·¥å…·" id="è°ƒè¯•å·¥å…·">è°ƒè¯•å·¥å…·</a></h3>
<p>Redux å¼€å‘è°ƒè¯•å·¥å…·ï¼šredux-devtools
React åº”ç”¨æ— åˆ·æ–°ä¿å­˜å·¥å…·ï¼šreact-transform</p>
<h3><a class="header" href="#demoä¸€ä¸ª-todo-app" id="demoä¸€ä¸ª-todo-app">demo(ä¸€ä¸ª todo-app)</a></h3>
<p><img src="Snipaste_2018-06-27_11-57-23.png" alt="alt" /></p>
<p>æ•´ä¸ª React Redux App çš„èµ„æ–™æµç¨‹å›¾ï¼ˆä½¿ç”¨è€…ä¸ View äº’åŠ¨ =&gt; dispatch å‡º Action =&gt; Reducers ä¾æ® action tyoe åˆ†é…åˆ°å¯¹åº”å¤„ç†æ–¹å¼ï¼Œå›ä¼ æ–°çš„ state =&gt; é€è¿‡ React Redux ä¼ é€ç»™ Reactï¼ŒReact é‡æ–°ç»˜åˆ¶ Viewï¼‰ï¼š</p>
<p>react-redux æ•´åˆ react å’Œ redux,</p>
<p><img src="Snipaste_2018-06-27_12-43-37.png" alt="alt" /></p>
<h2><a class="header" href="#redux-å’Œ-flux-çš„ä¸€äº›å·®å¼‚" id="redux-å’Œ-flux-çš„ä¸€äº›å·®å¼‚">Redux å’Œ Flux çš„ä¸€äº›å·®å¼‚</a></h2>
<p><img src="Snipaste_2018-06-27_00-31-39.png" alt="alt" /></p>
<ul>
<li>
<p>åªä½¿ç”¨ä¸€ä¸ª store å°†æ•´ä¸ªåº”ç”¨ç¨‹å¼çš„çŠ¶æ€ (state) ç”¨ç‰©ä»¶æ ‘ (object tree) çš„æ–¹å¼å‚¨å­˜èµ·æ¥; åŸç”Ÿçš„ Flux ä¼šæœ‰è®¸å¤šåˆ†æ•£çš„ store å‚¨å­˜å„ä¸ªä¸åŒçš„çŠ¶æ€</p>
<pre><code class="language-js">//åŸç”Ÿ Flux çš„ store
const userStore = {
    name: &quot;&quot;
};
const todoStore = {
    text: &quot;&quot;
};

// Redux çš„å•ä¸€ store
const state = {
    userState: {
        name: &quot;&quot;
    },
    todoState: {
        text: &quot;&quot;
    }
};
</code></pre>
</li>
<li>
<p>Redux å¹¶æ²¡æœ‰åƒ Flux è®¾è®¡æœ‰ Dispatcher(å”¯ä¸€å¯ä»¥æ”¹å˜ state çš„æ–¹æ³•å°±æ˜¯å‘é€ actionï¼Œè¿™éƒ¨ä»½å’Œ Flux ç±»ä¼¼, action éƒ½æ˜¯ä¸€ä¸ªåŒ…å« type å’Œ payload çš„å¯¹è±¡); Redux æ‹¥æœ‰ Flux æ‰€æ²¡æœ‰çš„ Reducerã€‚Reducer æ ¹æ® action çš„ type å»æ‰§è¡Œå¯¹åº”çš„ state åšå˜åŒ–çš„å‡½å¼å«åš Reducerã€‚ä½ å¯ä»¥ä½¿ç”¨ switch æˆ–æ˜¯ä½¿ç”¨å‡½å¼ mapping çš„æ–¹å¼å»å¯¹åº”å¤„ç†çš„æ–¹å¼</p>
</li>
<li>
<p>Redux æ‹¥æœ‰è®¸å¤šæ–¹ä¾¿å¥½ç”¨çš„è¾…åŠ©æµ‹è¯•å·¥å…·ï¼ˆä¾‹å¦‚ï¼šredux-devtoolsã€react-transform-boilerplateï¼‰ï¼Œæ–¹ä¾¿æµ‹è¯•å’Œä½¿ç”¨ Hot Module Reloadã€‚</p>
</li>
</ul>
<h2><a class="header" href="#immutablejs" id="immutablejs">ImmutableJS</a></h2>
<p>https://www.youtube.com/watch?v=I7IdS-PbEgI
http://react-immutable-proptypes/ (é€‚ç”¨äº imutable çš„ proptypes éªŒè¯)</p>
<p>ä¸ºä»€ä¹ˆéœ€è¦ ä¸å¯å˜æ•°æ®?</p>
<ul>
<li>ä¼˜åŒ–æ€§èƒ½ (react åˆ¤æ–­ç»„ä»¶æ˜¯å¦è¦åˆ·æ–°æ˜¯æ ¹æ® state æ˜¯å¦æœ‰å˜åŒ–æ¥å†³å®šçš„, é‡‡ç”¨ä¸å¯å˜æ•°æ®é‚£ä¹ˆ state ä¸€æ—¦, react å¯ä»¥æ¯”è¾ƒ æ–°æ—§ ä¸¤ä¸ª state æ˜¯å¦æ˜¯ä¸€ä¸ªå¯¹è±¡æ¥å†³å®šæ˜¯å¦åˆ·æ–°ç»„ä»¶, è€Œä¸å¿…è¿›å…¥ state å†…éƒ¨å»æ¯”è¾ƒå±æ€§æ˜¯å¦æœ‰å˜åŒ–)</li>
<li>å®¹æ˜“è°ƒè¯•è·Ÿè¸ª (éšæ—¶å¯ä»¥çœ‹åˆ° æ–°æ—§ stat çš„å…·ä½“å€¼, å¯ä»¥æ–¹ä¾¿çš„å¯¹æ¯”)</li>
</ul>
<p>redux è¿è¡Œçš„åŸºç¡€éœ€è¦ä¿ state æ˜¯ä¸å¯å˜æ•°æ®</p>
<p>es6 åŸç”Ÿæä¾› api ä¸å¯å˜æ•°æ®ä¿®æ”¹:</p>
<pre><code class="language-js">const state = {
    filter: &quot;completed&quot;,
    todos: [&quot;a&quot;]
};
// å†™æ³•1:
const newState = {
    ...state,
    todos: [...state.todos, &quot;b&quot;]
};
// å†™æ³•2
const newState2 = Object.assign({}, state, { todos: [...state.todos, &quot;b&quot;] });
</code></pre>
<p>ImmutableJs æä¾›äº†ä¿®æ”¹å·¥å…·ç±»:</p>
<pre><code class="language-js">import update from 'immutability-helper';

...
</code></pre>
<p>immer ä¹Ÿæœ‰ç›¸å…³å·¥å…·ç±»:</p>
<pre><code class="language-js">import produce from 'immer';

...
</code></pre>
<p>ImmutableJS å°è£…äº†è‡ªå·±çš„æ•°æ®ç»“æ„: 7 ç§ä¸å¯ä¿®æ”¹çš„ç±»å‹ï¼šListã€Mapã€Stackã€OrderedMapã€Setã€OrderedSetã€Recordã€‚</p>
<pre><code class="language-js">import Immutable from &quot;immutable&quot;;

var map1 = Immutable.Map({ a: 1, b: 3 });
var map2 = map1.set(&quot;a&quot;, 2); // è¿”å›ä¸€ä¸ªæ–°çš„map

map1.get(&quot;a&quot;); // 1
map2.get(&quot;a&quot;); // 2
</code></pre>
<pre><code class="language-js">const Map= Immutable.Map;

// 1. Map å¤§å°
const map1 = Map({ a: 1 });
map1.size
// =&gt; 1

// 2. æ–°å¢æˆ–å–ä»£ Map å…ƒç´ 
// set(key: K, value: V)
const map2 = map1.set('a', 7);
// =&gt; Map { &quot;a&quot;: 7 }

// 3. åˆ é™¤å…ƒç´ 
// delete(key: K)
const map3 = map1.delete('a');
// =&gt; Map {}

// 4. æ¸…é™¤ Map å†…å®¹
const map4 = map1.clear();
// =&gt; Map {}

// 5. æ›´æ–° Map å…ƒç´ 
// update(updater: (value: Map&lt;K, V&gt;) =&gt; Map&lt;K, V&gt;)
// update(key: K, updater: (value: V) =&gt; V)
// update(key: K, notSetValue: V, updater: (value: V) =&gt; V)
const map5 = map1.update('a', () =&gt; (7))
// =&gt; Map { &quot;a&quot;: 7 }

// 6. åˆå¹¶ Map
const map6 = Map({ b: 3 });
map1.merge(map6);
// =&gt; Map { &quot;a&quot;: 1, &quot;b&quot;: 3 }
--------------------------
const List= Immutable.List;

// 1. å–å¾— List é•¿åº¦
const arr1 = List([1, 2, 3]);
arr1.size
// =&gt; 3

// 2. æ–°å¢æˆ–å–ä»£ List å…ƒç´ å†…å®¹
// set(index: number, value: T)
// å°† index ä½ç½®çš„å…ƒç´ æ›¿æ¢
const arr2 = arr1.set(-1, 7);
// =&gt; [1, 2, 7]
const arr3 = arr1.set(4, 0);
// =&gt; [1, 2, 3, undefined, 0]

// 3. åˆ é™¤ List å…ƒç´ 
// delete(index: number)
// åˆ é™¤ index ä½ç½®çš„å…ƒç´ 
const arr4 = arr1.delete(1);
// =&gt; [1, 3]

// 4. æ’å…¥å…ƒç´ åˆ° List
// insert(index: number, value: T)
// åœ¨ index ä½ç½®æ’å…¥ value
const arr5 = arr1.insert(1, 2);
// =&gt; [1, 2, 2, 3]

// 5. æ¸…ç©º List
// clear()
const arr6 = arr1.clear();
// =&gt; []
------------------------
const Set= Immutable.Set;

// 1. å»ºç«‹ Set
const set1 = Set([1, 2, 3]);
// =&gt; Set { 1, 2, 3 }

// 2. æ–°å¢å…ƒç´ 
const set2 = set1.add(1).add(5);
// =&gt; Set { 1, 2, 3, 5 }
// ç”±äº Set ä¸ºä¸èƒ½é‡å¤é›†åˆï¼Œæ•… 1 åªèƒ½å‡ºç°ä¸€æ¬¡

// 3. åˆ é™¤å…ƒç´ 
const set3 = set1.delete(3);
// =&gt; Set { 1, 2 }

// 4. å–è”é›†
const set4 = Set([2, 3, 4, 5, 6]);
set1.union(set4);
// =&gt; Set { 1, 2, 3, 4, 5, 6 }

// 5. å–äº¤é›†
set1.intersect(set4);
// =&gt; Set { 2, 3 }

// 6. å–å·®é›†
set1.subtract(set4);
// =&gt; Set { 1 }
</code></pre>
<h1><a class="header" href="#è·¯ç”±-react-router" id="è·¯ç”±-react-router">è·¯ç”± react-router</a></h1>
<p>è·¯ç”±(routing)åº“, é€šè¿‡ URL çš„å˜åŒ–æ¥ç®¡ç†å¯¹åº”çš„çŠ¶æ€å’Œç»„ä»¶.</p>
<p>ä¼ ç»Ÿçš„ Web å¼€å‘ä¸»è¦æ˜¯ç”±æœåŠ¡å™¨ç®¡ç† URL Routing å’Œæ¸²æŸ“ HTML é¡µé¢ï¼Œè¿‡å¾€æ¯æ¬¡ URL ä¸€æ¢, å°±éœ€è¦é‡æ–° server ç«¯é‡æ–°è½½å…¥é¡µé¢ã€‚ç°åœ¨è¿›åŒ–åˆ°ç”±å‰ç«¯è´Ÿè´£ URL çš„ routing ç®¡ç†. åœ¨ React å¼€å‘ä¸–ç•Œä¸­ä¸»æµæ˜¯ä½¿ç”¨ react-router</p>
<p>æœ€æ–°ç‰ˆ: React Router4(https://github.com/ReactTraining/react-router), 2.x æœ¬ç‰ˆæ˜¯ static route, 4.x ç‰ˆæœ¬æ˜¯ dynamic route</p>
<p>React Router è¢«æ‹†åˆ†æˆä¸‰ä¸ªåŒ…ï¼šreact-router(æœ€å°æ ¸å¿ƒ, åŒ…å«è¿›åé¢ä¸¤ä¸ªäº†),react-router-dom(web)å’Œ react-router-native(app)ã€‚react-router æä¾›æ ¸å¿ƒçš„è·¯ç”±ç»„ä»¶ä¸å‡½æ•°ã€‚å…¶ä½™ä¸¤ä¸ªåˆ™æä¾›è¿è¡Œç¯å¢ƒï¼ˆå³æµè§ˆå™¨ä¸ react-nativeï¼‰æ‰€éœ€çš„ç‰¹å®šç»„ä»¶</p>
<h2><a class="header" href="#è·¯ç”±æ ‡ç­¾çš„ä½¿ç”¨" id="è·¯ç”±æ ‡ç­¾çš„ä½¿ç”¨">è·¯ç”±æ ‡ç­¾çš„ä½¿ç”¨</a></h2>
<h3><a class="header" href="#router-è·¯ç”±å®¹å™¨" id="router-è·¯ç”±å®¹å™¨">Router-è·¯ç”±å®¹å™¨</a></h3>
<p>æœ‰å‡ ä¸ªå®ç°:</p>
<ul>
<li>
<p><BrowserRouter>ï¼šä½¿ç”¨ HTML5 æä¾›çš„ history API æ¥ä¿æŒ UI å’Œ URL çš„åŒæ­¥ï¼›éœ€è¦ server ç«¯çš„é…åˆ</p>
</li>
<li>
<p><HashRouter>ï¼šä½¿ç”¨ URL çš„ hash, å¸¦æœ‰ &quot;#&quot;çš„ url (ä¾‹å¦‚ï¼šwindow.location.hash); ç”¨äºæ”¯æŒä½ç‰ˆæœ¬çš„æµè§ˆå™¨</p>
</li>
<li>
<p><MemoryRouter>ï¼šèƒ½åœ¨å†…å­˜ä¿å­˜ä½  â€œURLâ€ çš„å†å²çºªå½•(å¹¶æ²¡æœ‰å¯¹åœ°å€æ è¯»å†™)ï¼›é¡µé¢å˜åŠ¨ä¸ä¼šåæ˜ åˆ°æµè§ˆå™¨åœ°å€æ </p>
</li>
<li>
<p><NativeRouter>ï¼šä¸ºä½¿ç”¨ React Native æä¾›è·¯ç”±æ”¯æŒï¼›</p>
</li>
<li>
<p><StaticRouter>ï¼šä»ä¸ä¼šæ”¹å˜åœ°å€ï¼›</p>
</li>
</ul>
<h3><a class="header" href="#route-è·¯ç”±ç»„ä»¶æ˜ å°„" id="route-è·¯ç”±ç»„ä»¶æ˜ å°„">Route-è·¯ç”±ç»„ä»¶æ˜ å°„</a></h3>
<p>è´Ÿè´£ URL å’Œå¯¹åº”çš„ç»„ä»¶æ˜ å°„ï¼Œå¯ä»¥æœ‰å¤šä¸ª Route è§„åˆ™ä¹Ÿå¯ä»¥æœ‰åµŒå¥—ï¼ˆnestedï¼‰Routing</p>
<h4><a class="header" href="#å±æ€§" id="å±æ€§">å±æ€§</a></h4>
<ul>
<li>
<p>pathï¼ˆstringï¼‰: è·¯ç”±åŒ¹é…è·¯å¾„, æ”¯æŒ regex(path=&quot;/order/:direction(asc|desc)&quot;)ã€‚</p>
<ul>
<li>
<p>æ²¡æœ‰ path å±æ€§çš„ Route æ€»æ˜¯ä¼š åŒ¹é…(æ¸²æŸ“)ï¼‰ï¼›</p>
</li>
<li>
<p>æœ‰å¤šä¸ª path åŒ¹é…å½“å‰ url, åˆ™å¯¹åº”çš„å¤šä¸ª component éƒ½ä¼šæ˜¾ç¤º (&quot;å¤šåŒ¹é…&quot;)</p>
</li>
</ul>
</li>
<li>
<p>component (è¡¨è¾¾å¼): å¯¹åº”çš„ç»„ä»¶</p>
</li>
<li>
<p>render: å‡½æ•°, æ¥å—ä¸€ä¸ª props, è¿”å› component</p>
</li>
<li>
<p>exactï¼ˆboolï¼‰ï¼šå‡ºç°æ—¶ï¼Œåˆ™è¦æ±‚è·¯å¾„ä¸ location.pathname å¿…é¡»å®Œå…¨åŒ¹é…, å¯¹åº”ç»„ä»¶æ‰ä¼šæ˜¾ç¤º</p>
</li>
<li>
<p>strictï¼ˆboolï¼‰ï¼štrue çš„æ—¶å€™ï¼Œæœ‰ç»“å°¾æ–œçº¿çš„ path è·¯å¾„åªèƒ½åŒ¹é…æœ‰æ–œçº¿çš„ location.pathnameï¼›</p>
</li>
<li>
<p>location: object <code>&lt;Route&gt;</code>å…ƒç´ å°è¯•å°†å…¶è·¯å¾„ä¸å½“å‰ history locationï¼ˆé€šå¸¸æ˜¯å½“å‰æµè§ˆå™¨ URLï¼‰ç›¸åŒ¹é…ã€‚ä½†æ˜¯ï¼Œä¹Ÿå¯ä»¥äººä¸ºæŒ‡å®šç‰¹å®šçš„ location è¿›è¡ŒåŒ¹é…</p>
<blockquote>
<p>Switch ä¸­çš„ location ä¼šè¦†ç›– Route ä¸­çš„ location</p>
</blockquote>
</li>
<li>
<p>sensitive: bool è·¯å¾„å¤§å°å†™æ•æ„Ÿ</p>
</li>
</ul>
<h4><a class="header" href="#é€šè¿‡-url-ä¼ é€’å‚æ•°ç»™-route" id="é€šè¿‡-url-ä¼ é€’å‚æ•°ç»™-route">é€šè¿‡ url ä¼ é€’å‚æ•°ç»™ Route</a></h4>
<p>ä¼ é€’: <code>&lt;Route path=&quot;/topic/:id&quot;&gt;&lt;/Route&gt;</code></p>
<p>è·å–: <code>this.props.match.params</code></p>
<p>èƒ½å¤Ÿæ”¾å…¥ url å‚æ•°ä¸­çš„ state ä¿¡æ¯å°½é‡æ”¾ url å‚æ•°ä¸­</p>
<pre><code class="language-js">import React from &quot;react&quot;;
import { BrowserRouter as Router, Route, Link } from &quot;react-router-dom&quot;;

const Topic = ({ match }) =&gt; &lt;h1&gt;Topic {match.params.id}&lt;/h1&gt;;

export default class RouterParams extends React.PureComponent {
    render() {
        return (
            &lt;Router&gt;
                &lt;div&gt;
                    &lt;ul id=&quot;menu&quot;&gt;
                        &lt;li&gt;
                            &lt;Link to=&quot;/topic/1&quot;&gt;Topic 1&lt;/Link&gt;
                        &lt;/li&gt;
                        &lt;li&gt;
                            &lt;Link to=&quot;/topic/2&quot;&gt;Topic 2&lt;/Link&gt;
                        &lt;/li&gt;
                        &lt;li&gt;
                            &lt;Link to=&quot;/topic/3&quot;&gt;Topic 3&lt;/Link&gt;
                        &lt;/li&gt;
                    &lt;/ul&gt;

                    &lt;div id=&quot;page-container&quot;&gt;
                        &lt;Route path=&quot;/topic/:id&quot; component={Topic} /&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/Router&gt;
        );
    }
}
</code></pre>
<h4><a class="header" href="#åµŒå¥—è·¯ç”±" id="åµŒå¥—è·¯ç”±">åµŒå¥—è·¯ç”±</a></h4>
<pre><code class="language-js">import React from &quot;react&quot;;
import { BrowserRouter as Router, Route, Link } from &quot;react-router-dom&quot;;

const SonCategory = ({ match }) =&gt; &lt;h1&gt;Sub Category {match.params.subId}&lt;/h1&gt;;

const SubCategory = ({ match }) =&gt; (
    &lt;div&gt;
        &lt;h1&gt;Category {match.params.id}&lt;/h1&gt;

        &lt;ul id=&quot;menu&quot;&gt;
            &lt;li&gt;
                &lt;Link to={`/category/${match.params.id}/sub/1`}&gt;
                    Sub Category 1
                &lt;/Link&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;Link to={`/category/${match.params.id}/sub/2`}&gt;
                    Sub Category 2
                &lt;/Link&gt;
            &lt;/li&gt;
            &lt;li&gt;
                &lt;Link to={`/category/${match.params.id}/sub/3`}&gt;
                    Sub Category 3
                &lt;/Link&gt;
            &lt;/li&gt;
        &lt;/ul&gt;
        &lt;div id=&quot;page-container-2&quot;&gt;
            &lt;Route path=&quot;/category/:id/sub/:subId&quot; component={SonCategory} /&gt;
        &lt;/div&gt;
    &lt;/div&gt;
);

export default class NestedRoute extends React.PureComponent {
    render() {
        return (
            &lt;Router&gt;
                &lt;div&gt;
                    &lt;ul id=&quot;menu&quot;&gt;
                        &lt;li&gt;
                            &lt;Link to=&quot;/category/1&quot;&gt;Category 1&lt;/Link&gt;
                        &lt;/li&gt;
                        &lt;li&gt;
                            &lt;Link to=&quot;/category/2&quot;&gt;Category 2&lt;/Link&gt;
                        &lt;/li&gt;
                        &lt;li&gt;
                            &lt;Link to=&quot;/category/3&quot;&gt;Category 3&lt;/Link&gt;
                        &lt;/li&gt;
                    &lt;/ul&gt;

                    &lt;div id=&quot;page-container&quot;&gt;
                        &lt;Route path=&quot;/category/:id&quot; component={SubCategory} /&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/Router&gt;
        );
    }
}
</code></pre>
<h4><a class="header" href="#route-ä¸‰ç§æ¸²æŸ“æ–¹å¼" id="route-ä¸‰ç§æ¸²æŸ“æ–¹å¼">Route ä¸‰ç§æ¸²æŸ“æ–¹å¼</a></h4>
<p>Route ä¸‰ç§æ¸²æŸ“å†…å®¹çš„æ–¹æ³•, ä¸å¯åŒæ—¶ä½¿ç”¨, å‡ä¼šè®¾ç½® match, location, history åœ¨ props ä¸­</p>
<ul>
<li>
<p><code>&lt;Route component=xxxç±»&gt;</code>ï¼šå½“ location åŒ¹é…åˆ° path æ—¶å€™, ä¼š renderï¼Œroute props ä¹Ÿä¼šéšç€ä¸€èµ·è¢«æ¸²æŸ“ï¼›</p>
<blockquote>
<p>ä¸è¦æä¾› inline function, å› ä¸ºå¦‚æœè¿™æ ·, æ¯æ¬¡ render, éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ component(the router uses React.createElement to create a new React element from the given component. That means if you provide an inline function to the component prop, you would create a new component every render.)</p>
</blockquote>
</li>
<li>
<p><code>&lt;Route render=xxxå‡½æ•°&gt;</code>ï¼šè¿™ç§æ–¹å¼å¯¹äºå†…è”æ¸²æŸ“å’ŒåŒ…è£… Route å´ä¸å¼•èµ·æ„æ–™ä¹‹å¤–çš„é‡æ–°æŒ‚è½½ç‰¹åˆ«æ–¹ä¾¿ï¼›</p>
<blockquote>
<p>Route component çš„ä¼˜å…ˆçº§è¦æ¯” Route render é«˜</p>
</blockquote>
</li>
<li>
<p><code>&lt;Route children=xxxå‡½æ•°&gt;</code>ï¼šä¸ render å±æ€§çš„å·¥ä½œæ–¹å¼åŸºæœ¬ä¸€æ ·ï¼Œé™¤äº† <code>å®ƒæ˜¯ä¸ç®¡åœ°å€åŒ¹é…ä¸å¦éƒ½ä¼šè¢«è°ƒç”¨</code>ï¼›</p>
<p>å½“æ²¡æœ‰åŒ¹é…ä¸Š, match ä¸º null, å¯ä»¥å€ŸåŠ©è¿™ä¸€ç‰¹æ€§, æ›´å…·æ˜¯å¦åŒ¹é…ä¸Šäº†è®¾ç½®åŠ¨æ€çš„æ ·å¼</p>
</li>
</ul>
<h3><a class="header" href="#switch-è§£å†³å¤šåŒ¹é…é—®é¢˜" id="switch-è§£å†³å¤šåŒ¹é…é—®é¢˜">Switch-è§£å†³å¤šåŒ¹é…é—®é¢˜</a></h3>
<p>å†…éƒ¨åŒ…å«çš„ Router/Redirect åŒ¹é…ç¬¬ä¸€ä¸ªå°±ä¸å†ç»§ç»­å¾€ä¸‹åŒ¹é…äº†</p>
<ul>
<li>
<p>location: object å¯ä»¥è®¤ä¸ºçš„æŒ‡å®š location æ¥å†³å®šå“ªä¸ª child è¢« render, ä¸€èˆ¬ä¸æŒ‡å®š, æ ¹æ®æµè§ˆå™¨ location å†³å®šæ˜¯å“ªä¸ª child è¢« render</p>
<blockquote>
<p>è¿™é‡Œçš„ location ä¼šè¦†ç›– Route ä¸­çš„ location</p>
</blockquote>
</li>
</ul>
<h3><a class="header" href="#redirect-é‡å®šå‘å½“å‰é¡µé¢" id="redirect-é‡å®šå‘å½“å‰é¡µé¢">Redirect-é‡å®šå‘å½“å‰é¡µé¢</a></h3>
<p>å…¸å‹åœºæ™¯: ç™»é™†åˆ¤æ–­</p>
<ul>
<li>to é‡å®šå‘è·¯å¾„</li>
</ul>
<h3><a class="header" href="#link-è¶…é“¾æ¥" id="link-è¶…é“¾æ¥">Link-è¶…é“¾æ¥</a></h3>
<p>ä¸ä¼šè§¦æµè§ˆå™¨åˆ·æ–°</p>
<ul>
<li>
<p>toï¼ˆstring/objectï¼‰ï¼šè¦è·³è½¬çš„è·¯å¾„æˆ–åœ°å€ï¼›</p>
</li>
<li>
<p>replaceï¼ˆboolï¼‰ï¼šä¸º true æ—¶ï¼Œç‚¹å‡»é“¾æ¥åå°†ä½¿ç”¨æ–°åœ°å€æ›¿æ¢æ‰è®¿é—®å†å²è®°å½•é‡Œé¢çš„åŸåœ°å€ï¼›ä¸º false(é»˜è®¤) æ—¶ï¼Œç‚¹å‡»é“¾æ¥åå°†åœ¨åŸæœ‰è®¿é—®å†å²è®°å½•çš„åŸºç¡€ä¸Šæ·»åŠ ä¸€ä¸ªæ–°çš„çºªå½•</p>
</li>
</ul>
<h3><a class="header" href="#navlink-å¸¦æ ·å¼çš„-link" id="navlink-å¸¦æ ·å¼çš„-link">NavLink: å¸¦æ ·å¼çš„ Link</a></h3>
<p>ä¼šæ·»åŠ é€‰ä¸­çŠ¶æ€çš„æ ·å¼</p>
<ul>
<li>
<p>activeClassName: string æ¿€æ´»æ—¶å€™çš„ className, é»˜è®¤å€¼ active(å¤–éƒ¨å¼•å…¥ css æ–‡ä»¶çš„æ—¶å€™è²Œä¼¼ä¸å¥½ä½¿, å­˜ç–‘)</p>
</li>
<li>
<p>activeStyle: object é€šè¿‡ inline æ–¹å¼å¼•å…¥æ ·å¼</p>
</li>
<li>
<p>exact: bool ç²¾ç¡®åŒ¹é…æ¨¡å¼, strict: bool url æœ«å°¾éœ€è¦&quot;/&quot;, æ¯”å¦‚ to=&quot;/events/&quot;</p>
</li>
<li>
<p>isActive: func(match, location) è‡ªå®šä¹‰å‡½æ•°åˆ¤æ–­æ˜¯å¦æ¿€æ´»çŠ¶æ€</p>
</li>
<li>
<p>location: object å¯ä»¥è®¾å®šä¸€ä¸ª location å¯¹è±¡</p>
</li>
</ul>
<h3><a class="header" href="#prompt-æç¤º" id="prompt-æç¤º">Prompt-æç¤º</a></h3>
<p>æ»¡è¶³æ¡ä»¶æ—¶ä¼šæç¤ºç”¨æˆ·æ˜¯å¦ç¦»å¼€å½“å‰é¡µé¢</p>
<ul>
<li>when æ¡ä»¶é€»è¾‘</li>
<li>message æç¤ºä¿¡æ¯</li>
</ul>
<h2><a class="header" href="#history" id="history">history</a></h2>
<p>history is mutableï¼Œ å› æ­¤æ¨èè¿™æ ·è·å– location: this.props.location</p>
<pre><code class="language-js">class Comp extends React.Component {
    componentWillReceiveProps(nextProps) {
        // will be true
        const locationChanged = nextProps.location !== this.props.location;

        // INCORRECT, will *always* be false because history is mutable.
        const locationChanged =
            nextProps.history.location !== this.props.history.location;
    }
}
</code></pre>
<h2><a class="header" href="#location" id="location">location</a></h2>
<p>location é•¿è¿™æ ·</p>
<pre><code class="language-js">{
  key: 'ac3df4', // not with HashHistory!
  pathname: '/somewhere'
  search: '?some=search-string',
  hash: '#howdy',
  state: {
    xxx: xxx
  }
}
</code></pre>
<p>router å°†åœ¨è¿™äº›åœ°æ–¹æä¾› location å¯¹è±¡:</p>
<ul>
<li>
<p><code>Route component</code> as <code>this.props.location</code></p>
</li>
<li>
<p><code>Route render</code> as <code>({ location }) =&gt; ()</code></p>
</li>
<li>
<p><code>Route children</code> as <code>({ location }) =&gt; ()</code></p>
</li>
<li>
<p><code>withRouter</code> as <code>this.props.location</code></p>
</li>
</ul>
<p>A location object is never mutated , æ‰€ä»¥å¯ä»¥é€šè¿‡å®ƒåœ¨ lifecycle hooks ä¸­æ¥å†³å®šä½•æ—¶æ€ä¹ˆå¯¼èˆª(è·å–æ•°æ®å’ŒåŠ¨ç”»è¿‡æ¸¡ç‰¹åˆ«æœ‰ç”¨)</p>
<pre><code class="language-js">componentWillReceiveProps(nextProps) {
  if (nextProps.location !== this.props.location) {
    // navigated!
  }
}
</code></pre>
<p>è¿™äº›åœ°æ–¹å¯ä»¥è®¾ç½® location å¯¹è±¡æ¥ä»£æ›¿ string å½¢å¼çš„ url patern:</p>
<ul>
<li>Web <code>Link to</code></li>
<li>Native Link to</li>
<li><code>Redirect to</code></li>
<li>history.push</li>
<li>history.replace</li>
</ul>
<pre><code class="language-js">const location = {
    pathname: &quot;/somewhere&quot;,
    state: { fromDashboard: true }
};
</code></pre>
<h2><a class="header" href="#match" id="match">match</a></h2>
<h1><a class="header" href="#è°ƒè¯•å’Œæµ‹è¯•" id="è°ƒè¯•å’Œæµ‹è¯•">è°ƒè¯•å’Œæµ‹è¯•</a></h1>
<p>chrome è°ƒè¯•æ’ä»¶: React DevTool, Redux DevTool</p>
<p>æ ¼å¼åŒ–: Prettier (å¯ä»¥è‡ªåŠ¨ä¿®æ­£)</p>
<p>ä»£ç é£æ ¼çº¦æŸ: ESLint</p>
<p>æµ‹è¯•: Jest, Enzyme</p>
<p>mock å‡æ•°æ®, æ¨¡æ‹Ÿå‡çš„ api: json-serveré…åˆfaker.js</p>
<h1><a class="header" href="#graphql-å’Œ-relay" id="graphql-å’Œ-relay">GraphQL å’Œ Relay</a></h1>
<p>GraphQL æ˜¯ä¸€ç§æ•°æ®æŸ¥è¯¢è¯­è¨€ï¼ˆData Query Languageï¼‰, ä¸»è¦æ˜¯æƒ³è§£å†³ä¼ ç»Ÿ RESTful API æ‰€é‡åˆ°çš„ä¸€äº›é—®é¢˜</p>
<p>Relay æ˜¯æ­é… GraphQL ç”¨äº React çš„ä¸€ä¸ªå®£å‘Šå¼æ•°æ®æ¡†æ¶ï¼Œå¯ä»¥é™ä½ Ajax çš„è¯·æ±‚æ•°é‡</p>
<h1><a class="header" href="#css-module-æ¨¡å—åŒ–" id="css-module-æ¨¡å—åŒ–">CSS-Module æ¨¡å—åŒ–</a></h1>
<p>è§£å†³äº† css ç±»åçš„å†²çªé—®é¢˜, https://zhuanlan.zhihu.com/p/20495964</p>
<p>ä¸šç•Œå¦ä¸€ç§æ–¹æ¡ˆæ˜¯ BEM ç±»å‘½åæ–¹æ³• (<a href="https://www.ibm.com/developerworks/cn/web/1512_chengfu_bem/index.html">bem å‘½å</a>)</p>
<p>å¦‚æœä½¿ç”¨ webpack, css-loader éœ€è¦å¦‚æ­¤é…ç½®: <code>'css-loader?modules&amp;localIdentName=[name]__[local]-[hash:base64:5]'</code></p>
<p>å¯ä»¥å’Œ <code>react-css-modules</code> é…åˆä½¿ç”¨ (<a href="https://segmentfault.com/a/1190000004530909">ref</a>)</p>
<p>https://github.com/camsong/blog/issues/5</p>
<p>http://www.alloyteam.com/2017/03/getting-started-with-css-modules-and-react-in-practice/</p>
<p>css æ¨¡å—åŒ–è¿›åŒ–ï¼šã€æœç´¢ â€œcss modules styled-components åŒºåˆ«â€ã€‘ <a href="https://www.zcfy.cc/article/css-evolution-from-css-sass-bem-css-modules-to-styled-components">1</a>ï¼Œ<a href="http://hkongm.github.io/2018/07/25/ReactStyleTypes/">2</a>ï¼Œ<a href="http://www.alloyteam.com/2017/05/guide-styled-components/">3</a></p>
<p>åœ¨ create-react-app ä¸­å¦‚ä½•ä½¿ç”¨? -- css æ–‡ä»¶å‘½åä¸º <code>&lt;componentName&gt;.module.css</code> å³å¯ä½¿ç”¨ css modules ç‰¹æ€§</p>
<h1><a class="header" href="#css-in-js" id="css-in-js">css-in-js</a></h1>
<p><a href="https://zhuanlan.zhihu.com/p/91498498">emotion å’Œ styled-components ä¸¤ç§è§£å†³æ–¹æ¡ˆ</a></p>
<p>å¥½å¤„æ˜¯èƒ½é€šè¿‡ js åŠ¨æ€ç”Ÿæˆ css</p>
<p>æ¨è emotion, emotion åŒæ—¶æ”¯æŒ css props å†™æ³•å’Œ styled å†™æ³•, styled-components åªæœ‰ styled å†™æ³•</p>
<p>æ€»ä½“ä¸å¦‚ css-module, å› ä¸º css å’Œ js è€¦åˆ, å°†æ¥å¦‚æœè¿ç§», ä¸æ–¹ä¾¿</p>
<p>å¦ä¸€ç§ css è§£å†³æ–¹æ¡ˆ: https://tailwindcss.com/</p>
<p><a href="https://codedaily.io/tutorials/62/Create-a-Hoverable-Display-Card-with-React-and-Emotion">react + emotion çš„ styled å†™æ³•</a></p>
<h1><a class="header" href="#æœ€ä½³å®è·µ-best-practice" id="æœ€ä½³å®è·µ-best-practice">æœ€ä½³å®è·µ best practice</a></h1>
<p>https://github.com/camsong/blog
https://github.com/camsong/blog/issues/6</p>
<p>æŠ€æœ¯ç¯å¢ƒï¼š</p>
<p>æ‰“åŒ… es6 + Webpack + less
ä½¿ç”¨äº† HapiJs ä½œä¸ºæ¨¡æ‹Ÿ serverï¼Œå‰ç«¯å¼€å‘å’Œåç«¯å½»åº•åˆ†ç¦»ï¼ŒåæœŸé›†æˆæ—¶ï¼Œä½¿ç”¨è‡ªå·±å¼€å‘çš„ä»£ç†æœåŠ¡å™¨è°ƒç”¨çœŸæ­£çš„ API
è¿è¡Œåº“ React + Flux + React-router+ material-ui + ImmutableJS + è‡ªå·±ç ”å‘çš„æ§ä»¶
å•æµ‹ç¯å¢ƒ Karma+mocha+chai+Istanbul
å¸ƒå±€å®Œå…¨ç”¨ flex</p>
<p>ä½¿ç”¨ Flex å¸ƒå±€ä¼šå¤§å¤§é™ä½ CSS çš„éš¾åº¦
ä½¿ç”¨ Flux å¯ä»¥å¾ˆå¥½çš„éš”ç¦»ä¸šåŠ¡ï¼ˆæˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘éƒ½åœ¨ Store é‡Œï¼‰,å¤§å¤§é™ä½äº†å•å…ƒæµ‹è¯•çš„éš¾åº¦
åŸºäº React çš„æ§ä»¶ï¼ˆè¿™é‡Œè¯´çš„æ˜¯åŸºæœ¬æ§ä»¶ï¼‰æ˜¯å¯¹ React ç†è§£çš„ä¸€ä¸ªä½“ç°
å°½é‡æŠŠ React ç»„ä»¶ï¼ˆComponentï¼‰åšåˆ°å°ï¼Œåšåˆ°ç»†ï¼Œä¹Ÿå°±æ˜¯å°½é‡æ‹†åˆ† React ç»„ä»¶
åŸºäºæ•°æ®é©±åŠ¨çš„æ–¹å¼ï¼ˆData-Drivenï¼‰å¼€å‘ï¼Œç†è§£åˆ°è¿™ä¸€ç‚¹å°±ä¼šå‘ç° React å¾ˆç¥å¥‡ï¼Œå¯èƒ½è¿™ä¹Ÿæ˜¯æœ€ä¸å¥½ç†è§£çš„åœ°æ–¹
ImmutableJS å¸¦æ¥äº†å¤§é‡çš„å¥½å¤„ï¼Œæ‰€æœ‰ç»„ä»¶éƒ½ä½¿ç”¨äº† ShouldComponentUpdate æ¥ä¼˜åŒ–
å®ç°äº† I18N çš„åŠ¨æ€åŠ è½½
ä½¿ç”¨äº† Url æ¥ä¿å­˜ Router ä¿¡æ¯ï¼Œæ²¡æœ‰ä½¿ç”¨ Hashï¼Œæ„Ÿè§‰å¾ˆç®€æ´</p>
<h1><a class="header" href="#æœåŠ¡ç«¯æ¸²æŸ“" id="æœåŠ¡ç«¯æ¸²æŸ“">æœåŠ¡ç«¯æ¸²æŸ“</a></h1>
<p>æœ€æ–°çš„æ–¹æ¡ˆ: https://github.com/rendora/rendora    (https://segmentfault.com/a/1190000017361781?utm_source=tag-newest)</p>
<h2><a class="header" href="#ä»€ä¹ˆæ˜¯-ssr" id="ä»€ä¹ˆæ˜¯-ssr">ä»€ä¹ˆæ˜¯ ssr</a></h2>
<p>ä»¥å‰çš„å¤šé¡µé¢ç«™ç‚¹æ˜¯åœ¨æœåŠ¡ç«¯æ¸²æŸ“çš„ï¼Œè¾“å‡ºåˆ°æµè§ˆå™¨æ—¶å·²ç»æœ‰äº†å®Œæ•´çš„éª¨æ¶ï¼ˆ html ï¼‰ï¼Œè¿™æ ·çˆ¬è™«æŠ“åˆ°æ—¶å¯ä»¥åˆ†æé¡µé¢æ ‡é¢˜ï¼Œå†…å®¹ç­‰ç­‰ï¼Œåš seo å®¹æ˜“ï¼Œé‚£æ—¶çš„æŠ€æœ¯æ ˆæ˜¯ jspï¼Œphp ç­‰ç­‰ã€‚</p>
<p>ç°åœ¨æµè¡Œçš„å‰ç«¯æ¡†æ¶åœ¨è¿™æ–¹é¢æ˜¯å¼€äº†å€’è½¦ï¼Œä¸€ä¸ªç©ºçš„éª¨æ¶ï¼Œä¸€ä¸ªå¾ˆå¤§çš„ jsï¼ŒæŠ“åˆ°æµè§ˆå™¨ä»¥åæ‰å¼€å§‹æ¸²æŸ“å®Œæ•´çš„é¡µé¢ï¼Œçˆ¬è™«å°±å¾ˆä¸ºéš¾äº†ï¼Œå› ä¸ºå®ƒæ²¡æ³•æ‰§è¡Œ js å•Šï¼Œæ­¤å¤–ï¼Œç™½å±æ—¶é—´ä¹Ÿæ˜¯ç”±äºå‰ç«¯æ¸²æŸ“å¸¦æ¥çš„é—®é¢˜ã€‚äºæ˜¯åˆæœ‰äº†æœåŠ¡ç«¯æ¸²æŸ“ï¼Œè®©æ¸²æŸ“è¿™ä¸€æ­¥å†å›åˆ°æœåŠ¡ç«¯ï¼Œåœ¨æœåŠ¡ç«¯æ¨¡æ‹Ÿæµè§ˆå™¨ç¯å¢ƒï¼Œç»™ react å’Œ vue ç­‰æ¡†æ¶ä¸€ä¸ªå¯æ‰§è¡Œçš„ä¸Šä¸‹æ–‡ï¼Œå°±æ˜¯ä¸ºäº†æå‰å¾—åˆ°å®Œæ•´çš„ html, è¿™å°±æ˜¯ server side  render</p>
<p>Isomorphic JavaScript : æŒ‡å‰åç«¯ï¼ˆClient/Serverï¼‰å…±ç”¨ç›¸åŒéƒ¨åˆ†çš„ js ä»£ç , è®© JavaScript åº”ç”¨å¯ä»¥åŒæ—¶æ‰§è¡Œåœ¨æµè§ˆå™¨ç«¯å’Œ server ç«¯ï¼Œåœ¨ React ä¸­å¯ä»¥ä½¿ç”¨ server ç«¯æ¸²æŸ“ï¼ˆserver side renderingï¼‰é™æ€ HTML çš„æ–¹å¼è¾¾åˆ° Isomorphic JavaScript æ•ˆæœï¼Œè®© SEO å’Œæ‰§è¡Œæ•ˆç‡æ›´åŠ æå‡å¹¶è®©å‰åç«¯å…±ç”¨ä»£ç </p>
<h2><a class="header" href="#ssr-çš„å¥½å¤„" id="ssr-çš„å¥½å¤„">ssr çš„å¥½å¤„</a></h2>
<ul>
<li>seo å‹å¥½</li>
<li>åŒæ—¶æœ‰åŠ©äºæ”¹å–„é¦–å±åŠ è½½ä½“éªŒ</li>
</ul>
<h2><a class="header" href="#è§£å†³æ–¹æ¡ˆ" id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</a></h2>
<p>https://www.zhihu.com/question/51949678 æƒ³è¦ seo çš„é¡µé¢è¦é™æ€åˆ†å¼€éƒ¨ç½², ä¸è¦ä½¿ç”¨ react
https://blog.coding.net/blog/React-Server-Side-Rendering-for-SPA-SEO,
https://blog.bluedgeusa.com/how-to-build-an-seo-friendly-website-with-react-ef42bb52c563#.ge090p9pu //todo ,
https://github.com/carlleton/reactjs101/blob/zh-CN/Ch10/react-redux-server-rendering-isomorphic-javascript.md
https://www.jianshu.com/p/56ca46c90ee2 ä½¿ç”¨ç±»åº“</p>
<p>å…¶å®, å¯¹äºçœŸæ­£é€‚åˆåšæˆ SPA çš„åº”ç”¨ï¼ŒSEO åè€Œé€šå¸¸ä¸æ˜¯é—®é¢˜ã€‚é’ˆå¯¹ marketing çš„é¡µé¢åº”è¯¥æ˜¯é™æ€åˆ†å¼€éƒ¨ç½²çš„ï¼Œapp æœ¬èº«åˆ™è¦ç™»é™†æ‰èƒ½ç”¨ï¼ŒSEO æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ã€‚å¯¹äºå°‘æ•°åŒæ—¶éœ€è¦ seo, è€Œä¸”åŒæ—¶éœ€è¦å¼ºäº¤äº’æ€§ spa çš„åœºæ™¯, æœ‰å¦‚ä¸‹å‡ ç§è§£å†³æ–¹æ¡ˆ:</p>
<ul>
<li>
<p>React ä½¿ç”¨ Next.js ä½œæœåŠ¡å™¨ç«¯æ¸²æŸ“ https://nextjs.org/</p>
</li>
<li>
<p>ä½¿ç”¨ Node.js ä½œä¸ºå‰åç«¯çš„ä¸­é—´å±‚è¿›è¡Œä¸­é—´å±‚æ¸²æŸ“ ï¼Œä½†å¯èƒ½å¯¹é¡¹ç›®æ”¹åŠ¨æœ‰ç‚¹å¤§ (http://www.alloyteam.com/2015/10/8783/), å‚è€ƒ https://juejin.im/post/6844903693033144333</p>
<p>React æä¾›äº†ä¿©ä¸ªç¥å¥‡çš„æ–¹æ³•ï¼ŒrenderToString å’Œ renderToStaticMarkup:</p>
<p>renderToString æ–¹æ³•ï¼Œåªåº”ç”¨åœ¨æœåŠ¡å™¨ç«¯ï¼ŒæŠŠä¸€ä¸ª React Component æ¸²æŸ“æˆ HTMl ,å¯ä»¥å°†å®ƒé€šè¿‡ response å‘é€åˆ°æµè§ˆå™¨ç«¯ï¼Œè¾¾åˆ° SEO çš„ç›®çš„ã€‚</p>
<p>renderToStaticMarkup æ–¹æ³•ï¼Œå’Œ renderToString ç±»ä¼¼ï¼Œä½†æ˜¯å®ƒç”Ÿæˆçš„ HTML Dom ä¸åŒ…å«ç±»ä¼¼ data-react-id è¿™æ ·çš„é¢å¤–å±æ€§ï¼Œå¯ä»¥ç”¨äºç”Ÿæˆç®€å•çš„é™æ€é¡µé¢ï¼ŒèŠ‚çœå¤§é‡å­—ç¬¦ä¸²ã€‚</p>
</li>
<li>
<p>https://github.com/rendora/rendora ä½¿ç”¨ headless Chrome</p>
</li>
<li>
<p>https://github.com/jaredpalmer/razzle</p>
</li>
</ul>
<h3><a class="header" href="#é…åˆ-koa2-å®ç°-ssr" id="é…åˆ-koa2-å®ç°-ssr">é…åˆ koa2 å®ç° ssr</a></h3>
<p>https://github.com/yangfan0095/react-koa2-ssr</p>
<h3><a class="header" href="#egg-å®ç°-ssr" id="egg-å®ç°-ssr">egg å®ç° ssr</a></h3>
<p>https://github.com/ykfe/egg-react-ssr çƒ­åº¦æ›´é«˜</p>
<h1><a class="header" href="#æ€§èƒ½ä¼˜åŒ–" id="æ€§èƒ½ä¼˜åŒ–">æ€§èƒ½ä¼˜åŒ–</a></h1>
<p>https://zhuanlan.zhihu.com/p/37148975</p>
<h2><a class="header" href="#å¸¸è§çš„æ€§èƒ½é—®é¢˜åœºæ™¯" id="å¸¸è§çš„æ€§èƒ½é—®é¢˜åœºæ™¯">å¸¸è§çš„æ€§èƒ½é—®é¢˜åœºæ™¯</a></h2>
<p>é”®ç›˜è¾“å…¥å¡é¡¿</p>
<p>é¼ æ ‡ç§»åŠ¨/æ»šåŠ¨å¡é¡¿ (è°ƒæ•´å°ºå¯¸ resize)</p>
<p>ç»„ä»¶æ‹†åˆ†çš„è¦è¶³å¤Ÿå°, å‡å°‘ virtual dom çš„ diff æ“ä½œè´Ÿæ‹…</p>
<h2><a class="header" href="#ä½¿ç”¨å·¥å…·å®šä½æ€§èƒ½é—®é¢˜" id="ä½¿ç”¨å·¥å…·å®šä½æ€§èƒ½é—®é¢˜">ä½¿ç”¨å·¥å…·å®šä½æ€§èƒ½é—®é¢˜</a></h2>
<p>react devtools (highlight update åŠŸèƒ½)
chrome devtools</p>
<h2><a class="header" href="#ç½‘ç»œæ€§èƒ½ä¼˜åŒ–-è‡ªåŠ¨æŒ‰éœ€åŠ è½½" id="ç½‘ç»œæ€§èƒ½ä¼˜åŒ–-è‡ªåŠ¨æŒ‰éœ€åŠ è½½">ç½‘ç»œæ€§èƒ½ä¼˜åŒ–-è‡ªåŠ¨æŒ‰éœ€åŠ è½½</a></h2>
<p>å¯ä»¥é€šè¿‡ react-loadable ç»„ä»¶ + webpack import api æ¥å®ç° react å¼‚æ­¥åŠ è½½</p>
<pre><code class="language-js">import loadable from &quot;react-loadable&quot;;

const TargetComponent = loadable({
    loader: () =&gt; import(&quot;./TargetComponent&quot;),
    // ç­‰å¾…é¡µé¢
    loading: () =&gt; &lt;div&gt;Loading....&lt;/div&gt;
});
</code></pre>
<h2><a class="header" href="#ä½¿ç”¨-reselect-é¿å…é‡å¤è®¡ç®—" id="ä½¿ç”¨-reselect-é¿å…é‡å¤è®¡ç®—">ä½¿ç”¨ Reselect é¿å…é‡å¤è®¡ç®—</a></h2>
<p>reselect åº“ç”¨æ¥åˆ›å»ºè‡ªåŠ¨ç¼“å­˜çš„æ•°æ®çš„å¤„ç†å‡½æ•°</p>
<h1><a class="header" href="#react-åŠ¨ç”»" id="react-åŠ¨ç”»">react åŠ¨ç”»</a></h1>
<p>https://mp.weixin.qq.com/s/Ey24FrWN2SiLK2LAmPv7hA</p>
<p>https://github.com/pmndrs/react-spring
https://github.com/chenglou/react-motion</p>
<p>TODO</p>
<h1><a class="header" href="#react-native" id="react-native">react native</a></h1>
<p>https://reactnative.dev/docs/getting-started å®˜ç½‘
https://github.com/reactnativecn/react-native-guide ä¸­æ–‡èµ„æº</p>
<p>ç¾å›¢å¤–å–çš„å®è·µ: https://tech.meituan.com/2019/12/19/meituan-mrn-practice.html</p>
<p>æ›´æ¨è flutter</p>
<p>https://guoshuyu.cn/home/wx/
http://laomengit.com/guide/introduction/cross-platform.html</p>
<p>https://xiaozhuanlan.com/topic/8924513706 è·¨å¹³å°å¼€å‘åŸç†
https://exp.newsmth.net/topic/article/51b2b5d2371fc166e46ef0ff881b8506 flutter å¯¹æ¯”
https://zhuanlan.zhihu.com/p/43957699</p>
<h1><a class="header" href="#å¼€å‘å°ç¨‹åº" id="å¼€å‘å°ç¨‹åº">å¼€å‘å°ç¨‹åº</a></h1>
<p>remax, taro, anujs, æ¨è Taro + typescript</p>
<p>https://zhuanlan.zhihu.com/p/24946190 ç”³è¯·æ­¥éª¤</p>
<p>https://github.com/didi/chameleon</p>
<h1><a class="header" href="#å°é¡¹ç›®" id="å°é¡¹ç›®">å°é¡¹ç›®</a></h1>
<h2><a class="header" href="#å®ç°-route" id="å®ç°-route">å®ç° route</a></h2>
<p>https://www.cnblogs.com/huyue/p/9463328.html
https://www.jianshu.com/p/014fd226352b</p>
<h2><a class="header" href="#è¡¨å•è®¾è®¡å™¨" id="è¡¨å•è®¾è®¡å™¨">è¡¨å•è®¾è®¡å™¨</a></h2>
<p>https://github.com/alibaba/form-render
https://github.com/rjsf-team/react-jsonschema-form json æ¸²æŸ“è¡¨å•</p>
<h2><a class="header" href="#cms-ç³»ç»Ÿ" id="cms-ç³»ç»Ÿ">cms ç³»ç»Ÿ</a></h2>
<p>(é…åˆ antd)</p>
<pre><code class="language-sh">npx create-react-app cms-article

# æ ·å¼ ä¸»é¢˜ æ”¯æŒ less 
# è‡ªå®šä¹‰é…ç½®
npm i -S antd craco-less @craco/craco

# è·¯ç”±
npm i -S react-router-dom

# ajax
npm i -S axios

# redux
npm i -S redux react-redux
</code></pre>
<h1><a class="header" href="#éƒ¨ç½²åˆ°-github-ä¸Š" id="éƒ¨ç½²åˆ°-github-ä¸Š">éƒ¨ç½²åˆ° github ä¸Š</a></h1>
<pre><code class="language-sh"># åœ¨package.jsoné…ç½®æ–‡ä»¶ä¸­åŠ ä¸€å¥, å¤„ç†è·¨åŸŸé—®é¢˜
#â€œhomepageâ€: â€œhttps://fyxwanan.github.io/testâ€ 

# or

# &quot;proxy&quot;: {
#     &quot;/api&quot;: {
#       &quot;target&quot;: &quot;http://localhost:8080&quot;,
#       &quot;ws&quot;: true
#     }
#   }

# ç”Ÿæˆä¸€ä¸ªbuildæ–‡ä»¶å¤¹
npm run build

# æäº¤ master ä»£ç 
git push origin master

# buildæ–‡ä»¶å¤¹ä¸Šä¼ åˆ°å¦ä¸€ä¸ªåˆ†æ”¯
git subtree push --prefix=build origin gh-pages

# æœ€ååˆ° github é…ç½® github pages

</code></pre>
<h1><a class="header" href="#å’Œ-springboot-æ‰“åŒ…å•ä½“åº”ç”¨" id="å’Œ-springboot-æ‰“åŒ…å•ä½“åº”ç”¨">å’Œ springboot æ‰“åŒ…å•ä½“åº”ç”¨</a></h1>
<p>https://cloud.tencent.com/developer/news/603125</p>
<p>https://medium.com/@itzgeoff/including-react-in-your-spring-boot-maven-build-ae3b8f8826e
frontend-maven-plugin</p>
<p>https://blog.csdn.net/andy_zhang2007/article/details/89393005 å’Œ webjars</p>
<h1><a class="header" href="#å’Œ-typescript-ä¸€èµ·ä½¿ç”¨" id="å’Œ-typescript-ä¸€èµ·ä½¿ç”¨">å’Œ typescript ä¸€èµ·ä½¿ç”¨</a></h1>
<h2><a class="header" href="#é›†æˆ-ts-ç¯å¢ƒ" id="é›†æˆ-ts-ç¯å¢ƒ">é›†æˆ ts ç¯å¢ƒ</a></h2>
<p>https://create-react-app.dev/docs/adding-typescript/</p>
<pre><code class="language-sh">npx create-react-app my-app --template typescript

# default use yarn to manage package, specify use npm
npx create-react-app my-app --use-npm


</code></pre>
<p>å…¨å±€å£°æ˜æ–‡ä»¶  <code>react-app-env.d.ts</code>, ts é…ç½® <code>tsconfig.js</code> è§ https://blog.csdn.net/qq_41831345/article/details/106843875</p>
<h2><a class="header" href="#ts-åŸºæœ¬ä½¿ç”¨" id="ts-åŸºæœ¬ä½¿ç”¨">ts åŸºæœ¬ä½¿ç”¨</a></h2>
<p>https://github.com/xcatliu/typescript-tutorial
https://rmolinamir.github.io/typescript-cheatsheet/
https://typescript.bootcss.com/</p>
<p><code>npm install -g typescript</code> , https://www.typescriptlang.org/play/</p>
<h3><a class="header" href="#åŸºæœ¬æ•°æ®ç±»å‹" id="åŸºæœ¬æ•°æ®ç±»å‹">åŸºæœ¬æ•°æ®ç±»å‹</a></h3>
<pre><code class="language-ts">// any &amp; unknown
// unknown æ˜¯ä¸¥æ ¼ç‰ˆçš„ any, å°½é‡ç”¨ å‰è€…ä»£æ›¿åè€…
// unknown ç±»å‹å€¼æ— æ³•èµ‹å€¼ç»™ä»»ä½•å…¶ä»–å˜é‡
// unknown ç±»å‹å€¼æ— æ³•è¯»å–ä»»ä½•æ–¹æ³•

// æšä¸¾
const enum Color {Red = 1, Green, Blue}
let colorName: string = Color[2];
console.log(colorName);  // æ˜¾ç¤º'Green'å› ä¸ºä¸Šé¢ä»£ç é‡Œå®ƒçš„å€¼æ˜¯2

// æšä¸¾ç›¸å½“äºä¸€ä¸ªå¯¹è±¡
// obj: { X: number }

// æšä¸¾ä½œä¸ºç±»å‹:
enum ShapeKind {
    Circle,
    Square,
}
interface Circle {
    kind: ShapeKind.Circle;
    radius: number;
}
interface Square {
    kind: ShapeKind.Square;
    sideLength: number;
}
let c: Circle = {
    kind: ShapeKind.Square,
    //    ~~~~~~~~~~~~~~~~ Error!
    radius: 100,
}

</code></pre>
<h3><a class="header" href="#interface" id="interface">interface</a></h3>
<h4><a class="header" href="#ä½¿ç”¨-interface-å®šä¹‰å¯¹è±¡ç±»å‹" id="ä½¿ç”¨-interface-å®šä¹‰å¯¹è±¡ç±»å‹">ä½¿ç”¨ interface å®šä¹‰å¯¹è±¡ç±»å‹</a></h4>
<pre><code class="language-js">
// similar to bean in java
interface SquareConfig {
  // optional properties, 
  color?: string;
  width?: number;
  readonly xxx: number;// readonly property, 
  //æœ€ç®€å•åˆ¤æ–­è¯¥ç”¨readonlyè¿˜æ˜¯constçš„æ–¹æ³•æ˜¯çœ‹è¦æŠŠå®ƒåšä¸ºå˜é‡ä½¿ç”¨è¿˜æ˜¯åšä¸ºä¸€ä¸ªå±æ€§ã€‚ åšä¸ºå˜é‡ä½¿ç”¨çš„è¯ç”¨ constï¼Œè‹¥åšä¸ºå±æ€§åˆ™ä½¿ç”¨readonly
}

//ReadonlyArray&lt;T&gt;ç±»å‹ï¼Œå®ƒä¸Array&lt;T&gt;ç›¸ä¼¼ï¼Œåªæ˜¯æŠŠæ‰€æœ‰å¯å˜æ–¹æ³•å»æ‰äº†ï¼Œå› æ­¤å¯ä»¥ç¡®ä¿æ•°ç»„åˆ›å»ºåå†ä¹Ÿä¸èƒ½è¢«ä¿®æ”¹ï¼š
let ro: ReadonlyArray&lt;number&gt; = a;
const a = [];
a = ro; // error!
a = ro as number[];//ok



// é¢å¤–çš„å±æ€§æ£€æŸ¥
interface SquareConfig {
    color?: string;
    width?: number;
}
function createSquare(config: SquareConfig) {
}
let mySquare = createSquare({ colour: &quot;red&quot;, width: 100 });//error, å‚æ•° interface ä¸­æ²¡æœ‰ colour, å³ä½¿ color æ˜¯ å¯é€‰å‚æ•°ä¹Ÿä¸è¡Œ
let mySquare = createSquare({  width: 100 });// ok
let mySquare1 = createSquare({ width: 100, opacity: 0.5 } );//error
let mySquare = createSquare({ width: 100, opacity: 0.5 } as SquareConfig);//ok 
// è‹¥å¸Œæœ›å‚æ•°ä¸­å¸¦æœ‰å…¶ä»–å±æ€§, æœ€å¥½çš„è§£å†³æ–¹å¼:
interface SquareConfig {
    color?: string;
    width?: number;
    [propName: string]: any;//å¯ä»¥æœ‰ä»»æ„æ•°é‡çš„å±æ€§ï¼Œå¹¶ä¸”åªè¦å®ƒä»¬ä¸æ˜¯colorå’Œwidthï¼Œé‚£ä¹ˆå°±æ— æ‰€è°“å®ƒä»¬çš„ç±»å‹æ˜¯ä»€ä¹ˆ
}

//è¿˜æœ‰ä¸€ç§æ–¹æ³•: å°†å¯èƒ½æœ‰é”™çš„å‚æ•°å¯¹è±¡èµ‹å€¼ç»™ä¸€ä¸ªå¦ä¸€ä¸ªå˜é‡, ç„¶åä¼ å…¥æ–¹æ³•ä¸­
let squareOptions = { colour: &quot;red&quot;, width: 100 };
let mySquare = createSquare(squareOptions);

</code></pre>
<h4><a class="header" href="#interface-å®šä¹‰å‡½æ•°ç±»å‹" id="interface-å®šä¹‰å‡½æ•°ç±»å‹">interface å®šä¹‰å‡½æ•°ç±»å‹</a></h4>
<pre><code class="language-js">interface SearchFunc {
  (source: string, subString?: string): boolean;// å¯é€‰å‚æ•°å¿…é¡»åœ¨æœ€å
  // å¯ä»¥ä¸æ­¢æœ‰ä¸€ä¸ªå‡½æ•°ç­¾å
  
}
let mySearch: SearchFunc;
mySearch = function(src, sub) {// è¿”å›å€¼ç±»å‹, å‚æ•°ç±»å‹å¯çœç•¥
    let result = src.search(sub);
    return result &gt; -1;
}


// æ··åˆç±»å‹
//ä¸€ä¸ªå¯¹è±¡å¯ä»¥åŒæ—¶åšä¸ºå‡½æ•°å’Œå¯¹è±¡ä½¿ç”¨ï¼Œå¹¶å¸¦æœ‰é¢å¤–çš„å±æ€§
interface Counter {
    (start: number): string;
    interval: number;
    reset(): void;
}
function getCounter(): Counter {
    let counter = &lt;Counter&gt;function (start: number) { };
    counter.interval = 123;
    counter.reset = function () { };
    return counter;
}
let c = getCounter();
c(10);
c.reset();
c.interval = 5.0;
</code></pre>
<h4><a class="header" href="#interface-å®šä¹‰å¯ç´¢å¼•ç±»å‹" id="interface-å®šä¹‰å¯ç´¢å¼•ç±»å‹">interface å®šä¹‰å¯ç´¢å¼•ç±»å‹</a></h4>
<p>ç±»ä¼¼æ•°ç»„, map...</p>
<pre><code class="language-js">interface StringArray {
  [index: number]: string;// ç´¢å¼•æ”¯æŒå­—ç¬¦ä¸²å’Œæ•°å­—ã€‚å¯ä»¥åŒæ—¶ä½¿ç”¨, ä½†æ˜¯æ•°å­—ç´¢å¼•çš„è¿”å›å¿…é¡»æ˜¯å­—ç¬¦ä¸²ç´¢å¼•çš„è¿”å›å€¼çš„å­ç±»å‹
}


  // åº•å±‚å®é™…åªæ”¯æŒ å­—ç¬¦ä¸²ä½œä¸ºç´¢å¼•, è‹¥æ˜¯æ•°å­—ä½œä¸ºç´¢å¼•, å®é™…è¿˜æ˜¯å…ˆè½¬ä¸ºå­—ç¬¦ä¸², ç„¶åå»æŸ¥æ‰¾, æ‰€ä»¥ä¸ºäº†èƒ½å¤ŸæŸ¥åˆ°, number å¯¹åº”çš„è¿”å›ç±»å‹å¿…é¡»å’Œ string å¯¹åº”çš„è¿”å›å€¼ç±»å‹ç›¸åŒ or ä¸ºå­ç±»å‹
//
class Animal {
    name: string;
}
class Dog extends Animal {
    breed: string;
}
// é”™è¯¯ï¼šä½¿ç”¨æ•°å€¼å‹çš„å­—ç¬¦ä¸²ç´¢å¼•ï¼Œæœ‰æ—¶ä¼šå¾—åˆ°å®Œå…¨ä¸åŒçš„Animal!
interface NotOkay {
    [x: number]: Animal;
    [x: string]: Dog;
}


// ä¸€æ—¦æŒ‡å®šäº†ç´¢å¼•ç±»å‹, å½“å‰å¯¹è±¡çš„å…¶ä»–ç´¢æ€§è¿”å›ç±»å‹å¿…é¡»ç¬¦åˆè¿™ä¸ªç´¢å¼•ç±»å‹
interface NumberDictionary {
  [index: string]: number;
  length: number;    // å¯ä»¥ï¼Œlengthæ˜¯numberç±»å‹
  name: string       // é”™è¯¯ï¼Œ`name`çš„ç±»å‹ä¸ç´¢å¼•ç±»å‹è¿”å›å€¼çš„ç±»å‹ä¸åŒ¹é…
}

//å¯ä»¥å°†ç´¢å¼•ç­¾åè®¾ç½®ä¸ºåªè¯»ï¼Œè¿™æ ·å°±é˜²æ­¢äº†ç»™ç´¢å¼•èµ‹å€¼, ä¹Ÿå°±é˜»æ­¢äº†æ•°ç»„æ‰©å±•
interface ReadonlyStringArray {
    readonly [index: number]: string;
}
let myArray: ReadonlyStringArray = [&quot;Alice&quot;, &quot;Bob&quot;];
myArray[2] = &quot;Mallory&quot;; // error! ä¸èƒ½è®¾ç½®myArray[2]ï¼Œå› ä¸ºç´¢å¼•ç­¾åæ˜¯åªè¯»çš„
</code></pre>
<h4><a class="header" href="#interface-å®šä¹‰-class-ç±»" id="interface-å®šä¹‰-class-ç±»">interface å®šä¹‰ class ç±»</a></h4>
<pre><code class="language-js">interface ClockInterface {
    currentTime: Date;// å°†ä½œä¸ºå­ç±»æˆå‘˜å˜é‡, å­ç±»å¿…é¡»æœ‰
    setTime(d: Date);
}

class Clock implements ClockInterface {
    currentTime: Date;
    setTime(d: Date) {
        this.currentTime = d;
    }
    constructor(h: number, m: number) { }
}
</code></pre>
<h4><a class="header" href="#interface-ç»§æ‰¿" id="interface-ç»§æ‰¿">interface ç»§æ‰¿</a></h4>
<p>interface å¯ä»¥ç»§æ‰¿ å¤šä¸ªå…¶ä»– interface, é€—å·åˆ†ç¦»</p>
<p>äº¦å¯ç»§æ‰¿å…¶ä»– class: (interface è‡ªåŠ¨æ‹¥æœ‰ class çš„å±æ€§, å³ä½¿æ˜¯ private)</p>
<pre><code class="language-js">class Control {
    private state: any;
}

interface SelectableControl extends Control {// æ‹¥æœ‰äº† state 
    select(): void;
}

// å¯ä»¥å®ç° interface, å› ä¸º button æ‹¥æœ‰ state 
class Button extends Control implements SelectableControl {
    select() { }
}
// ok
class TextBox extends Control {
    select() { }
}

// é”™è¯¯ï¼šâ€œImageâ€ç±»å‹ç¼ºå°‘â€œstateâ€å±æ€§ã€‚
class Image implements SelectableControl {
    select() { }
}


</code></pre>
<h3><a class="header" href="#interface-å’Œ-type-åŒºåˆ«" id="interface-å’Œ-type-åŒºåˆ«">interface å’Œ type åŒºåˆ«</a></h3>
<p>https://www.jb51.net/article/163299.htm</p>
<h3><a class="header" href="#class-ä½¿ç”¨" id="class-ä½¿ç”¨">class ä½¿ç”¨</a></h3>
<pre><code class="language-js">class Greeter {
  // æ¯”è¾ƒä¸¤ä¸ª object æ˜¯å¦ç›¸ç­‰, 
  //åªæœ‰å®ä¾‹çš„æˆå‘˜ä¼šè¢«æ¯”è¾ƒã€‚ é™æ€æˆå‘˜å’Œæ„é€ å‡½æ•°ä¸åœ¨æ¯”è¾ƒçš„èŒƒå›´å†…ã€‚
  // å¦‚æœå±æ€§ä¸å¸¦ä¿®é¥°ç¬¦, åªéœ€è¦å„ä¸ªå±æ€§ç±»å‹éƒ½å…¼å®¹ç›¸ç­‰, åˆ™ object ç›¸ç­‰
  // è‹¥å±æ€§å¸¦æœ‰ä¿®é¥°ç¬¦(privateæˆ– protected), åˆ™ä¸¤ä¸ª object ä¸­çš„ field å¿…é¡»éƒ½æœ‰ç›¸åŒçš„ä¿®é¥°ç¬¦, ä¸”ä¸¤ä¸ª field å£°æ˜è‡ªåŒä¸€ä¸ªåœ°æ–¹(æ¯”å¦‚é€šè¿‡ç»§æ‰¿å¾—åˆ°çš„ field)

  public name: string;
         greeting: string;  //// é»˜è®¤ public
  protected name: string;//protectedæˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­ä»ç„¶å¯ä»¥è®¿é—®; æ„é€ å‡½æ•°ä¹Ÿå¯ä»¥è¢«æ ‡è®°æˆ protectedã€‚ è¿™æ„å‘³ç€è¿™ä¸ªç±»ä¸èƒ½åœ¨åŒ…å«å®ƒçš„ç±»å¤–è¢«å®ä¾‹åŒ–ï¼Œä½†æ˜¯èƒ½è¢«ç»§æ‰¿, å¯ä»¥åœ¨å­ç±»ä¸­è°ƒç”¨ super()
  private name: string; //æ— æ³•åœ¨ç±»å¤–éƒ¨è®¿é—®
  readonly xiaoyu: string = '';// åªè¯»å±æ€§å¿…é¡»åœ¨å£°æ˜æ—¶æˆ–æ„é€ å‡½æ•°é‡Œè¢«åˆå§‹åŒ–
      
  static origin = {x: 0, y: 0};// é™æ€å±æ€§, é€šè¿‡ç±»åè®¿é—® 


  // å‚æ•°å±æ€§: é€šè¿‡ç»™æ„é€ å‡½æ•°å‚æ•°å‰é¢æ·»åŠ ä¸€ä¸ªè®¿é—®é™å®šç¬¦æ¥å£°æ˜ã€‚ ä½¿ç”¨ privateé™å®šä¸€ä¸ªå‚æ•°å±æ€§ä¼šå£°æ˜å¹¶åˆå§‹åŒ–ä¸€ä¸ªç§æœ‰æˆå‘˜ï¼›å¯¹äº publicå’Œ protectedæ¥è¯´ä¹Ÿæ˜¯ä¸€æ ·
  constructor(message: string, readonly xiaoyu: string = 'XIAOYU') {// è¿™é‡Œæ˜¯ä¸ºåŒåå‚æ•° xiaoyu åˆå§‹åŒ–, å¯ä»¥çœæ‰ä¸€äº›ä»£ç  
    // è‹¥æœ‰ç»§æ‰¿, åœ¨æ„é€ å‡½æ•°é‡Œè®¿é—® thisçš„å±æ€§ä¹‹å‰ï¼Œæˆ‘ä»¬ ä¸€å®šè¦è°ƒç”¨ super()
      this.greeting = message;
  }

  // getter, setter
  private _fullName: string;

  get fullName(): string {
      return this._fullName;
  }

  set fullName(newName: string) {
      if (passcode &amp;&amp; passcode == &quot;secret passcode&quot;) {  
          this._fullName = newName;
      }
      else {
          console.log(&quot;Error: Unauthorized update of employee!&quot;);
      }
  }
}

// ä½¿ç”¨ getter, setter
let employee = new Employee();
employee.fullName = &quot;Bob Smith&quot;;//setter
if (employee.fullName) {//getter
    alert(employee.fullName);
}
</code></pre>
<h3><a class="header" href="#æ³›å‹ä½¿ç”¨" id="æ³›å‹ä½¿ç”¨">æ³›å‹ä½¿ç”¨</a></h3>
<pre><code class="language-js">function identity&lt;T&gt;(arg: T): T {
    return arg;
}
let myIdentity: &lt;U&gt;(arg: U) =&gt; U = identity;
let myIdentity: {&lt;T&gt;(arg: T): T} = identity;// ç›¸å½“äºå®šä¹‰äº†ä¸€ä¸ªåŒ¿å interface/object æ¥å®šä¹‰å‡½æ•°ç±»å‹


let output = identity&lt;string&gt;(&quot;myString&quot;);
let output = identity(&quot;myString&quot;);// ç®€å†™


//æ³›å‹çº¦æŸ
function create&lt;T&gt;(c: {new(): T; }): T {
    return new c();
}
function createInstance&lt;A extends Animal&gt;(c: new () =&gt; A): A {
    return new c();
}
</code></pre>
<h3><a class="header" href="#äº¤å‰ç±»å‹" id="äº¤å‰ç±»å‹">äº¤å‰ç±»å‹</a></h3>
<pre><code class="language-js">// é€šè¿‡æ³›å‹å®šä¹‰æ··åˆé¢ç±»å‹
function extend&lt;T, U&gt;(first: T, second: U): T &amp; U {
    let result = &lt;T &amp; U&gt;{};
    for (let id in first) {
        (&lt;any&gt;result)[id] = (&lt;any&gt;first)[id];
    }
    for (let id in second) {
        if (!result.hasOwnProperty(id)) {
            (&lt;any&gt;result)[id] = (&lt;any&gt;second)[id];
        }
    }
    return result;
}

class Person {
    constructor(public name: string) { }
}
interface Loggable {
    log(): void;
}
class ConsoleLogger implements Loggable {
    log() {
        // ...
    }
}
var jim = extend(new Person(&quot;Jim&quot;), new ConsoleLogger());
var n = jim.name;
jim.log();
</code></pre>
<h3><a class="header" href="#è”åˆç±»å‹" id="è”åˆç±»å‹">è”åˆç±»å‹</a></h3>
<pre><code class="language-ts">function padLeft(value: string, padding: string | number) {// padding can be string | number type
    // ...
}
let indentedString = padLeft(&quot;Hello world&quot;, true); // errors during compilation


//å¦‚æœä¸€ä¸ªå€¼æ˜¯è”åˆç±»å‹ï¼Œåªèƒ½è®¿é—®è”åˆç±»å‹é‡Œçš„å…¬å…±éƒ¨åˆ†
interface Bird {
    fly();
    layEggs();
}
interface Fish {
    swim();
    layEggs();
}
function getSmallPet(): Fish | Bird {
    // ...
}
let pet = getSmallPet();
pet.layEggs(); // okay
pet.swim();    // errors

////////////////////////////////////////
// ç±»å‹æ–­è¨€
let pet = getSmallPet();
if ((&lt;Fish&gt;pet).swim) { // æ˜¾å¼æŒ‡å®šä¸€ä¸ªç±»å‹
    (&lt;Fish&gt;pet).swim();
} else {
    (&lt;Bird&gt;pet).fly();
}

// ç®€åŒ–:
// å°†æ–­è¨€æŠ½å‡ºæ¥æˆä¸ºå‡½æ•°
function isFish(pet: Fish | Bird): pet is Fish {// è¿”å›å€¼ä¸ºç±»å‹è°“è¯, è¯­æ³•ä¸º param is Type
    return (&lt;Fish&gt;pet).swim !== undefined;
}
if (isFish(pet)) {
    pet.swim();
}
else {
    pet.fly();
}


// æ„Ÿå¹å· (!): æ‰‹åŠ¨å»é™¤nullæˆ– undefinedçš„è”åˆç±»å‹
function fixed(name: string | null): string {
  function postfix(epithet: string) {
    return name!.charAt(0) + '.  the ' + epithet; // ok, é€šè¿‡ ! å»æ‰äº† null ç±»å‹
  }
  name = name || &quot;Bob&quot;;
  return postfix(&quot;great&quot;);
}


// å¯è¾¨è¯†è”åˆ
interface Square {
    kind: &quot;square&quot;;
    size: number;
}
interface Rectangle {
    kind: &quot;rectangle&quot;;
    width: number;
    height: number;
}
interface Circle {
    kind: &quot;circle&quot;;
    radius: number;
}
type Shape = Square | Rectangle | Circle;
function area(s: Shape) {
    switch (s.kind) {
        case &quot;square&quot;: return s.size * s.size;
        case &quot;rectangle&quot;: return s.height * s.width;
        case &quot;circle&quot;: return Math.PI * s.radius ** 2;
    }
}
</code></pre>
<h3><a class="header" href="#ç±»å‹ä¿æŠ¤" id="ç±»å‹ä¿æŠ¤">ç±»å‹ä¿æŠ¤</a></h3>
<pre><code class="language-js">// å¯¹äºç±»å‹
function padLeft(value: string, padding: string | number) {
    if (typeof padding === &quot;number&quot;) {//å¿…é¡»æ˜¯ &quot;number&quot;ï¼Œ &quot;string&quot;ï¼Œ &quot;boolean&quot;æˆ– &quot;symbol&quot;
        return Array(padding + 1).join(&quot; &quot;) + value;
    }
    if (typeof padding === &quot;string&quot;) {
        return padding + value;
    }
    throw new Error(`Expected string or number, got '${padding}'.`);
}

// å¯¹äºå®ä¾‹
// ç±»å‹ä¸ºSpaceRepeatingPadder | StringPadder
let padder: Padder = getRandomPadder();
if (padder instanceof SpaceRepeatingPadder) { // å³ä¾§å¿…é¡»ä¸ºæ„é€ å‡½æ•°
    padder; // ç±»å‹ç»†åŒ–ä¸º'SpaceRepeatingPadder'
}
if (padder instanceof StringPadder) {
    padder; // ç±»å‹ç»†åŒ–ä¸º'StringPadder'
}
</code></pre>
<h3><a class="header" href="#ç±»å‹åˆ«å" id="ç±»å‹åˆ«å">ç±»å‹åˆ«å</a></h3>
<pre><code class="language-ts">type Name = string;
type NameResolver = () =&gt; string;
type NameOrResolver = Name | NameResolver;
type Tree&lt;T&gt; = {
    value: T;
    left: Tree&lt;T&gt;;
    right: Tree&lt;T&gt;;
}

type LinkedList&lt;T&gt; = T &amp; { next: LinkedList&lt;T&gt; };
interface Person {
    name: string;
}
var people: LinkedList&lt;Person&gt;;
var s = people.name;
var s = people.next.name;
var s = people.next.next.name;
var s = people.next.next.next.name;


// å’Œæ¥å£çš„åŒºåˆ«
type Alias = { num: number }//ç±»å‹åˆ«åå¹¶ä¸åˆ›å»ºæ–°åå­—
interface Interface {
    num: number;
}
declare function aliased(arg: Alias): Alias;//å°†é¼ æ ‡æ‚¬åœåœ¨ interfacedä¸Šï¼Œæ˜¾ç¤ºå®ƒè¿”å›çš„æ˜¯ Interfaceï¼Œä½†æ‚¬åœåœ¨ aliasedä¸Šæ—¶ï¼Œæ˜¾ç¤ºçš„å´æ˜¯å¯¹è±¡å­—é¢é‡ç±»å‹
declare function interfaced(arg: Interface): Interface;

//ç±»å‹åˆ«åä¸èƒ½è¢« extendså’Œ implements
</code></pre>
<h3><a class="header" href="#ç©ºç±»å‹" id="ç©ºç±»å‹">ç©ºç±»å‹</a></h3>
<p>--strictNullChecksæ ‡è®° æ•ˆæœ:</p>
<pre><code class="language-ts">let s = &quot;foo&quot;;
s = null; // é”™è¯¯, 'null'ä¸èƒ½èµ‹å€¼ç»™'string', è‹¥æœæ˜¯ js è§„åˆ™/ts ä¸åŠ  strict æ ‡è®°, åˆ™å¯ä»¥

// TypeScriptä¼šæŠŠ nullå’Œ undefinedåŒºåˆ«å¯¹å¾…ã€‚ string | nullï¼Œ string | undefinedå’Œ string | undefined | nullæ˜¯ä¸åŒçš„ç±»å‹
let sn: string | null = &quot;bar&quot;;
sn = null; // å¯ä»¥

sn = undefined; // error, 'undefined'ä¸èƒ½èµ‹å€¼ç»™'string | null'



//å¯é€‰å‚æ•°ä¼šè¢«è‡ªåŠ¨åœ°åŠ ä¸Š | undefined
function f(x: number, y?: number) {
    return x + (y || 0);
}
f(1, 2);
f(1);
f(1, undefined);
f(1, null); // error, 'null' is not assignable to 'number | undefined'
</code></pre>
<h2><a class="header" href="#ä¸ºæ ·å¼æ–‡ä»¶ç¼–å†™-types" id="ä¸ºæ ·å¼æ–‡ä»¶ç¼–å†™-types">ä¸ºæ ·å¼æ–‡ä»¶ç¼–å†™ types</a></h2>
<p>https://blog.csdn.net/Dilomen/article/details/100837293
https://segmentfault.com/q/1010000017979602/a-1020000017980147</p>
<p>https://www.typescriptlang.org/dt/search?search= æœç´¢ç±»å‹å£°æ˜æ–‡ä»¶</p>
<p>typeRoots æ˜¯ tsconfig ä¸­ compilerOptions çš„ä¸€ä¸ªé…ç½®é¡¹ï¼ŒtypeRoots ä¸‹é¢çš„åŒ…ä¼šè¢« ts ç¼–è¯‘å™¨è‡ªåŠ¨åŒ…å«è¿›æ¥ï¼ŒtypeRoots é»˜è®¤æŒ‡å‘ node_modules/@types</p>
<p>types å’Œ typeRoots ä¸€æ ·ä¹Ÿæ˜¯ compilerOptions çš„é…ç½®ï¼ŒæŒ‡å®š types åï¼ŒtypeRoots ä¸‹åªæœ‰è¢«æŒ‡å®šçš„åŒ…æ‰ä¼šè¢«å¼•å…¥</p>
<p>https://www.zhihu.com/question/350961609 å£°æ˜å…¨å±€ç±»å‹ æ— éœ€å¯¼å…¥</p>
<h2><a class="header" href="#é…ç½®-css-è·³è½¬" id="é…ç½®-css-è·³è½¬">é…ç½® css è·³è½¬</a></h2>
<p>https://www.jianshu.com/p/641bcac7754b</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="cross-gfw.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="cs-note.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="cross-gfw.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="cs-note.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
